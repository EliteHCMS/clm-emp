import{_ as G,bT as J,bU as Y,c0 as ee,bL as ae,r as f,ac as P,c2 as $,c4 as k,b8 as q,aT as te,g as u,ad as C,bd as l,V as s,h as b,al as a,ae as i,k as V,bO as h,c$ as se,Z as v,bA as le,bz as re,cy as I,D as M,bW as S,ai as oe,bV as z,n as ne,bX as ue,ak as E,c_ as ie,bQ as de,q as me}from"./index.2d58de3a.js";import{Q as pe}from"./QForm.0e69daf8.js";import{Q as ce}from"./QPage.37fc11d1.js";import{p as ve}from"./VueTelInput.de9fb7f1.js";import{c as ge}from"./carousel.05d59302.js";import"./use-panel.635e7b44.js";import"./use-fullscreen.fdaf91e7.js";const fe={key:0,class:"col-md-7 col-lg-8 col-lx-8"},be={class:"col-xs-12 col-sm-12 col-md-5 col-lg-4 col-lx-4 row justify-center items-center"},he={key:0,class:"text-dark"},ye={key:1,class:"text-dark"},xe={key:0,class:"row q-col-gutter-xs"},_e={class:"text-grey-6",tabindex:"4"},Ne={class:"text-grey-6",tabindex:"5"},we={class:"row justify-center"},$e={__name:"forgotPassword",setup(ke){const R=J(),U=Y(),{t:y}=ee(),{currentUserType:T}=ae(),d=f(!1),m=f(!1),j=f(10),r=f("username"),o=f("phoneNumber"),g=f(null),F=P(()=>d.value||o.value==="phoneNumber"?$().email(`${y("validEmailIsRequired")}`).nullable():$().email(`${y("validEmailIsRequired")}`).required()),K=P(()=>{if(m.value||o.value==="email")return $().nullable();{const e=new RegExp("^[0-9]{"+j.value+"}","g");return $().matches(e,{excludeEmptyString:!0,message:`${y("validPhoneIsRequired")}`}).required()}}),{value:x,errorMessage:B,meta:W}=k("firstName"),{value:_,errorMessage:L,meta:H}=k("lastName"),{errorMessage:Q,value:p}=k("email",F),{errorMessage:N,value:c}=k("phone",K);T==="QuickBase User"&&U.push("/"),q(Q,e=>{e||p.value===""?m.value=!1:m.value=!0}),q(p,e=>{(!e||e==="")&&(m.value=!1)}),q(N,e=>{e||c.value===""?d.value=!1:d.value=!0}),q(c,e=>{(!e||e==="")&&(d.value=!1)});const O=e=>{g.value=e},X=e=>{j.value=e},A=P(()=>!(d.value||m.value)),D=async()=>{const e={userType:T,firstName:x.value,lastName:_.value,email:m.value?p.value:null,phoneNumber:d.value?`+${g.value?g.value.dialCode:"1"}${c.value}`:null},{data:t}=await me.resetPassword(e);if(t.length===0)R.notify({position:"top-right",type:"negative",message:`${y("noUserFoundWithInformation")}`});else{const w=t[0][76];U.push({name:"code-confirmation",query:{...g.value&&d.value&&{p:`${g.value?g.value.dialCode:"1"}${c.value}`},...m.value&&{e:`${p.value}`},rid:w[3],ac:!0,send:!0}})}},Z=e=>{r.value==="username"&&!A.value?D():e.preventDefault()};return(e,t)=>{const w=te("router-link");return u(),C(ce,{class:"window-height window-width row"},{default:l(()=>[s(R).screen.lt.md?i("",!0):(u(),b("div",fe,[a(ge)])),V("div",be,[a(de,{class:"auth-card",flat:""},{default:l(()=>[a(h,{style:{"padding-left":"30px","padding-right":"30px"}},{default:l(()=>[a(se,{src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo.svg",fit:"scale-down",class:"auth-logo full-width"})]),_:1}),a(h,{class:"text-center auth-description"},{default:l(()=>[o.value==="email"&&r.value==="username"?(u(),b("p",he,v(e.$t("enterEmailSendCode")),1)):i("",!0),o.value==="phoneNumber"&&r.value==="username"?(u(),b("p",ye,v(e.$t("enterPhoneSendCode")),1)):i("",!0)]),_:1}),a(h,null,{default:l(()=>[a(pe,{class:"q-px-sm q-pt-sm",onSubmit:t[7]||(t[7]=le(()=>{},["prevent"])),onKeyup:re(Z,["enter"])},{default:l(()=>[r.value==="username"?(u(),b("div",xe,[a(I,{class:"col-xs-12 col-sm-6 q-pb-lg",clearable:"",outlined:"",modelValue:s(x),"onUpdate:modelValue":t[0]||(t[0]=n=>M(x)?x.value=n:null),type:"text",autocomplete:"given-name",label:e.$t("firstName"),tabindex:"1",name:"firstName",error:!!(s(B)&&s(W).validated),"error-message":s(B)},{prepend:l(()=>[a(S,{name:"person"})]),_:1},8,["modelValue","label","error","error-message"]),a(I,{class:"col-xs-12 col-sm-6",clearable:"",outlined:"",modelValue:s(_),"onUpdate:modelValue":t[1]||(t[1]=n=>M(_)?_.value=n:null),type:"text",autocomplete:"family-name",label:e.$t("lastName"),tabindex:"2",name:"lastName",error:!!(s(L)&&s(H).validated),"error-message":s(L)},{prepend:l(()=>[a(S,{name:"person_outline"})]),_:1},8,["modelValue","label","error","error-message"])])):i("",!0),o.value==="email"&&r.value==="username"?(u(),C(I,{key:1,style:{"padding-bottom":"0px"},clearable:"",outlined:"",modelValue:s(p),"onUpdate:modelValue":t[3]||(t[3]=n=>M(p)?p.value=n:null),type:"email",label:e.$t("email"),tabindex:"3",error:!!s(Q),"error-message":s(Q),readonly:r.value!=="username"},oe({prepend:l(()=>[a(S,{name:"email"})]),_:2},[r.value!=="username"?{name:"append",fn:l(()=>[a(z,{round:"",dense:"",flat:"",icon:"edit",onClick:t[2]||(t[2]=n=>{r.value="username"})})])}:void 0]),1032,["modelValue","label","error","error-message","readonly"])):i("",!0),o.value==="phoneNumber"&&r.value==="username"?(u(),C(ve,{key:2,outlined:"",modelValue:s(c),"onUpdate:modelValue":t[4]||(t[4]=n=>M(c)?c.value=n:null),label:e.$t("phoneNumber"),tabindex:"3",onMaxLengthChanged:X,style:ne(s(N)?"padding-bottom: 20px;":"padding-bottom: 0px;"),error:!!s(N),"error-message":s(N),onCountryChanged:O},null,8,["modelValue","label","style","error","error-message"])):i("",!0),a(h,{class:"text-right q-pa-none"},{default:l(()=>[o.value==="email"?(u(),b("a",{key:0,onClick:t[5]||(t[5]=n=>o.value="phoneNumber"),class:"text-grey-6",href:"javascript:void(0);",tabindex:"4"},v(e.$t("usePhoneNumber")),1)):i("",!0),o.value==="phoneNumber"?(u(),b("a",{key:1,onClick:t[6]||(t[6]=n=>o.value="email"),class:"text-grey-6",href:"javascript:void(0);",tabindex:"4"},v(e.$t("useEmail")),1)):i("",!0)]),_:1})]),_:1},8,["onKeyup"])]),_:1}),a(ue,{class:"q-px-lg"},{default:l(()=>[r.value==="username"?(u(),C(z,{key:0,unelevated:"",size:"lg",color:"primary",class:"full-width text-white",label:e.$t("resetPassword"),tabindex:"3",disabled:s(A),onClick:D},null,8,["label","disabled"])):i("",!0)]),_:1}),a(h,{class:"text-center q-pa-sm"},{default:l(()=>[V("p",_e,[a(w,{to:"/login",class:"text-grey-6"},{default:l(()=>[E(v(e.$t("returnToLogin")),1)]),_:1})]),V("p",Ne,[E(v(e.$t("needAnAccountQuestion"))+" ",1),a(w,{to:"/register",class:"text-grey-6"},{default:l(()=>[E(v(e.$t("register")),1)]),_:1})])]),_:1}),a(h,{class:"q-pl-lg q-pa-sm"},{default:l(()=>[V("div",we,[a(ie,{dense:"",borderless:""})])]),_:1})]),_:1})])]),_:1})}}};var Se=G($e,[["__scopeId","data-v-59610dc8"]]);export{Se as default};
