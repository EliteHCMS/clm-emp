var vr=Object.defineProperty,yr=Object.defineProperties;var gr=Object.getOwnPropertyDescriptors;var st=Object.getOwnPropertySymbols;var wr=Object.prototype.hasOwnProperty,Ar=Object.prototype.propertyIsEnumerable;var ye=(e,t,r)=>t in e?vr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,B=(e,t)=>{for(var r in t||(t={}))wr.call(t,r)&&ye(e,r,t[r]);if(st)for(var r of st(t))Ar.call(t,r)&&ye(e,r,t[r]);return e},ge=(e,t)=>yr(e,gr(t));var E=(e,t,r)=>(ye(e,typeof t!="symbol"?t+"":t,r),r);import{l as Dr,P as wt,m as Tr,p as O,n as At,q as te,s as K,t as _,f as Ir}from"./index.ba07a5d9.js";import{c as kr,a as Cr}from"./_commonjsHelpers.d497b07e.js";import{dayjs as S}from"./dayjs.d2e66c8d.js";import{localforage as R}from"./localForage.1b2252c0.js";import{r as Sr,a as Or}from"./index.7dbe61ef.js";import{i as we}from"./i18n.9d38a8af.js";const le=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function $r(e){return Fr(e)===0}function Rr(e,t){return t<=6?31:t<=11||$r(e)?30:29}function Fr(e){const t=le.length;let r=le[0],a,s,i,n,o;if(e<r||e>=le[t-1])throw new Error("Invalid Jalaali year "+e);for(o=1;o<t&&(a=le[o],s=a-r,!(e<a));o+=1)r=a;return n=e-r,s-n<6&&(n=n-s+Er(s+4,33)*33),i=it(it(n+1,33)-1,4),i===-1&&(i=4),i}function Er(e,t){return~~(e/t)}function it(e,t){return e-~~(e/t)*t}const Dt=864e5,Mr=36e5,Ce=6e4,Tt="YYYY-MM-DDTHH:mm:ss.SSSZ",qr=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,Nr=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,Ae={};function Lr(e,t){const r="("+t.days.join("|")+")",a=e+r;if(Ae[a]!==void 0)return Ae[a];const s="("+t.daysShort.join("|")+")",i="("+t.months.join("|")+")",n="("+t.monthsShort.join("|")+")",o={};let c=0;const d=e.replace(Nr,y=>{switch(c++,y){case"YY":return o.YY=c,"(-?\\d{1,2})";case"YYYY":return o.YYYY=c,"(-?\\d{1,4})";case"M":return o.M=c,"(\\d{1,2})";case"MM":return o.M=c,"(\\d{2})";case"MMM":return o.MMM=c,n;case"MMMM":return o.MMMM=c,i;case"D":return o.D=c,"(\\d{1,2})";case"Do":return o.D=c++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return o.D=c,"(\\d{2})";case"H":return o.H=c,"(\\d{1,2})";case"HH":return o.H=c,"(\\d{2})";case"h":return o.h=c,"(\\d{1,2})";case"hh":return o.h=c,"(\\d{2})";case"m":return o.m=c,"(\\d{1,2})";case"mm":return o.m=c,"(\\d{2})";case"s":return o.s=c,"(\\d{1,2})";case"ss":return o.s=c,"(\\d{2})";case"S":return o.S=c,"(\\d{1})";case"SS":return o.S=c,"(\\d{2})";case"SSS":return o.S=c,"(\\d{3})";case"A":return o.A=c,"(AM|PM)";case"a":return o.a=c,"(am|pm)";case"aa":return o.aa=c,"(a\\.m\\.|p\\.m\\.)";case"ddd":return s;case"dddd":return r;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return o.Z=c,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return o.ZZ=c,"(Z|[+-]\\d{2}\\d{2})";case"X":return o.X=c,"(-?\\d+)";case"x":return o.x=c,"(-?\\d{4,})";default:return c--,y[0]==="["&&(y=y.substring(1,y.length-1)),y.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),m={map:o,regex:new RegExp("^"+d)};return Ae[a]=m,m}function It(e,t){return e!==void 0?e:t!==void 0?t.date:Tr.date}function nt(e,t=""){const r=e>0?"-":"+",a=Math.abs(e),s=Math.floor(a/60),i=a%60;return r+O(s)+t+O(i)}function jr(e,t,r){let a=e.getFullYear(),s=e.getMonth();const i=e.getDate();return t.year!==void 0&&(a+=r*t.year,delete t.year),t.month!==void 0&&(s+=r*t.month,delete t.month),e.setDate(1),e.setMonth(2),e.setFullYear(a),e.setMonth(s),e.setDate(Math.min(i,Pe(e))),t.date!==void 0&&(e.setDate(e.getDate()+r*t.date),delete t.date),e}function Ur(e,t,r){const a=t.year!==void 0?t.year:e[`get${r}FullYear`](),s=t.month!==void 0?t.month-1:e[`get${r}Month`](),i=new Date(a,s+1,0).getDate(),n=Math.min(i,t.date!==void 0?t.date:e[`get${r}Date`]());return e[`set${r}Date`](1),e[`set${r}Month`](2),e[`set${r}FullYear`](a),e[`set${r}Month`](s),e[`set${r}Date`](n),delete t.year,delete t.month,delete t.date,e}function Ue(e,t,r){const a=kt(t),s=new Date(e),i=a.year!==void 0||a.month!==void 0||a.date!==void 0?jr(s,a,r):s;for(const n in a){const o=Dr(n);i[`set${o}`](i[`get${o}`]()+r*a[n])}return i}function kt(e){const t=B({},e);return e.years!==void 0&&(t.year=e.years,delete t.years),e.months!==void 0&&(t.month=e.months,delete t.months),e.days!==void 0&&(t.date=e.days,delete t.days),e.day!==void 0&&(t.date=e.day,delete t.day),e.hour!==void 0&&(t.hours=e.hour,delete t.hour),e.minute!==void 0&&(t.minutes=e.minute,delete t.minute),e.second!==void 0&&(t.seconds=e.second,delete t.second),e.millisecond!==void 0&&(t.milliseconds=e.millisecond,delete t.millisecond),t}function Ct(e,t,r){const a=kt(t),s=r===!0?"UTC":"",i=new Date(e),n=a.year!==void 0||a.month!==void 0||a.date!==void 0?Ur(i,a,s):i;for(const o in a){const c=o.charAt(0).toUpperCase()+o.slice(1);n[`set${s}${c}`](a[o])}return n}function Pr(e,t,r){const a=_r(e,t,r),s=new Date(a.year,a.month===null?null:a.month-1,a.day===null?1:a.day,a.hour,a.minute,a.second,a.millisecond),i=s.getTimezoneOffset();return a.timezoneOffset===null||a.timezoneOffset===i?s:Ue(s,{minutes:a.timezoneOffset-i},1)}function _r(e,t,r,a,s){const i={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(s!==void 0&&Object.assign(i,s),e==null||e===""||typeof e!="string")return i;t===void 0&&(t=Tt);const n=It(r,wt.props),o=n.months,c=n.monthsShort,{regex:d,map:m}=Lr(t,n),y=e.match(d);if(y===null)return i;let v="";if(m.X!==void 0||m.x!==void 0){const T=parseInt(y[m.X!==void 0?m.X:m.x],10);if(isNaN(T)===!0||T<0)return i;const k=new Date(T*(m.X!==void 0?1e3:1));i.year=k.getFullYear(),i.month=k.getMonth()+1,i.day=k.getDate(),i.hour=k.getHours(),i.minute=k.getMinutes(),i.second=k.getSeconds(),i.millisecond=k.getMilliseconds()}else{if(m.YYYY!==void 0)i.year=parseInt(y[m.YYYY],10);else if(m.YY!==void 0){const T=parseInt(y[m.YY],10);i.year=T<0?T:2e3+T}if(m.M!==void 0){if(i.month=parseInt(y[m.M],10),i.month<1||i.month>12)return i}else m.MMM!==void 0?i.month=c.indexOf(y[m.MMM])+1:m.MMMM!==void 0&&(i.month=o.indexOf(y[m.MMMM])+1);if(m.D!==void 0){if(i.day=parseInt(y[m.D],10),i.year===null||i.month===null||i.day<1)return i;const T=a!=="persian"?new Date(i.year,i.month,0).getDate():Rr(i.year,i.month);if(i.day>T)return i}m.H!==void 0?i.hour=parseInt(y[m.H],10)%24:m.h!==void 0&&(i.hour=parseInt(y[m.h],10)%12,(m.A&&y[m.A]==="PM"||m.a&&y[m.a]==="pm"||m.aa&&y[m.aa]==="p.m.")&&(i.hour+=12),i.hour=i.hour%24),m.m!==void 0&&(i.minute=parseInt(y[m.m],10)%60),m.s!==void 0&&(i.second=parseInt(y[m.s],10)%60),m.S!==void 0&&(i.millisecond=parseInt(y[m.S],10)*10**(3-y[m.S].length)),(m.Z!==void 0||m.ZZ!==void 0)&&(v=m.Z!==void 0?y[m.Z].replace(":",""):y[m.ZZ],i.timezoneOffset=(v[0]==="+"?-1:1)*(60*v.slice(1,3)+1*v.slice(3,5)))}return i.dateHash=O(i.year,6)+"/"+O(i.month)+"/"+O(i.day),i.timeHash=O(i.hour)+":"+O(i.minute)+":"+O(i.second)+v,i}function Yr(e){return typeof e=="number"?!0:isNaN(Date.parse(e))===!1}function Qr(e,t){return Ct(new Date,e,t)}function Br(e){const t=new Date(e).getDay();return t===0?7:t}function Se(e){const t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);const r=new Date(t.getFullYear(),0,4);r.setDate(r.getDate()-(r.getDay()+6)%7+3);const a=t.getTimezoneOffset()-r.getTimezoneOffset();t.setHours(t.getHours()-a);const s=(t-r)/(Dt*7);return 1+Math.floor(s)}function Xr(e){return e.getFullYear()*1e4+e.getMonth()*100+e.getDate()}function De(e,t){const r=new Date(e);return t===!0?Xr(r):r.getTime()}function Hr(e,t,r,a={}){const s=De(t,a.onlyDate),i=De(r,a.onlyDate),n=De(e,a.onlyDate);return(n>s||a.inclusiveFrom===!0&&n===s)&&(n<i||a.inclusiveTo===!0&&n===i)}function Kr(e,t){return Ue(e,t,1)}function zr(e,t){return Ue(e,t,-1)}function Y(e,t,r){const a=new Date(e),s=`set${r===!0?"UTC":""}`;switch(t){case"year":case"years":a[`${s}Month`](0);case"month":case"months":a[`${s}Date`](1);case"day":case"days":case"date":a[`${s}Hours`](0);case"hour":case"hours":a[`${s}Minutes`](0);case"minute":case"minutes":a[`${s}Seconds`](0);case"second":case"seconds":a[`${s}Milliseconds`](0)}return a}function Jr(e,t,r){const a=new Date(e),s=`set${r===!0?"UTC":""}`;switch(t){case"year":case"years":a[`${s}Month`](11);case"month":case"months":a[`${s}Date`](Pe(a));case"day":case"days":case"date":a[`${s}Hours`](23);case"hour":case"hours":a[`${s}Minutes`](59);case"minute":case"minutes":a[`${s}Seconds`](59);case"second":case"seconds":a[`${s}Milliseconds`](999)}return a}function Vr(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(r=>{t=Math.max(t,new Date(r))}),t}function Wr(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(r=>{t=Math.min(t,new Date(r))}),t}function ue(e,t,r){return(e.getTime()-e.getTimezoneOffset()*Ce-(t.getTime()-t.getTimezoneOffset()*Ce))/r}function St(e,t,r="days"){const a=new Date(e),s=new Date(t);switch(r){case"years":case"year":return a.getFullYear()-s.getFullYear();case"months":case"month":return(a.getFullYear()-s.getFullYear())*12+a.getMonth()-s.getMonth();case"days":case"day":case"date":return ue(Y(a,"day"),Y(s,"day"),Dt);case"hours":case"hour":return ue(Y(a,"hour"),Y(s,"hour"),Mr);case"minutes":case"minute":return ue(Y(a,"minute"),Y(s,"minute"),Ce);case"seconds":case"second":return ue(Y(a,"second"),Y(s,"second"),1e3)}}function Oe(e){return St(e,Y(e,"year"),"days")+1}function Zr(e){return At(e)===!0?"date":typeof e=="number"?"number":"string"}function Gr(e,t,r){const a=new Date(e);if(t){const s=new Date(t);if(a<s)return s}if(r){const s=new Date(r);if(a>s)return s}return a}function ea(e,t,r){const a=new Date(e),s=new Date(t);if(r===void 0)return a.getTime()===s.getTime();switch(r){case"second":case"seconds":if(a.getSeconds()!==s.getSeconds())return!1;case"minute":case"minutes":if(a.getMinutes()!==s.getMinutes())return!1;case"hour":case"hours":if(a.getHours()!==s.getHours())return!1;case"day":case"days":case"date":if(a.getDate()!==s.getDate())return!1;case"month":case"months":if(a.getMonth()!==s.getMonth())return!1;case"year":case"years":if(a.getFullYear()!==s.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${r}`)}return!0}function Pe(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function ot(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const ct={YY(e,t,r){const a=this.YYYY(e,t,r)%100;return a>0?O(a):"-"+O(Math.abs(a))},YYYY(e,t,r){return r!=null?r:e.getFullYear()},M(e){return e.getMonth()+1},MM(e){return O(e.getMonth()+1)},MMM(e,t){return t.monthsShort[e.getMonth()]},MMMM(e,t){return t.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return ot(this.Q(e))},D(e){return e.getDate()},Do(e){return ot(e.getDate())},DD(e){return O(e.getDate())},DDD(e){return Oe(e)},DDDD(e){return O(Oe(e),3)},d(e){return e.getDay()},dd(e,t){return this.dddd(e,t).slice(0,2)},ddd(e,t){return t.daysShort[e.getDay()]},dddd(e,t){return t.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return Se(e)},ww(e){return O(Se(e))},H(e){return e.getHours()},HH(e){return O(e.getHours())},h(e){const t=e.getHours();return t===0?12:t>12?t%12:t},hh(e){return O(this.h(e))},m(e){return e.getMinutes()},mm(e){return O(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return O(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return O(Math.floor(e.getMilliseconds()/10))},SSS(e){return O(e.getMilliseconds(),3)},A(e){return this.H(e)<12?"AM":"PM"},a(e){return this.H(e)<12?"am":"pm"},aa(e){return this.H(e)<12?"a.m.":"p.m."},Z(e,t,r,a){const s=a==null?e.getTimezoneOffset():a;return nt(s,":")},ZZ(e,t,r,a){const s=a==null?e.getTimezoneOffset():a;return nt(s)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function ta(e,t,r,a,s){if(e!==0&&!e||e===1/0||e===-1/0)return;const i=new Date(e);if(isNaN(i))return;t===void 0&&(t=Tt);const n=It(r,wt.props);return t.replace(qr,(o,c)=>o in ct?ct[o](i,n,a,s):c===void 0?o:c.split("\\]").join("]"))}function ra(e){return At(e)===!0?new Date(e.getTime()):e}var L={isValid:Yr,extractDate:Pr,buildDate:Qr,getDayOfWeek:Br,getWeekOfYear:Se,isBetweenDates:Hr,addToDate:Kr,subtractFromDate:zr,adjustDate:Ct,startOfDate:Y,endOfDate:Jr,getMaxDate:Vr,getMinDate:Wr,getDateDiff:St,getDayOfYear:Oe,inferDateFormat:Zr,getDateBetween:Gr,isSameDate:ea,daysInMonth:Pe,formatDate:ta,clone:ra},Ot={exports:{}};(function(e){/**
 * @license bcrypt.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/bcrypt.js for details
 */(function(t,r){typeof kr=="function"&&!0&&e&&e.exports?e.exports=r():(t.dcodeIO=t.dcodeIO||{}).bcrypt=r()})(Cr,function(){var t={},r=null;function a(p){if(e&&e.exports)try{return require("crypto").randomBytes(p)}catch{}try{var h;return(self.crypto||self.msCrypto).getRandomValues(h=new Uint32Array(p)),Array.prototype.slice.call(h)}catch{}if(!r)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return r(p)}var s=!1;try{a(1),s=!0}catch{}r=null,t.setRandomFallback=function(p){r=p},t.genSaltSync=function(p,h){if(p=p||N,typeof p!="number")throw Error("Illegal arguments: "+typeof p+", "+typeof h);p<4?p=4:p>31&&(p=31);var f=[];return f.push("$2a$"),p<10&&f.push("0"),f.push(p.toString()),f.push("$"),f.push(y(a(k),k)),f.join("")},t.genSalt=function(p,h,f){if(typeof h=="function"&&(f=h,h=void 0),typeof p=="function"&&(f=p,p=void 0),typeof p=="undefined")p=N;else if(typeof p!="number")throw Error("illegal arguments: "+typeof p);function u(l){n(function(){try{l(null,t.genSaltSync(p))}catch(x){l(x)}})}if(f){if(typeof f!="function")throw Error("Illegal callback: "+typeof f);u(f)}else return new Promise(function(l,x){u(function(b,A){if(b){x(b);return}l(A)})})},t.hashSync=function(p,h){if(typeof h=="undefined"&&(h=N),typeof h=="number"&&(h=t.genSaltSync(h)),typeof p!="string"||typeof h!="string")throw Error("Illegal arguments: "+typeof p+", "+typeof h);return ve(p,h)},t.hash=function(p,h,f,u){function l(x){typeof p=="string"&&typeof h=="number"?t.genSalt(h,function(b,A){ve(p,A,x,u)}):typeof p=="string"&&typeof h=="string"?ve(p,h,x,u):n(x.bind(this,Error("Illegal arguments: "+typeof p+", "+typeof h)))}if(f){if(typeof f!="function")throw Error("Illegal callback: "+typeof f);l(f)}else return new Promise(function(x,b){l(function(A,g){if(A){b(A);return}x(g)})})};function i(p,h){for(var f=0,u=0,l=0,x=p.length;l<x;++l)p.charCodeAt(l)===h.charCodeAt(l)?++f:++u;return f<0?!1:u===0}t.compareSync=function(p,h){if(typeof p!="string"||typeof h!="string")throw Error("Illegal arguments: "+typeof p+", "+typeof h);return h.length!==60?!1:i(t.hashSync(p,h.substr(0,h.length-31)),h)},t.compare=function(p,h,f,u){function l(x){if(typeof p!="string"||typeof h!="string"){n(x.bind(this,Error("Illegal arguments: "+typeof p+", "+typeof h)));return}if(h.length!==60){n(x.bind(this,null,!1));return}t.hash(p,h.substr(0,29),function(b,A){b?x(b):x(null,i(A,h))},u)}if(f){if(typeof f!="function")throw Error("Illegal callback: "+typeof f);l(f)}else return new Promise(function(x,b){l(function(A,g){if(A){b(A);return}x(g)})})},t.getRounds=function(p){if(typeof p!="string")throw Error("Illegal arguments: "+typeof p);return parseInt(p.split("$")[2],10)},t.getSalt=function(p){if(typeof p!="string")throw Error("Illegal arguments: "+typeof p);if(p.length!==60)throw Error("Illegal hash length: "+p.length+" != 60");return p.substring(0,29)};var n=typeof process!="undefined"&&process&&typeof process.nextTick=="function"?typeof setImmediate=="function"?setImmediate:process.nextTick:setTimeout;function o(p){var h=[],f=0;return T.encodeUTF16toUTF8(function(){return f>=p.length?null:p.charCodeAt(f++)},function(u){h.push(u)}),h}var c="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),d=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1],m=String.fromCharCode;function y(p,h){var f=0,u=[],l,x;if(h<=0||h>p.length)throw Error("Illegal len: "+h);for(;f<h;){if(l=p[f++]&255,u.push(c[l>>2&63]),l=(l&3)<<4,f>=h){u.push(c[l&63]);break}if(x=p[f++]&255,l|=x>>4&15,u.push(c[l&63]),l=(x&15)<<2,f>=h){u.push(c[l&63]);break}x=p[f++]&255,l|=x>>6&3,u.push(c[l&63]),u.push(c[x&63])}return u.join("")}function v(p,h){var f=0,u=p.length,l=0,x=[],b,A,g,D,I,C;if(h<=0)throw Error("Illegal len: "+h);for(;f<u-1&&l<h&&(C=p.charCodeAt(f++),b=C<d.length?d[C]:-1,C=p.charCodeAt(f++),A=C<d.length?d[C]:-1,!(b==-1||A==-1||(I=b<<2>>>0,I|=(A&48)>>4,x.push(m(I)),++l>=h||f>=u)||(C=p.charCodeAt(f++),g=C<d.length?d[C]:-1,g==-1)||(I=(A&15)<<4>>>0,I|=(g&60)>>2,x.push(m(I)),++l>=h||f>=u)));)C=p.charCodeAt(f++),D=C<d.length?d[C]:-1,I=(g&3)<<6>>>0,I|=D,x.push(m(I)),++l;var P=[];for(f=0;f<l;f++)P.push(x[f].charCodeAt(0));return P}var T=function(){var p={};return p.MAX_CODEPOINT=1114111,p.encodeUTF8=function(h,f){var u=null;for(typeof h=="number"&&(u=h,h=function(){return null});u!==null||(u=h())!==null;)u<128?f(u&127):u<2048?(f(u>>6&31|192),f(u&63|128)):u<65536?(f(u>>12&15|224),f(u>>6&63|128),f(u&63|128)):(f(u>>18&7|240),f(u>>12&63|128),f(u>>6&63|128),f(u&63|128)),u=null},p.decodeUTF8=function(h,f){for(var u,l,x,b,A=function(g){g=g.slice(0,g.indexOf(null));var D=Error(g.toString());throw D.name="TruncatedError",D.bytes=g,D};(u=h())!==null;)if((u&128)===0)f(u);else if((u&224)===192)(l=h())===null&&A([u,l]),f((u&31)<<6|l&63);else if((u&240)===224)((l=h())===null||(x=h())===null)&&A([u,l,x]),f((u&15)<<12|(l&63)<<6|x&63);else if((u&248)===240)((l=h())===null||(x=h())===null||(b=h())===null)&&A([u,l,x,b]),f((u&7)<<18|(l&63)<<12|(x&63)<<6|b&63);else throw RangeError("Illegal starting byte: "+u)},p.UTF16toUTF8=function(h,f){for(var u,l=null;(u=l!==null?l:h())!==null;){if(u>=55296&&u<=57343&&(l=h())!==null&&l>=56320&&l<=57343){f((u-55296)*1024+l-56320+65536),l=null;continue}f(u)}l!==null&&f(l)},p.UTF8toUTF16=function(h,f){var u=null;for(typeof h=="number"&&(u=h,h=function(){return null});u!==null||(u=h())!==null;)u<=65535?f(u):(u-=65536,f((u>>10)+55296),f(u%1024+56320)),u=null},p.encodeUTF16toUTF8=function(h,f){p.UTF16toUTF8(h,function(u){p.encodeUTF8(u,f)})},p.decodeUTF8toUTF16=function(h,f){p.decodeUTF8(h,function(u){p.UTF8toUTF16(u,f)})},p.calculateCodePoint=function(h){return h<128?1:h<2048?2:h<65536?3:4},p.calculateUTF8=function(h){for(var f,u=0;(f=h())!==null;)u+=p.calculateCodePoint(f);return u},p.calculateUTF16asUTF8=function(h){var f=0,u=0;return p.UTF16toUTF8(h,function(l){++f,u+=p.calculateCodePoint(l)}),[f,u]},p}();Date.now=Date.now||function(){return+new Date};var k=16,N=10,q=16,re=100,Ge=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],et=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],tt=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function ae(p,h,f,u){var l,x=p[h],b=p[h+1];return x^=f[0],l=u[x>>>24],l+=u[256|x>>16&255],l^=u[512|x>>8&255],l+=u[768|x&255],b^=l^f[1],l=u[b>>>24],l+=u[256|b>>16&255],l^=u[512|b>>8&255],l+=u[768|b&255],x^=l^f[2],l=u[x>>>24],l+=u[256|x>>16&255],l^=u[512|x>>8&255],l+=u[768|x&255],b^=l^f[3],l=u[b>>>24],l+=u[256|b>>16&255],l^=u[512|b>>8&255],l+=u[768|b&255],x^=l^f[4],l=u[x>>>24],l+=u[256|x>>16&255],l^=u[512|x>>8&255],l+=u[768|x&255],b^=l^f[5],l=u[b>>>24],l+=u[256|b>>16&255],l^=u[512|b>>8&255],l+=u[768|b&255],x^=l^f[6],l=u[x>>>24],l+=u[256|x>>16&255],l^=u[512|x>>8&255],l+=u[768|x&255],b^=l^f[7],l=u[b>>>24],l+=u[256|b>>16&255],l^=u[512|b>>8&255],l+=u[768|b&255],x^=l^f[8],l=u[x>>>24],l+=u[256|x>>16&255],l^=u[512|x>>8&255],l+=u[768|x&255],b^=l^f[9],l=u[b>>>24],l+=u[256|b>>16&255],l^=u[512|b>>8&255],l+=u[768|b&255],x^=l^f[10],l=u[x>>>24],l+=u[256|x>>16&255],l^=u[512|x>>8&255],l+=u[768|x&255],b^=l^f[11],l=u[b>>>24],l+=u[256|b>>16&255],l^=u[512|b>>8&255],l+=u[768|b&255],x^=l^f[12],l=u[x>>>24],l+=u[256|x>>16&255],l^=u[512|x>>8&255],l+=u[768|x&255],b^=l^f[13],l=u[b>>>24],l+=u[256|b>>16&255],l^=u[512|b>>8&255],l+=u[768|b&255],x^=l^f[14],l=u[x>>>24],l+=u[256|x>>16&255],l^=u[512|x>>8&255],l+=u[768|x&255],b^=l^f[15],l=u[b>>>24],l+=u[256|b>>16&255],l^=u[512|b>>8&255],l+=u[768|b&255],x^=l^f[16],p[h]=b^f[q+1],p[h+1]=x,p}function Z(p,h){for(var f=0,u=0;f<4;++f)u=u<<8|p[h]&255,h=(h+1)%p.length;return{key:u,offp:h}}function rt(p,h,f){for(var u=0,l=[0,0],x=h.length,b=f.length,A,g=0;g<x;g++)A=Z(p,u),u=A.offp,h[g]=h[g]^A.key;for(g=0;g<x;g+=2)l=ae(l,0,h,f),h[g]=l[0],h[g+1]=l[1];for(g=0;g<b;g+=2)l=ae(l,0,h,f),f[g]=l[0],f[g+1]=l[1]}function br(p,h,f,u){for(var l=0,x=[0,0],b=f.length,A=u.length,g,D=0;D<b;D++)g=Z(h,l),l=g.offp,f[D]=f[D]^g.key;for(l=0,D=0;D<b;D+=2)g=Z(p,l),l=g.offp,x[0]^=g.key,g=Z(p,l),l=g.offp,x[1]^=g.key,x=ae(x,0,f,u),f[D]=x[0],f[D+1]=x[1];for(D=0;D<A;D+=2)g=Z(p,l),l=g.offp,x[0]^=g.key,g=Z(p,l),l=g.offp,x[1]^=g.key,x=ae(x,0,f,u),u[D]=x[0],u[D+1]=x[1]}function at(p,h,f,u,l){var x=tt.slice(),b=x.length,A;if(f<4||f>31)if(A=Error("Illegal number of rounds (4-31): "+f),u){n(u.bind(this,A));return}else throw A;if(h.length!==k)if(A=Error("Illegal salt length: "+h.length+" != "+k),u){n(u.bind(this,A));return}else throw A;f=1<<f>>>0;var g,D,I=0,C;Int32Array?(g=new Int32Array(Ge),D=new Int32Array(et)):(g=Ge.slice(),D=et.slice()),br(h,p,g,D);function P(){if(l&&l(I/f),I<f)for(var G=Date.now();I<f&&(I=I+1,rt(p,g,D),rt(h,g,D),!(Date.now()-G>re)););else{for(I=0;I<64;I++)for(C=0;C<b>>1;C++)ae(x,C<<1,g,D);var F=[];for(I=0;I<b;I++)F.push((x[I]>>24&255)>>>0),F.push((x[I]>>16&255)>>>0),F.push((x[I]>>8&255)>>>0),F.push((x[I]&255)>>>0);if(u){u(null,F);return}else return F}u&&n(P)}if(typeof u!="undefined")P();else for(var se;;)if(typeof(se=P())!="undefined")return se||[]}function ve(p,h,f,u){var l;if(typeof p!="string"||typeof h!="string")if(l=Error("Invalid string / salt: Not a string"),f){n(f.bind(this,l));return}else throw l;var x,b;if(h.charAt(0)!=="$"||h.charAt(1)!=="2")if(l=Error("Invalid salt version: "+h.substring(0,2)),f){n(f.bind(this,l));return}else throw l;if(h.charAt(2)==="$")x=String.fromCharCode(0),b=3;else{if(x=h.charAt(2),x!=="a"&&x!=="b"&&x!=="y"||h.charAt(3)!=="$")if(l=Error("Invalid salt revision: "+h.substring(2,4)),f){n(f.bind(this,l));return}else throw l;b=4}if(h.charAt(b+2)>"$")if(l=Error("Missing salt rounds"),f){n(f.bind(this,l));return}else throw l;var A=parseInt(h.substring(b,b+1),10)*10,g=parseInt(h.substring(b+1,b+2),10),D=A+g,I=h.substring(b+3,b+25);p+=x>="a"?"\0":"";var C=o(p),P=v(I,k);function se(G){var F=[];return F.push("$2"),x>="a"&&F.push(x),F.push("$"),D<10&&F.push("0"),F.push(D.toString()),F.push("$"),F.push(y(P,P.length)),F.push(y(G,tt.length*4-1)),F.join("")}if(typeof f=="undefined")return se(at(C,P,D));at(C,P,D,function(G,F){G?f(G,null):f(null,se(F))},u)}return t.encodeBase64=y,t.decodeBase64=v,t})})(Ot);var lt=Ot.exports,$t={get dev(){return!1},realm:"elitehcms",appDBID:"bp3gargfh",baseURL:"https://api.quickbase.com/v1",loginEndpoint:"https://elitehcms.quickbase.com/db/main?act=API_Authenticate",appToken:"cjibuvub93rvd2dbh4iksbeft4n4",refreshEndpoint:"https://api.quickbase.com/v1/auth/temporary",queryRecords:"https://api.quickbase.com/v1/records/query",insertRecords:"https://api.quickbase.com/v1/records",updateRecords:"https://api.quickbase.com/v1/records",runReport:"https://api.quickbase.com/v1/reports",storageUserKeyName:"clm_emp_user",storageUserTicketKeyName:"clm_emp_ticket",storageIPInfoKeyName:"clm_emp_ip",storagePermissionsKeyName:"clm_emp_permissions",storageAccessKeyName:"clm_emp_access",storageOfficeLocationKeyName:"clm_emp_office",storageEmployeeKeyName:"clm_emp_employee",storageCheckInKeyName:"clm_emp_checkin",storageJobBoardKeyName:"clm_emp_jobboard",cookieExpiration:"1d",officeExpiration:"6h",checkInExpiration:"5m",tokenExpiration:"4m 45s",userToken:"b3rntv_ng3q_0_b3f26wpbjxp4xdhqrxjmdpjmvus",commonParameters:{msInUTC:0,includeRids:1,fmt:"structured",options:"num-5000"},maxLoginAttempts:5,lastAttemptExpMinutes:5,loginAttemptMinutesBeforeLast:2,booleanFields:{br26nivmr:[21]}};class aa{formatName(t){if(typeof t!="string")return"";const r=t.trim().split(" ");if(r.length===1){if(t=t.toLowerCase(),t==="de"||t==="dela"||t==="del"||t==="las"||t==="y"||t==="la")return t;try{t=t.charAt(0).toUpperCase()+t.slice(1)}catch{t=t.charAt(0)+t.slice(1)}if(t.startsWith("Mc"))try{t=t.slice(0,2)+t.charAt(2).toUpperCase()+t.slice(3)}catch{t=t.slice(0,2)+t.charAt(2)+t.slice(3)}if(t.includes("'")){const a=t.indexOf("'");try{t=t.slice(0,a+1)+t.charAt(a+1).toUpperCase()+t.slice(a+2)}catch{t=t.slice(0,a+1)+t.charAt(a+1)+(t.slice(a+2)?t.slice(a+2):"")}}if(t.includes("-")){const a=t.indexOf("-");try{t=t.slice(0,a+1)+t.charAt(a+1).toUpperCase()+t.slice(a+2)}catch{t=t.slice(0,a+1)+t.charAt(a+1)+(t.slice(a+2)?t.slice(a+2):"")}}return t}else{for(let a=r.length-1;a>=0;a--)if(r[a]===""){r.splice(a);continue}else{try{r[a]=r[a].toLowerCase()}catch{return r[a]}if(r[a]==="de"||r[a]==="dela"||r[a]==="del"||r[a]==="la"||r[a]==="las"||r[a]==="y")if(a===0&&r[a]==="la"){try{r[a]=r[a].charAt(0).toUpperCase()+r[a].slice(1)}catch{r[a]=r[a].charAt(0)+r[a].slice(1)}continue}else continue;else{try{r[a]=r[a].charAt(0).toUpperCase()+r[a].slice(1)}catch{r[a]=r[a].charAt(0)+r[a].slice(1)}if(r[a].startsWith("Mc"))try{r[a]=r[a].slice(0,2)+r[a][2].toUpperCase()+r[a].slice(3)}catch{r[a]=r[a].slice(0,2)+r[a][2]+r[a].slice(3)}if(r[a].includes("'")){const s=r[a].indexOf("'");try{r[a]=r[a].slice(0,s+1)+r[a][s+1].toUpperCase()+(r[a].slice(s+2)?r[a].slice(s+2):"")}catch{r[a]=r[a].slice(0,s+1)+(r[a][s+1]?r[a][s+1]:"")+(r[a].slice(s+2)?r[a].slice(s+2):"")}}if(r[a].includes("-")){const s=r[a].indexOf("-");try{r[a]=r[a].slice(0,s+1)+r[a][s+1].toUpperCase()+r[a].slice(s+2)}catch{r[a]=r[a].slice(0,s+1)+(r[a][s+1]?r[a][s+1]:"")+(r[a].slice(s+2)?r[a].slice(s+2):"")}}}}return r.join(" ")}}calculateDuration(t){return L.getDateDiff(t.end,t.start,t.unit)}formatPhone(t){const a=(""+t).replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return a?`(${a[1]}) ${a[2]}-${a[3]}`:null}async converter(t){let r;return t&&Array.isArray(t)?(r=[],t.forEach(a=>{const s=JSON.parse(a);r.push(s)})):r=JSON.parse(t),r}async decode(t){if(t){const r=document.createElement("div");return r.innerHTML=t,r.childNodes[0].nodeValue}else return""}}function sa(){return{helpers:new aa}}const{helpers:X}=sa();var Q={get dev(){return!1},get userType(){const e=window.location.href;return e.startsWith("https://elitehcms.quickbase.com/db/bpzpy6n3x?a=dbpage&pageID=23")?"Candidate Kiosk":e.startsWith("https://elitehcms.quickbase.com/db/bpzpy6n3x?a=dbpage&pageID=16")?"Candidate":e.startsWith("https://elitehcms.quickbase.com/db/bpzpy6n3x?a=dbpage&pageID=13")?"Project User":e.startsWith("https://elitehcms.quickbase.com/db/bpzpy6n3x?a=dbpage&pageID=24")?"QuickBase User":"Candidate"},get storageName(){return this.userType==="Candidate Kiosk"||this.userType==="Candidate"?"clm_emp_":this.userType==="Project User"?"clm_proj_":this.userType==="QuickBase User"?"clm_qb_":"clm_"},get storageUserKeyName(){return this.storageName+"user"},get storageUserTicketKeyName(){return this.storageName+"ticket"},get storageIPInfoKeyName(){return this.storageName+"ip"},get storagePermissionsKeyName(){return this.storageName+"permissions"},get storageAccessKeyName(){return this.storageName+"access"},get storageOfficeLocationKeyName(){return this.storageName+"office"},get storageEmployeeKeyName(){return this.storageName+"employee"},get storageCheckInKeyName(){return this.storageName+"checkin"},get storageJobBoardKeyName(){return this.storageName+"jobboard"}};const $=te("employee",{state:()=>({devEmployee:{3:46},employee:{},emergencyContacts:[],history:[],training:[{3:2,6:"Security Passport",7:1,8:"Identification Credentials",11:"",20:"IDs",21:1},{3:1,6:"TWIC Card",7:1,8:"Identification Credentials",11:"",20:"IDs",21:1}],jobBoardApplications:[]}),getters:{noTasks(){return!this.checkInActive&&this.employeeData.complete&&this.voluntaryFormsComplete&&!this.showInProcess&&!this.employeeData.needsTest},employeeActive(){return this.employeeData[408]==="Active"},checkInActive(){const{checkedIn:e,checkInData:t}=M();return this.showInProcess||this.employeeData[79]===6||t[36]?!1:!!(this.employeeData[408]==="Active"&&e)},voluntaryFormsSubmitted(){return this.employee[3]?{disability:this.employee.disability.length>0?this.employee.disability.sort((e,t)=>e[3]>t[3]?-1:1)[0]:null,affirmative:this.employee.affirmative.length>0?this.employee.affirmative.sort((e,t)=>e[3]>t[3]?-1:1)[0]:null,vets:this.employee.vets.length>0?this.employee.vets.filter(e=>e.selections.length>0).sort((e,t)=>e[3]>t[3]?-1:1)[0]:null}:null},voluntaryFormsComplete(){return!(!this.voluntaryFormsSubmitted||!this.voluntaryFormsSubmitted.disability||!this.voluntaryFormsSubmitted.affirmative||!this.voluntaryFormsSubmitted.vets)},applicationsSubmitted:e=>e.jobBoardApplications,showInProcess(){return this.employee[519]?this.employee[519]===1:!1},showEmployment(){return this.employee[408]?this.employee[408]==="Active":!1},employeeData:e=>e.employee,employeeAvailable(){return!!this.employee[3]},offerData(){return this.employee[1516]&&!Array.isArray(this.employee[1516].offer)?this.employee[1516].offer:null},processingData(){return this.employee[1516]&&!Array.isArray(this.employee[1516].processing)?this.employee[1516].processing:null},savedEmergencyContacts(){return this.emergencyContacts},savedHistory(){const e=[];return this.employee[513]&&this.employee[513].forEach(t=>{const r=t[12].includes("-")?t[12].split("-"):null,a=t[13].includes("-")?t[13].split("-"):null,s=r?L.buildDate({year:r[2],date:r[1],month:r[0]}):t[12],i=a?L.buildDate({year:a[2],date:a[1],month:a[0]}):t[13];t[12]=L.formatDate(s,"MM/DD/YYYY"),t[13]=L.formatDate(i,"MM/DD/YYYY"),Object.assign(t,{company:{value:t[6],label:t[7]}}),Object.assign(t,{craft:{value:t[15],label:t[16]}}),e.push(t)}),e},savedTraining(){return this.training},getEmployee:e=>e.employee,socialRequired:e=>e.employee[3]?e.employee[109]===""||!e.employee[109]:!1},actions:{async updateEmployeeData({fields:e}){if(!e)throw"No Fields Provided";e[3]===void 0&&Object.assign(e,{3:{value:this.employeeData[3]}});const{data:t}=await w.upsertRecordsXML({to:"bp3gb7ng2",fieldsToReturn:[500],data:[e],formatObject:500}),r=t[0][500];return this.setEmployee(r,!0),r},setEmployee(e,t){const{setLangFields:r,setLevelStartTest:a,setCraft:s,setLang:i}=M();e[507]&&(this.emergencyContacts=e[507]),e.langFields&&e.lang&&r(e.langFields),e.lang&&i(e.lang),e.craft&&s(e.craft),e[53]&&a(e[53]),this.employee=e,t&&R.setItem(Q.storageEmployeeKeyName,e)},async removeContact(e){await w.upsertRecordsXML({to:"bruxz7dsh",data:[{3:{value:e},17:{value:!0},18:{value:new Date}}],fieldsToReturn:[3,14],formatObject:14}),this.employee[507]=this.employee[507].filter(t=>t[3]!==e)},async addContact(e){const{data:t}=await w.upsertRecordsXML({to:"bruxz7dsh",data:[{6:{value:e[6]},7:{value:e[7]},8:{value:e[16]},10:{value:this.employee[3]},11:{value:e[11]}}],fieldsToReturn:[3,14],formatObject:14});if(!t.length>0)throw"Cannot save contact";e=t[0][14],this.employee[507].push(e)},async updateContact(e){const{data:t}=await w.upsertRecordsXML({to:"bruxz7dsh",data:[{3:{value:e[3]},6:{value:e[6]},7:{value:e[7]},8:{value:e[16]},11:{value:e[11]}}],fieldsToReturn:[3,14],formatObject:14});this.employee[507].forEach((r,a)=>{r[3]===e[3]&&(this.employee[507][a]=t[0][14])})},async addHistory(e){const t={6:{value:e.company.value},10:{value:e[10]},11:{value:e[11]},12:{value:e[12]},13:{value:e[13]},15:{value:e.craft.value},34:{value:this.employeeData[3]}};this.employeeData[234]>0&&Object.assign(t,{8:{value:this.employeeData[234]}});const{data:r}=await w.upsertRecordsXML({to:"bpzpy6pj7",data:[t],fieldsToReturn:[3]});if(!r.length>0)throw"Cannot save experience";e[3]=r[0][3],e[12]=L.formatDate(L.addToDate(e[12],{days:1}),"MM/DD/YYYY"),e[13]=L.formatDate(L.addToDate(e[13],{days:1}),"MM/DD/YYYY"),this.employee[513]&&Array.isArray(this.employee[513])?this.employee[513].push(e):this.employee[513]=[e]},async updateHistory(e){const{data:t}=await w.upsertRecordsXML({to:"bpzpy6pj7",data:[{3:{value:e[3]},6:{value:e.company.value},10:{value:e[10]},11:{value:e[11]},12:{value:e[12]},13:{value:e[13]},15:{value:e.craft.value},34:{value:this.employeeData[3]}}],fieldsToReturn:[3]});if(!t.length>0)throw"Cannot save history";e[12]=L.formatDate(L.addToDate(e[12],{days:1}),"MM/DD/YYYY"),e[13]=L.formatDate(L.addToDate(e[13],{days:1}),"MM/DD/YYYY"),this.employee[513].forEach((r,a)=>{r[3]===e[3]&&(this.employee[513][a]=e)})},async removeHistory(e){const{data:t}=await w.upsertRecordsXML({to:"bpzpy6pj7",data:[{3:{value:e},32:{value:!0},33:{value:new Date}}],fieldsToReturn:[3]});if(!t.length>0)throw"Cannot save history";this.employee[513]=this.employee[513].filter(r=>r[3]!==t[0][3])},addTraining(e){this.training.push(e)},updateTraining(e){this.training.forEach((t,r)=>{t[3]===e[3]&&(this.training[r]=e)})},removeTraining(e){this.training=this.training.filter(t=>t[3]!==e)},async applyOnBoard(e){const{data:t}=await w.upsertRecordsXML({to:"bsfq6uktu",data:[{6:{value:this.employeeData[3]},8:{value:e[56]},10:{value:e[3]},12:{value:e[61]}}],fieldsToReturn:[19],formatObject:19});if(t[0])return this.employee[537].push(t[0][19]),t;throw"Cannot apply"},async acceptDeployment(e){const{data:t}=await w.upsertRecordsXML({to:"bsf2qqd63",data:[{8:{value:this.employeeData[3]},9:{value:e},6:{value:new Date},7:{value:"accept"}}],fieldsToReturn:[11],formatObject:11});if(t[0])return this.employee[1516].processing=t[0][11],t;throw"Cannot accept"},updateEmployeeFromApp({action:e,values:t,key:r}){e==="push"?this.employee[r]===void 0?Object.assign(this.employee,{[r]:t}):this.employee[r].push(t):e==="replace"&&(this.employee[r]===void 0?Object.assign(this.employee,{[r]:t}):this.employee[r]=t)}}}),$e=te("boardAppStore",{state:()=>({boardApp:{},requestJobs:null,requestedTimestamp:null}),getters:{getBoardApp:e=>e.boardApp,profileData(){const{profileData:e}=z();return e},jobsForBoard(){if(this.requestJobs){const{employeeData:e}=$(),t=this.requestJobs;return e[3]||(t.forEach(r=>{Object.assign(r,{recommended:r[68]===e[53]&&r[69]===e[51]});const a=e[537].find(s=>s[10]===r[3]);a!==void 0&&Object.assign(r,{applied:!0,appliedOn:a[1].$d!==void 0?L.formatDate(a[1].$d,"MM-DD-YYYY"):a[1].date})}),t.sort((r,a)=>r.recommended===a.recommended?a[1].isAfter(r[1]):r.recommended?-1:1)),t}else return[]},timeRequested(){return this.requestedTimestamp}},actions:{async getRequestJobs(){const e=[{14:{value:224},9:{value:1},8:{value:"{'17'.EX.'Open'}AND{'182'.EX.'false'}AND{'175'.EX.'true'}"},7:{value:"Table Query"},6:{value:"bpzpyqcu4"}}],{data:t}=await w.fetchFromProjectsApp({fields:e});if(t.length>0)return this.setRequestJobs(t,!0),this.requestedTimestamp=S(),t;throw"No jobs"},async applyOnBoard({job:e}){const{employeeData:t}=$(),{data:r}=await w.upsertRecordsXML({to:"bsfq6uktu",data:[{6:{value:t[3]},8:{value:e[56]},10:{value:e[3]},12:{value:e[61]}}],fieldsToReturn:[19],formatObject:19});if(console.log(r),r[0])return r[0][19];throw"Cannot apply"},storeBoardApp(e){this.boardApp=e},setRequestJobs(e,t){const r=e.sort((a,s)=>s[1].isAfter(a[1]));this.requestJobs=r,t&&R.setItem(Q.storageJobBoardKeyName,r)}}}),z=te("profile",{state:()=>({profile:{6:{field:"Related Employee"},15:{field:"Related Hiring Center"},19:{field:"Related Job"},23:{field:"First"},24:{field:"Middle"},25:{field:"Last"},26:{field:"Suffix"},27:{field:"Phone"},28:{field:"Email"},32:{field:"Street1"},33:{field:"Street2"},34:{field:"City"},35:{field:"State"},36:{field:"Zip"},37:{field:"Country"},38:{field:"Preferred Name"},40:{field:"Related Craft"},42:{field:"Related Experience Option"},44:{field:"Related Employment Status"},46:{field:"Related Contact Method"},49:{field:"Related Kiosk Session"},67:{field:"Related Available Language"}},voluntaryForms:{affirmative:{6:{field:"Related Kiosk Profile"},12:{field:"Related Hiring Center"},16:{field:"Related Affirmative Option (Gender)"},18:{field:"Related Job"},20:{field:"Related Affirmative Option (Ethnicity)"},22:{field:"Related Affirmative Option (Race)"},25:{field:"Related Kiosk Session"},24:{field:"Completion Timestamp"}},veterans:{6:{field:"Related Kiosk Profile"},8:{field:"Related Veteran Status Form"},10:{field:"Related Hiring Center"},16:{field:"Initials"},18:{field:"Related Kiosk Session"},17:{field:"Completion Timestamp"}},disability:{6:{field:"Completion Timestamp"},7:{field:"Name Entered"},8:{field:"Date Entered"},9:{field:"Related Kiosk Profile"},10:{field:"Related Disability Form"},15:{field:"Related Disability Form Option"},17:{field:"Related Hiring Center"},19:{field:"Related Job"},21:{field:"Related Kiosk Session"}},children:{vets:{field:"Veteran Form Selections",value:[]}}},step:0,loading:!0,voluntaryLoading:!0,completed:!1,jobBoardApplication:{},vetsSelections:null,vetsForm:null}),getters:{personalInfoNeeded(){const{employeeData:e}=$();return!(e[3]&&e[20]!==""&&e[22]!==""&&e[41]!==""&&e[43]!==""&&e[44]!==""&&e[45]!==""&&e[46]!=="")},onJobBoard(){const{getBoardApp:e}=$e();return!(!e[3]||e[3]===void 0)},profileData:e=>e.profile,profileComplete:e=>e.completed,loadingState:e=>e.loading,voluntaryLoadingState:e=>e.voluntaryLoading,proceedToTest(){const{onKiosk:e,testForCraft:t}=M(),{employeeData:r}=$();return r.needsTest&&r.needsTest?e&&t.available:!1},selectedPreferencesOnProfile(){return{craft:this.profile[40],language:this.profile[67]}},experienceLevelOnProfile(){return this.profile[42].value?this.profile[42].value:null},submitProfileData(){const{employeeData:e}=$(),{hiringCenterData:t}=M(),r={},a=[3];for(const[s,i]of Object.entries(this.profile))i.value!==void 0&&i.value!==null&&(Object.assign(r,{[s]:{value:i.value}}),a.push(parseInt(s)));return r[6]===void 0?(Object.assign(r,{6:{value:e[3]}}),a.push(6)):r[6].value=e[3],r[15]===void 0?(Object.assign(r,{15:{value:t?t[3]:""}}),a.push(15)):r[15].value=t?t[3]:"",r[77]&&delete r[77],a.push(77),{to:"bp3gci48x",data:[r],fieldsToReturn:a}},submitDisabilityData(){const{employeeData:e}=$(),{hiringCenterData:t}=M(),r={},a=[];for(const[s,i]of Object.entries(this.voluntaryForms.disability))i.value!==void 0&&i.value!==null&&(Object.assign(r,{[s]:{value:i.value}}),a.push(parseInt(s)));return r[17]===void 0?(Object.assign(r,{17:{value:t?t[3]:""}}),a.push(17)):r[17].value=t?t[3]:"",this.onJobBoard?r[24]===void 0?(Object.assign(r,{24:{value:this.jobBoardApplication[3]?this.jobBoardApplication[3]:""}}),a.push(24)):r[24].value=this.jobBoardApplication[3]?this.jobBoardApplication[3]:"":r[9]===void 0?(Object.assign(r,{9:{value:this.profile[3]?this.profile[3].value:""}}),a.push(9)):r[9].value=this.profile[3]?this.profile[3].value:"",r[22]===void 0?(Object.assign(r,{22:{value:e[3]?e[3]:""}}),a.push(22)):r[22].value=e[3]?e[3]:"",{to:"bqaiuve9q",data:[r],fieldsToReturn:a}},submitAffirmativeData(){const{employeeData:e}=$(),{hiringCenterData:t}=M(),r={},a=[];for(const[s,i]of Object.entries(this.voluntaryForms.affirmative))i.value!==void 0&&i.value!==null&&(Object.assign(r,{[s]:{value:i.value}}),a.push(parseInt(s)));return r[12]===void 0?(Object.assign(r,{12:{value:t?t[3]:""}}),a.push(12)):r[12].value=t?t[3]:"",this.onJobBoard?r[38]===void 0?(Object.assign(r,{38:{value:this.jobBoardApplication[3]?this.jobBoardApplication[3]:""}}),a.push(38)):r[38].value=this.jobBoardApplication[3]?this.jobBoardApplication[3]:"":r[6]===void 0?(Object.assign(r,{6:{value:this.profile[3]?this.profile[3].value:""}}),a.push(6)):r[6].value=this.profile[3]?this.profile[3].value:"",r[35]===void 0?(Object.assign(r,{35:{value:e[3]?e[3]:""}}),a.push(35)):r[35].value=e[3]?e[3]:"",a.push(33),a.push(17),{to:"bp3gcmump",data:[r],fieldsToReturn:a}},submitVeteransData(){const{employeeData:e}=$(),{hiringCenterData:t}=M(),r={},a=[];if(this.vetsForm){for(const[s,i]of Object.entries(this.voluntaryForms.veterans))i.value!==void 0&&i.value!==null&&(Object.assign(r,{[s]:{value:i.value}}),a.push(parseInt(s)));return r[10]===void 0?(Object.assign(r,{10:{value:t?t[3]:""}}),a.push(10)):r[10].value=t?t[3]:"",this.onJobBoard?r[20]===void 0?(Object.assign(r,{20:{value:this.jobBoardApplication[3]?this.jobBoardApplication[3]:""}}),a.push(20)):r[20].value=this.jobBoardApplication[3]?this.jobBoardApplication[3]:"":r[6]===void 0?(Object.assign(r,{6:{value:this.profile[3]?this.profile[3].value:""}}),a.push(6)):r[6].value=this.profile[3]?this.profile[3].value:"",r[19]===void 0?(Object.assign(r,{19:{value:e[3]?e[3]:""}}),a.push(19)):r[19].value=e[3]?e[3]:"",a.includes(3)||a.push(3),{to:"bqamq3kr4",data:[r],fieldsToReturn:a}}else return{}},vetsFormSelections(){const e=this.vetsSelections?this.vetsSelections:[],t=[];return e.length>0&&e.forEach(r=>{const a={};for(const[s,i]of Object.entries(r))i.value!==void 0&&i.value!==null&&Object.assign(a,{[s]:{value:i.value}});a[6]===void 0?Object.assign(a,{6:{value:this.voluntaryForms.veterans[3]?this.voluntaryForms.veterans[3].value:""}}):a[6].value=this.voluntaryForms.veterans[3]?this.voluntaryForms.veterans[3].value:"",this.onJobBoard||(a[10]===void 0?Object.assign(a,{10:{value:this.profile[19]?this.profile[19].value:""}}):a[10].value=this.profile[19]?this.profile[19].value:""),t.push(a)}),{to:"bqamrfpj9",data:t,fieldsToReturn:[1,2,3,8,9]}}},actions:{async submitProfileToQB(){const{updateEmployeeData:e}=$(),{hiringCenterData:t,testForCraft:r,onKiosk:a}=M();if(this.onJobBoard)return(await e({fields:{16:{value:t[3]},20:{value:this.profile[23].value===void 0?"":this.profile[23].value},21:{value:this.profile[24].value===void 0?"":this.profile[24].value},22:{value:this.profile[25].value===void 0?"":this.profile[25].value},23:{value:this.profile[26].value===void 0?"":this.profile[26].value},41:{value:this.profile[32].value===void 0?"":this.profile[32].value},42:{value:this.profile[33].value===void 0?"":this.profile[33].value},43:{value:this.profile[34].value===void 0?"":this.profile[34].value},44:{value:this.profile[35].value===void 0?"":this.profile[35].value},45:{value:this.profile[36].value===void 0?"":this.profile[36].value},46:{value:this.profile[37].value===void 0?"":this.profile[37].value},51:{value:this.profile[40].value===void 0?"":this.profile[40].value},53:{value:this.profile[42].value===void 0?"":this.profile[42].value},55:{value:this.profile[44].value===void 0?"":this.profile[44].value},57:{value:this.profile[46].value===void 0?"":this.profile[46].value}}})).needsTest&&r.available?(e({fields:{122:{value:7}}}),this.submitProfileData):this.submitProfileData;{const{data:s}=await w.upsertRecordsXML(this.submitProfileData);if(s[0]){const i=s[0];!this.profile[3]||this.profile[3].value===void 0?Object.assign(this.profile,{3:{value:s[0][3]}}):this.profile[3].value=s[0][3],!this.profile[77]||this.profile[77].value===void 0?Object.assign(this.profile,{77:{value:s[0][77]}}):this.profile[77].value=s[0][77];const n={16:{value:t[3]},20:{value:i[23]===void 0?"":i[23]},21:{value:i[24]===void 0?"":i[24]},22:{value:i[25]===void 0?"":i[25]},23:{value:i[26]===void 0?"":i[26]},41:{value:i[32]===void 0?"":i[32]},42:{value:i[33]===void 0?"":i[33]},43:{value:i[34]===void 0?"":i[34]},44:{value:i[35]===void 0?"":i[35]},45:{value:i[36]===void 0?"":i[36]},46:{value:i[37]===void 0?"":i[37]},51:{value:i[40]===void 0?"":i[40]},53:{value:i[42]===void 0?"":i[42]},55:{value:i[44]===void 0?"":i[44]},57:{value:i[46]===void 0?"":i[46]}},o=await e({fields:n});return o[119]!==void 0&&(this.profile[77].value=o[119]==="Yes"?"No":"Yes"),o.needsTest&&r.available&&!a?(e({fields:{122:{value:7}}}),this.submitProfileData):this.submitProfileData}else throw"Something went wrong"}},async submitDisabilityToQB(){const{updateEmployeeFromApp:e}=$(),{data:t}=await w.upsertRecordsXML(this.submitDisabilityData);if(t[0])Object.assign(this.voluntaryForms.disability,{3:{value:t[0][3]}}),e({action:"push",values:this.voluntaryForms.disability,key:"disability"});else throw"Something went wrong";return this.submitDisabilityData},async submitAffirmativeToQB(){const{updateEmployeeData:e}=$(),{data:t}=await w.upsertRecordsXML(this.submitAffirmativeData);if(t[0]){Object.assign(this.voluntaryForms.affirmative,{3:{value:t[0][3]}});const r={406:{value:t[0][33]},380:{value:t[0][17]}};e({fields:r})}else throw"Something went wrong";return this.submitAffirmativeData},async submitVeteransToQB(){const{updateEmployeeFromApp:e}=$(),{data:t}=await w.upsertRecordsXML(this.submitVeteransData);if(t[0]){console.log(t),this.voluntaryForms.veterans[3]===void 0?Object.assign(this.voluntaryForms.veterans,{3:{value:t[0][3]}}):this.voluntaryForms.veterans[3].value=t[0][3],console.log(this.vetsFormSelections),console.log(this.vetsSelections);const r=await w.upsertRecordsXML(this.vetsFormSelections);if(console.log(r),r.data.length>0)return Object.assign(this.voluntaryForms.veterans,{selections:t}),e({action:"push",values:this.voluntaryForms.veterans,key:"vets"}),!0;throw"Cannot save vets form selections"}else throw"Cannot save veterans"},async updateProfile(e){if(this.completed=e.completed===void 0?!1:e.completed,this.step=e.next?e.next:0,e.values&&Object.entries(e.values).length>0)for(const[t,r]of Object.entries(e.values))r&&(this.profile[t]!==void 0?(this.profile[t].value=r.value?r.value:r||"",this.profile[t].label=r.label?r.label:""):Object.assign(this.profile,{[t]:{value:!r.value||r.value===void 0?!r||r===void 0?"":r:r.value,label:!r.label||r.label===void 0?"":r.label}}));return this.submitProfileData},async updateVoluntaryForm(e){this.step=e.next?e.next:0;const t=this.voluntaryForms[e.type];if(e.values&&Object.entries(e.values).length>0){for(const[r,a]of Object.entries(e.values))t[r]!==void 0?Array.isArray(t[r].value)?a.value&&Array.isArray(a.value)?a.value.forEach(s=>{t[r].value.push(s)}):a&&Array.isArray(a)?a.forEach(s=>{t[r].value.push(s)}):t[r].value.push(a.value?a.value:a||""):(t[r].value=a.value?a.value:a||"",t[r].label=a.label?a.label:""):Object.assign(t,{[r]:{value:a.value?a.value:a||"",label:a.label?a.label:""}});return!0}else throw"Missing data"},async updateVetsForm({next:e,values:t,selections:r}){return this.step=e||0,this.vetsForm=t,this.vetsSelections=r,!0},async updateVetsSelections(e){this.vetsSelections=e},updateStep(e){this.step=e},dataLoaded(e){this.loading=e===void 0?!1:e},voluntaryDataLoaded(){this.voluntaryLoading=!1},toggleLoader(e){this.loading=e}}}),ut="formOptions",ft="voluntaryFormData",dt="toolsOptions",ht="evergreenJobs",M=te("app",{state:()=>({hiringCenter:{3:{field:"Record ID#"},8:{field:"Hiring Center Name"},24:{field:"Hiring Center Address"},35:{field:"Navbar Text"},39:{field:"Main Phone Number"},57:{field:"Google Analytics"},60:{field:"HC Name Shorthand"},321:{field:"Bypass Craft Test on Kiosk"},335:{field:"Tracker URL"}},accessType:"public",checkIn:!0,formOptions:{crafts:[],experience:[],companies:[],credentials:[],relationships:[],employment:[],contactMethods:[]},voluntaryFormOptions:{affirmative:[],veterans:[],disability:{pages:[],options:[]}},availableToolChecklists:[],evergreenJobs:null,checkInData:{},hiringCenterRaw:null,kioskAccount:null,lang:null,craft:null,langFields:null,levelStartTest:null}),getters:{fieldLabels:e=>e.langFields,kioskSetup(){return this.hiringCenterRaw?this.hiringCenterRaw.kiosk:null},hiringCenterData:e=>e.hiringCenterRaw?e.hiringCenterRaw:null,evergreenJobOptions(){return this.evergreenJobs?this.evergreenJobs:[]},startLevelForTest:e=>e.levelStartTest,kioskSetupLoaded(){return this.kioskSetup!==null},testForCraft(){let e={};if(this.kioskSetup&&this.kioskSetup.tests!==void 0){const t=this.kioskSetup.tests.find(r=>r[15]===this.craft&&r[16]===this.lang);t!==void 0?(e=t,Object.assign(e,{available:!0})):Object.assign(e,{available:!1})}else Object.assign(e,{available:!1});return e},toolsForCraft(){if(this.testForCraft[3]){const e=this.availableToolChecklists.find(t=>t[6]===this.testForCraft[3]);return e!==void 0?e[11]:[]}else return[]},toolListInstructions(){if(this.testForCraft[3]){const e=this.availableToolChecklists.find(t=>t[6]===this.testForCraft[3]);return e!==void 0?e[13]:null}else return null},toolListName(){if(this.testForCraft[3]){const e=this.availableToolChecklists.find(t=>t[6]===this.testForCraft[3]);return e!==void 0?e[8]:null}else return null},toolsLoaded(){return this.availableToolChecklists.length>0},disabilityForm(){const e=this.kioskSetup?this.kioskSetup.voluntaryForms===void 0||this.kioskSetup.voluntaryForms.disability===void 0?void 0:this.kioskSetup.voluntaryForms.disability:void 0;return e!==void 0?(e.controlNumber=e[11],e.expiration=e[13],e.formId=e[12],e.rid=e[9],e.title=e[10],e.pages=this.voluntaryFormOptions.disability.pages,e):null},hasAffirmative(){return this.kioskSetup?this.kioskSetup.voluntaryForms===void 0||this.kioskSetup.voluntaryForms.affirmative===void 0?!1:this.kioskSetup.voluntaryForms.affirmative:!1},hasVets(){return this.kioskSetup?this.kioskSetup.voluntaryForms===void 0||this.kioskSetup.voluntaryForms.vets===void 0?!1:this.kioskSetup.voluntaryForms.vets:!1},goToVoluntary(){return!!(this.disabilityForm!==null||this.hasAffirmative||this.hasVets)},inHiringCenter:e=>e.checkInData[15]?e.checkInData[15]==="Waiting":!1,voluntaryFormOptionsLoaded(){const e=this.voluntaryFormOptions;return e.affirmative.length>0&&e.veterans.length>0&&e.disability.pages.length>0},formOptionsLoaded(){const e=this.formOptions;return e.crafts.length>0&&e.experience.length>0&&e.companies.length>0&&e.relationships.length>0&&e.employment.length>0&&e.contactMethods.length>0},credentialGroups(){const e=[];return this.formOptions.credentials.forEach(t=>{const r={value:t[7],label:t[8],acronym:t[20],number:t[21]};e.find(s=>s.value===r.value)||e.push(r)}),e.sort((t,r)=>t.number>r.number?1:t.number<r.number?-1:0)},compiledCredentials(){const e=[];return this.credentialGroups.forEach(t=>{const r=t.value;t.list=[],this.formOptions.credentials.forEach(a=>{a[7]===r&&t.list.push(a)}),e.push(t)}),e},experienceQuery(){return{from:"bp3xt42tm",where:"{'7'.EX.'Active'}",select:[3,6,14,15,21],sortBy:[{fieldId:14,order:"ASC"}]}},contactMethodQuery(){return{from:"bp34yjfw5",where:"{'7'.EX.'Active'}",select:[3,6],sortBy:[{fieldId:10,order:"ASC"}]}},employmentQuery(){return{from:"bp34xjy5y",where:"{'7'.EX.'Active'}",select:[3,6],sortBy:[{fieldId:3,order:"ASC"}]}},companiesQuery(){return{from:"bp2jqcmrx",where:"{'7'.EX.'Active'}AND{'8'.EX.'US'}",select:[3,6],sortBy:[{fieldId:14,order:"ASC"}]}},craftsQuery(){return{from:"bp2pcb379",where:"{'12'.EX.'Yes'}",select:[3,6],sortBy:[{fieldId:17,order:"ASC"}]}},credentialsQuery(){return{from:"bp2cdv2rd",select:[3,6,7,8,11,20,21],sortBy:[{fieldId:8,order:"ASC"},{fieldId:6,order:"ASC"}]}},relationshipQuery(){return{from:"brux2ptjd",select:[6,10],sortBy:[{fieldId:6,order:"ASC"}]}},voluntaryKioskForms(){return this.kioskSetup?this.kioskSetup.voluntaryForms:null},disabilityQuery(){const e=this.voluntaryKioskForms?this.voluntaryKioskForms.disability:void 0;return e===void 0?!1:{from:"bp96dpdmp",where:`{26.EX.${e.rid}}AND{'46'.EX.'Active'}`,select:[3,9,14,15,16,17,31,38,39,40,41,44,47,48,49,52,54,57,58],sortBy:[{fieldId:9,order:"ASC"}]}},affirmativeQuery(){return{from:"bqamkyebu",where:"{'7'.EX.'Active'}",select:[3,6,8,9,10,11,16],sortBy:[{fieldId:11,order:"ASC"}]}},veteransQuery(){return{from:"bqampwqag",where:"{'8'.EX.'Active'}",select:[3,6,7,9,10,11],sortBy:[{fieldId:11,order:"ASC"}],options:{skip:0}}},allToolsQuery(){return{from:"bqamh3rpi",where:"{'10'.EX.'Active'}",select:[3,6,7,8,11,13],sortBy:[{fieldId:6,order:"ASC"}]}},checkedIn:e=>e.checkInData[15]?e.checkInData[15]==="Waiting":!1,checkedInStatus:e=>e.checkInData[15]||null,userType(){return Q.userType},onKiosk(){return this.userType==="Candidate Kiosk"},rawHiringCenter:e=>e.hiringCenterRaw?e.hiringCenterRaw:null,getKioskAccount:e=>e.kioskAccount?e.kioskAccount:null},actions:{setEvergreenStorage(e){K.set(ht,e,{encrypt:!0,ttl:1728e5})},async getEvergreenStorage(){return K.getItem(ht,{decrypt:!0})},setToolOptions(e){K.set(dt,e,{encrypt:!0,ttl:1728e5})},async getToolsCookie(){return K.getItem(dt,{decrypt:!0})},setFormOptions(e){K.set(ut,e,{encrypt:!0,ttl:1728e5})},async getFormOptionsCookie(){return K.getItem(ut,{decrypt:!0})},setVolFormOptions(e){K.set(ft,e,{encrypt:!0,ttl:1728e5})},async getVolFormOptionsCookie(){return K.getItem(ft,{decrypt:!0})},async getVoluntaryFormOptions(){const{voluntaryDataLoaded:e}=z();if(this.voluntaryFormOptionsLoaded)return e(),!0;{const t=await this.getVolFormOptionsCookie();if(!t||!t.disability.pages||!t.disability.pages.length>0||!t.veterans.length>0||!t.affirmative.length>0){const r=await w.doQuery(this.affirmativeQuery),a=await w.doQuery(this.veteransQuery),s=this.disabilityQuery?await w.doQuery(this.disabilityQuery):{data:[]};return console.log(s.data),s.data.forEach(async i=>{i[57]=await X.converter(i[57]),i[58]=await X.converter(i[58])}),this.voluntaryFormOptions.disability.pages=s.data,a.data.forEach(i=>{i.value={value:i[3],label:i[6]},i.label=i[6],i.none=i[3]===6}),this.voluntaryFormOptions.veterans=a.data,r.data.forEach(i=>{i.value={value:i[3],label:i[6]},i.label=i[6]}),this.voluntaryFormOptions.affirmative=r.data,this.setVolFormOptions(this.voluntaryFormOptions),e(),!0}else t.affirmative.forEach(r=>{r.value={value:r[3],label:r[6]},r.label=r[6]}),t.veterans.forEach(r=>{r.value={value:r[3],label:r[6]},r.label=r[6],r.none=r[3]===6}),t.disability.pages.forEach(async r=>{r[57]=await X.converter(r[57]),r[58]=await X.converter(r[58])}),this.voluntaryFormOptions.affirmative=t.affirmative,this.voluntaryFormOptions.veterans=t.veterans,this.voluntaryFormOptions.disability.pages=t.disability.pages;return e(),!0}},async getFormOptions(){const{dataLoaded:e}=z();if(this.formOptionsLoaded)return e(),!0;{const t=await this.getFormOptionsCookie();if(t)return t.contactMethods.forEach(r=>{r.value=r[3],r.label=r[6]}),t.companies.forEach(r=>{r.value=r[3],r.label=r[6]}),t.experience.forEach(r=>{r.value=r[3],r.label=r[6]}),t.employment.forEach(r=>{r.value=r[3],r.label=r[6]}),this.formOptions=t,e(),!0;{const r=await w.doQuery(this.experienceQuery),a=await w.doQuery(this.contactMethodQuery),s=await w.doQuery(this.employmentQuery),i=await w.doQuery(this.companiesQuery);i.data.forEach(c=>{c.value=c[3],c.label=c[6]}),this.formOptions.companies=i.data;const n=await w.fetchFromStructureApp({fields:[{6:{value:"bp2pcb379"},7:{value:"Table Query"},8:{value:"{'12'.EX.'Yes'}"},9:{value:1},14:{value:59}}]});this.formOptions.crafts=n.data;const o=await w.fetchFromHiringApp({fields:[{6:{value:"brux2ptjd"},7:{value:"Table Query"},8:{value:"{'3'.GT.0}"},9:{value:1},14:{value:15}}]});return this.formOptions.relationships=o.data,a.data.forEach(c=>{c.value=c[3],c.label=c[6]}),this.formOptions.contactMethods=a.data,s.data.forEach(c=>{c.value=c[3],c.label=c[6]}),this.formOptions.employment=s.data,r.data.forEach(c=>{c.value=c[3],c.label=c[6]}),this.formOptions.experience=r.data,this.setFormOptions(this.formOptions),e(),!0}}},async getCraftTools(){if(this.toolsLoaded)return!0;{const e=await this.getToolsCookie();if(e)return this.availableToolChecklists=e,!0;try{const{data:t}=await w.fetchFromStructureApp({fields:[{6:{value:"bqamh3rpi"},7:{value:"Table Query"},8:{value:"{'10'.EX.'Active'}"},9:{value:1},14:{value:12}}]});if(t)return this.availableToolChecklists=t,!0;throw"There are no available tools"}catch(t){console.log(t);const{data:r}=await w.doQuery(this.allToolsQuery);if(r)return r.forEach(async a=>{a[11]=await X.converter(a[11]),a[11].forEach(s=>{s.checked=!1,s.value={value:s[7],label:s[8]}})}),this.availableToolChecklists=r,!0;throw"There are no available tools"}}},async getKioskSetup(){if(this.kioskSetupLoaded)return{data:this.testForCraft,loaded:!0};{const{data:e}=await w.doQuery({from:"bqamdi42a",where:`{'3'.EX.'${this.kioskSetup.id}'}`,select:[3,6,7,30,31,34,35]});if(!e[0])throw"No kiosk account found";const{selectedPreferencesOnProfile:t}=z(),r=t.craft.value,a=t.language.value;e[0][30]=await X.converter(e[0][30]),e[0][31]=await X.converter(e[0][31]),this.kioskSetup.data=e[0];const s=e[0][30].find(i=>i[15]===r&&i[16]===a);return s!==void 0?{data:s,loaded:!1}:{data:null,loaded:!1}}},setCheckInData(e){this.checkInData=e,R.setItem(Q.storageCheckInKeyName,e),this.checkInData.office!==void 0&&(this.hiringCenterRaw=this.checkInData.office)},async getEvergreenJobs(){const{dataLoaded:e}=z();if(this.evergreenJobs)return this.evergreenJobs;{e(!0);const t=await this.getEvergreenStorage();if(t)return this.evergreenJobs=t,e(),this.evergreenJobs;{const r=[{14:{value:94},9:{value:1},8:{value:"{'60'.EX.'Yes'}AND{'71'.XEX.'Pending'}"},7:{value:"Jobs"},6:{value:"bpzpqe2q5"}}],{data:a}=await w.fetchFromStructureApp({fields:r});if(a.length>0)return a.forEach(s=>{s.value=s[3],s.label=s[55]}),this.evergreenJobs=a,this.setEvergreenStorage(this.evergreenJobs),e(),this.evergreenJobs;throw"No jobs"}}},openWindow(e,t){(t.fullScreen===null||t.fullScreen===void 0)&&(t.fullScreen=!0),t.name==="Full Profile"&&!t.height&&(t.height=775),t.width=t.width?t.width:screen.availWidth&&t.fullScreen?screen.availWidth:1450,t.height=t.height?t.height:screen.availHeight&&t.fullScreen?screen.availHeight:700;const r=window.top.outerHeight/2+window.top.screenY-t.height/2,a=window.top.outerWidth/2+window.top.screenX-t.width/2,s=[`width=${t.width}`,`height=${t.height}`,"popup","fullscreen=yes"];t.fullScreen||s.push(`top=${r}, left=${a}`);const i=window.open(t.url,t.name,s.join(","));(i.outerWidth<screen.availWidth||i.outerHeight<screen.availHeight)&&t.fullScreen&&(i.moveTo(0,0),i.resizeTo(screen.availWidth,screen.availHeight))},async getHiringCenterData(e){if(this.hiringCenterRaw&&(this.hiringCenterRaw[3]===e||e===void 0))return this.hiringCenterRaw;if(!e||e===void 0){const t=this.onKiosk&&Q.dev?{data:{email:"ggianelloni@brandsafway.com"}}:await w.getNativeQuickbaseUser();if(t.data.email!==""){const r=[{6:{value:"bqamdnjvw"},7:{value:"Table Query"},8:{value:`{'11'.EX.'${t.data.email}'}AND{'6'.EX.'Active'}`},9:{value:1},14:{value:37}}],{data:a}=await w.fetchFromStructureApp({fields:r});if(a[0])return this.hiringCenterRaw=a[0],this.hiringCenter[3].value=a[0][3],this.hiringCenter[24].value=a[0][24],this.hiringCenter[321].value=a[0][321],this.hiringCenter[60].value=a[0][60],this.hiringCenter[8].value=a[0][8],a[0];throw"Cannot get Hiring Center"}else{if(this.onKiosk)throw"Not logged into QB";return"No hiring center yet"}}else{const t=[{9:{value:e},7:{value:"Hiring Center"}}],{data:r}=await w.fetchFromStructureApp({fields:t});if(console.log(r),r[3])return this.hiringCenterRaw=r,this.hiringCenter[3].value=r[3],this.hiringCenter[24].value=r[24],this.hiringCenter[321].value=r[321],this.hiringCenter[60].value=r[60],this.hiringCenter[8].value=r[8],r;throw"Cannot get Hiring Center"}},async addTaskToCheckin({task:e,reason:t,active:r}){const a={3:{value:this.checkInData[3]},10:{value:t},27:{value:e}};r&&Object.assign(a,{36:{value:!0}});const{data:s}=await w.upsertRecordsXML({to:"br26nivmr",data:[a],fieldsToReturn:[31],formatObject:31});if(s[0])return this.checkInData=s[0][31],this.checkInData;throw"Something went wrong"},setKioskAccount(e){this.kioskAccount=e,this.hiringCenterRaw=e[37],this.hiringCenter[3].value=e[37][3],this.hiringCenter[24].value=e[37][24],this.hiringCenter[321].value=e[37][321],this.hiringCenter[60].value=e[37][60],this.hiringCenter[8].value=e[37][8]},setLangFields(e){this.langFields=e},setLevelStartTest(e){this.levelStartTest=e},setCraft(e){this.craft=e},setLang(e){this.lang=e}}});function ia(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ne(){return(ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function _e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Rt=function(){function e(a,s){this.operator=a,this.value=s,Object.defineProperty(this,"t",{writable:!0})}var t,r;return e.prototype.addNote=function(a){this.t=this.t||[],this.t.push(a)},t=e,(r=[{key:"notes",get:function(){return this.t}}])&&ia(t.prototype,r),e}(),Ye=function(e){function t(){return e.apply(this,arguments)||this}return _e(t,e),t}(Rt),pe=function(e){function t(r,a){if(!Array.isArray(a))throw new Error('"'+r+'" operator expects to receive an array of conditions');return e.call(this,r,a)||this}return _e(t,e),t}(Ye),ce="__itself__",xe=function(e){function t(r,a,s){var i;return(i=e.call(this,r,s)||this).field=a,i}return _e(t,e),t}(Rt),Ft=new Ye("__null__",null),Re=Object.prototype.hasOwnProperty.call.bind(Object.prototype.hasOwnProperty);function na(e,t){return t instanceof pe&&t.operator===e}function Et(e,t){return t.length===1?t[0]:new pe(e,function r(a,s,i){for(var n=i||[],o=0,c=s.length;o<c;o++){var d=s[o];na(a,d)?r(a,d.value,n):n.push(d)}return n}(e,t))}var oa=function(e){return e},Mt=function(){return Object.create(null)},qt=Object.defineProperty(Mt(),"__@type@__",{value:"ignore value"});function ca(e,t,r){if(r===void 0&&(r=!1),!e||e&&e.constructor!==Object)return!1;for(var a in e)if(Re(e,a)&&Re(t,a)&&(!r||e[a]!==qt))return!0;return!1}function la(e){var t=[];for(var r in e)Re(e,r)&&e[r]!==qt&&t.push(r);return t}function Te(e,t){t!==Ft&&e.push(t)}var Nt=function(e){return Et("and",e)},Lt={compound:function(e,t,r){var a=(Array.isArray(t)?t:[t]).map(function(s){return r.parse(s)});return new pe(e.name,a)},field:function(e,t,r){return new xe(e.name,r.field,t)},document:function(e,t){return new Ye(e.name,t)}},jt=function(){function e(r,a){var s=this;a===void 0&&(a=Mt()),this.i=void 0,this.o=void 0,this.u=void 0,this.s=void 0,this.h=void 0,this.parse=this.parse.bind(this),this.s={operatorToConditionName:a.operatorToConditionName||oa,defaultOperatorName:a.defaultOperatorName||"eq",mergeFinalConditions:a.mergeFinalConditions||Nt},this.i=Object.keys(r).reduce(function(i,n){return i[n]=ne({name:s.s.operatorToConditionName(n)},r[n]),i},{}),this.o=ne({},a.fieldContext,{field:"",query:{},parse:this.parse,hasOperators:function(i){return ca(i,s.i,a.useIgnoreValue)}}),this.u=ne({},a.documentContext,{parse:this.parse,query:{}}),this.h=a.useIgnoreValue?la:Object.keys}var t=e.prototype;return t.setParse=function(r){this.parse=r,this.o.parse=r,this.u.parse=r},t.parseField=function(r,a,s,i){var n=this.i[a];if(!n)throw new Error('Unsupported operator "'+a+'"');if(n.type!=="field")throw new Error("Unexpected "+n.type+' operator "'+a+'" at field level');return this.o.field=r,this.o.query=i,this.parseInstruction(n,s,this.o)},t.parseInstruction=function(r,a,s){return typeof r.validate=="function"&&r.validate(r,a),(r.parse||Lt[r.type])(r,a,s)},t.parseFieldOperators=function(r,a){for(var s=[],i=this.h(a),n=0,o=i.length;n<o;n++){var c=i[n];if(!this.i[c])throw new Error('Field query for "'+r+'" may contain only operators or a plain object as a value');Te(s,this.parseField(r,c,a[c],a))}return s},t.parse=function(r){var a=[],s=this.h(r);this.u.query=r;for(var i=0,n=s.length;i<n;i++){var o=s[i],c=r[o],d=this.i[o];if(d){if(d.type!=="document"&&d.type!=="compound")throw new Error('Cannot use parsing instruction for operator "'+o+'" in "document" context as it is supposed to be used in  "'+d.type+'" context');Te(a,this.parseInstruction(d,c,this.u))}else this.o.hasOperators(c)?a.push.apply(a,this.parseFieldOperators(o,c)):Te(a,this.parseField(o,this.s.defaultOperatorName,c,r))}return this.s.mergeFinalConditions(a)},e}();function Ie(e,t){var r=e[t];if(typeof r!="function")throw new Error('Unable to interpret "'+t+'" condition. Did you forget to register interpreter for it?');return r}function ua(e){return e.operator}function fa(e,t){var r,a=t,s=a&&a.getInterpreterName||ua;switch(a?a.numberOfArguments:0){case 1:r=function(n){var o=s(n,a);return Ie(e,o)(n,i)};break;case 3:r=function(n,o,c){var d=s(n,a);return Ie(e,d)(n,o,c,i)};break;default:r=function(n,o){var c=s(n,a);return Ie(e,c)(n,o,i)}}var i=ne({},a,{interpret:r});return i.interpret}function da(e,t){return function(r){for(var a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];var n=e.apply(void 0,[r].concat(s)),o=t.bind(null,n);return o.ast=n,o}}jt.prototype.parseInstruction;function Ut(e,t){if(!Array.isArray(t))throw new Error('"'+e.name+'" expects value to be an array')}function Pt(e,t){if(Ut(e,t),!t.length)throw new Error('"'+e.name+'" expects to have at least one element in array')}var Qe=function(e){return function(t,r){if(typeof r!==e)throw new Error('"'+t.name+'" expects value to be a "'+e+'"')}},_t={type:"compound",validate:Pt,parse:function(e,t,r){var a=r.parse,s=t.map(function(i){return a(i)});return Et(e.name,s)}},ha=_t,pa={type:"compound",validate:Pt},xa={type:"field",validate:function(e,t){if(!(t&&(t instanceof RegExp||t.constructor===Object)))throw new Error('"'+e.name+'" expects to receive either regular expression or object of field operators')},parse:function(e,t,r){var a=t instanceof RegExp?new xe("regex",r.field,t):r.parse(t,r);return new pe(e.name,[a])}},Yt={type:"field",validate:function(e,t){if(!t||t.constructor!==Object)throw new Error('"'+e.name+'" expects to receive an object with nested query or field level operators')},parse:function(e,t,r){var a=r.parse,s=r.field,i=(0,r.hasOperators)(t)?a(t,{field:ce}):a(t);return new xe(e.name,s,i)}},Qt={type:"field",validate:Qe("number")},me={type:"field",validate:Ut},Bt=me,Xt=me,ma={type:"field",validate:function(e,t){if(!Array.isArray(t)||t.length!==2)throw new Error('"'+e.name+'" expects an array with 2 numeric elements')}},Ht={type:"field",validate:Qe("boolean")},Be={type:"field",validate:function(e,t){if(!(typeof t=="string"||typeof t=="number"||t instanceof Date))throw new Error('"'+e.name+'" expects value to be comparable (i.e., string, number or date)')}},be=Be,Kt=be,zt=be,Xe={type:"field"},Jt=Xe,Vt={type:"field",validate:function(e,t){if(!(t instanceof RegExp)&&typeof t!="string")throw new Error('"'+e.name+'" expects value to be a regular expression or a string that represents regular expression')},parse:function(e,t,r){var a=typeof t=="string"?new RegExp(t,r.query.$options||""):t;return new xe(e.name,r.field,a)}},Wt={type:"field",parse:function(){return Ft}},ba={type:"document",validate:Qe("function")},va=Object.freeze({__proto__:null,$and:_t,$or:ha,$nor:pa,$not:xa,$elemMatch:Yt,$size:Qt,$in:me,$nin:Bt,$all:Xt,$mod:ma,$exists:Ht,$gte:Be,$gt:be,$lt:Kt,$lte:zt,$eq:Xe,$ne:Jt,$regex:Vt,$options:Wt,$where:ba}),ya=function(e){var t,r;function a(s){return e.call(this,s,{defaultOperatorName:"$eq",operatorToConditionName:function(i){return i.slice(1)}})||this}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a.prototype.parse=function(s,i){return i&&i.field?Nt(this.parseFieldOperators(i.field,s)):e.prototype.parse.call(this,s)},a}(jt),Fe=va;function He(e,t,r){for(var a=0,s=e.length;a<s;a++)if(r(e[a],t)===0)return!0;return!1}function Ke(e,t){return Array.isArray(e)&&Number.isNaN(Number(t))}function pt(e,t,r){if(!Ke(e,t))return r(e,t);for(var a=[],s=0;s<e.length;s++){var i=r(e[s],t);i!==void 0&&(a=a.concat(i))}return a}function W(e){return function(t,r,a){var s=a.get(r,t.field);return Array.isArray(s)?s.some(function(i){return e(t,i,a)}):e(t,s,a)}}function ze(){return(ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var ga=function(e,t){return e[t]};function Zt(e,t,r){var a=t.lastIndexOf(".");return a===-1?[e,t]:[r(e,t.slice(0,a)),t.slice(a+1)]}function wa(e,t,r){if(r===void 0&&(r=ga),t===ce)return e;if(!e)throw new Error('Unable to get field "'+t+'" out of '+String(e)+".");return function(a,s,i){if(s.indexOf(".")===-1)return pt(a,s,i);for(var n=s.split("."),o=a,c=0,d=n.length;c<d;c++)if(!(o=pt(o,n[c],i))||typeof o!="object")return o;return o}(e,t,r)}function Gt(e,t){return e===t?0:e>t?1:-1}function er(e,t){return t===void 0&&(t={}),fa(e,ze({get:wa,compare:Gt},t))}var tr=function(e,t,r){var a=r.interpret;return e.value.some(function(s){return a(s,t)})},Aa=function(e,t,r){return!tr(e,t,r)},rr=function(e,t,r){var a=r.interpret;return e.value.every(function(s){return a(s,t)})},Da=function(e,t,r){return!(0,r.interpret)(e.value[0],t)},Je=function(e,t,r){var a=r.compare,s=(0,r.get)(t,e.field);return Array.isArray(s)&&!Array.isArray(e.value)?He(s,e.value,a):a(s,e.value)===0},ar=function(e,t,r){return!Je(e,t,r)},sr=W(function(e,t,r){var a=r.compare(t,e.value);return a===0||a===-1}),ir=W(function(e,t,r){return r.compare(t,e.value)===-1}),nr=W(function(e,t,r){return r.compare(t,e.value)===1}),or=W(function(e,t,r){var a=r.compare(t,e.value);return a===0||a===1}),cr=function(e,t,r){var a=r.get;if(e.field===ce)return t!==void 0;var s=Zt(t,e.field,a),i=s[0],n=s[1],o=function(c){return!!c&&c.hasOwnProperty(n)===e.value};return Ke(i,n)?i.some(o):o(i)},Ta=W(function(e,t){return typeof t=="number"&&t%e.value[0]===e.value[1]}),lr=function(e,t,r){var a=r.get,s=Zt(t,e.field,a),i=s[0],n=s[1],o=function(c){var d=a(c,n);return Array.isArray(d)&&d.length===e.value};return e.field!==ce&&Ke(i,n)?i.some(o):o(i)},ur=W(function(e,t){return typeof t=="string"&&e.value.test(t)}),he=W(function(e,t,r){var a=r.compare;return He(e.value,t,a)}),fr=function(e,t,r){return!he(e,t,r)},dr=function(e,t,r){var a=r.compare,s=(0,r.get)(t,e.field);return Array.isArray(s)&&e.value.every(function(i){return He(s,i,a)})},hr=function(e,t,r){var a=r.interpret,s=(0,r.get)(t,e.field);return Array.isArray(s)&&s.some(function(i){return a(e.value,i)})},Ia=function(e,t){return e.value.call(t)},Ve=ze({},Object.freeze({__proto__:null,or:tr,nor:Aa,and:rr,not:Da,eq:Je,ne:ar,lte:sr,lt:ir,gt:nr,gte:or,exists:cr,mod:Ta,size:lr,regex:ur,within:he,nin:fr,all:dr,elemMatch:hr,where:Ia}),{in:he});er(Ve);function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function xt(e){return e instanceof Date?e.getTime():e&&typeof e.toJSON=="function"?e.toJSON():e}var ka=function(e,t){return Gt(xt(e),xt(t))};function We(e,t,r){var a=new ya(e),s=er(t,oe({compare:ka},r));if(r&&r.forPrimitives){var i={field:ce},n=a.parse;a.setParse(function(o){return n(o,i)})}return da(a.parse,s)}We(Fe,Ve);We(["$and","$or"].reduce(function(e,t){return e[t]=oe({},e[t],{type:"field"}),e},oe({},Fe,{$nor:oe({},Fe.$nor,{type:"field",parse:Lt.compound})})),Ve,{forPrimitives:!0});function mt(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function pr(e,t,r){return t&&mt(e.prototype,t),r&&mt(e,r),e}function Ee(){return Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ee.apply(this,arguments)}function Ze(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Me(e,t)}function Me(e,t){return Me=Object.setPrototypeOf||function(a,s){return a.__proto__=s,a},Me(e,t)}function Ca(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qe(e){return Array.isArray(e)?e:[e]}var ee="__caslSubjectType__";function bs(e,t){if(t){if(!t.hasOwnProperty(ee))Object.defineProperty(t,ee,{value:e});else if(e!==t[ee])throw new Error("Trying to cast object to subject type "+e+" but previously it was casted to "+t[ee])}return t}var Ne=function(t){var r=typeof t;return r==="string"||r==="function"},xr=function(t){return t.modelName||t.name},Sa=function(t){return typeof t=="string"?t:xr(t)};function Oa(e){return e.hasOwnProperty(ee)?e[ee]:xr(e.constructor)}function bt(e,t,r){for(var a=r;a<t.length;a++)e.push(t[a])}function vt(e,t){if(!e||!e.length)return t||[];if(!t||!t.length)return e||[];for(var r=0,a=0,s=[];r<e.length&&a<t.length;)e[r].priority<t[a].priority?(s.push(e[r]),r++):(s.push(t[a]),a++);return bt(s,e,r),bt(s,t,a),s}function fe(e,t,r){var a=e.get(t);return a||(a=r(),e.set(t,a)),a}var $a=function(t){return t};function Ra(e,t){if(Array.isArray(e.fields)&&!e.fields.length)throw new Error("`rawRule.fields` cannot be an empty array. https://bit.ly/390miLa");if(e.fields&&!t.fieldMatcher)throw new Error('You need to pass "fieldMatcher" option in order to restrict access by fields');if(e.conditions&&!t.conditionsMatcher)throw new Error('You need to pass "conditionsMatcher" option in order to restrict access by conditions')}var Fa=function(){function e(r,a,s){s===void 0&&(s=0),Ra(r,a),this.action=a.resolveAction(r.action),this.subject=r.subject,this.inverted=!!r.inverted,this.conditions=r.conditions,this.reason=r.reason,this.fields=r.fields?qe(r.fields):void 0,this.priority=s,this.t=a}var t=e.prototype;return t.i=function(){return this.conditions&&!this.u&&(this.u=this.t.conditionsMatcher(this.conditions)),this.u},t.matchesConditions=function(a){if(!this.conditions)return!0;if(!a||Ne(a))return!this.inverted;var s=this.i();return s(a)},t.matchesField=function(a){return this.fields?a?(this.fields&&!this.o&&(this.o=this.t.fieldMatcher(this.fields)),this.o(a)):!this.inverted:!0},pr(e,[{key:"ast",get:function(){var a=this.i();return a?a.ast:void 0}}]),e}();function Ea(e,t){var r={value:e,prev:t,next:null};return t&&(t.next=r),r}function Ma(e){e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next),e.next=e.prev=null}var qa=function(t){return{value:t.value,prev:t.prev,next:t.next}},yt=function(){return{rules:[],merged:!1}},gt=function(){return new Map},Na=function(t,r){!t.h&&r.fields&&(t.h=!0)},La=function(){function e(r,a){r===void 0&&(r=[]),a===void 0&&(a={}),this.h=!1,this.v=new Map,this.l={conditionsMatcher:a.conditionsMatcher,fieldMatcher:a.fieldMatcher,resolveAction:a.resolveAction||$a},this.p=a.anyAction||"manage",this.g=a.anySubjectType||"all",this.A=a.detectSubjectType||Oa,this.$=r,this.j=this.m(r)}var t=e.prototype;return t.detectSubjectType=function(a){return Ne(a)?a:a?this.A(a):this.g},t.update=function(a){var s={rules:a,ability:this,target:this};return this.M("update",s),this.$=a,this.j=this.m(a),this.M("updated",s),this},t.m=function(a){for(var s=new Map,i=a.length-1;i>=0;i--){var n=a.length-i-1,o=new Fa(a[i],this.l,n),c=qe(o.action),d=qe(o.subject||this.g);Na(this,o);for(var m=0;m<d.length;m++)for(var y=fe(s,d[m],gt),v=0;v<c.length;v++)fe(y,c[v],yt).rules.push(o)}return s},t.possibleRulesFor=function(a,s){if(s===void 0&&(s=this.g),!Ne(s))throw new Error('"possibleRulesFor" accepts only subject types (i.e., string or class) as the 2nd parameter');var i=fe(this.j,s,gt),n=fe(i,a,yt);if(n.merged)return n.rules;var o=a!==this.p&&i.has(this.p)?i.get(this.p).rules:void 0,c=vt(n.rules,o);return s!==this.g&&(c=vt(c,this.possibleRulesFor(a,this.g))),n.rules=c,n.merged=!0,c},t.rulesFor=function(a,s,i){var n=this.possibleRulesFor(a,s);if(i&&typeof i!="string")throw new Error("The 3rd, `field` parameter is expected to be a string. See https://stalniy.github.io/casl/en/api/casl-ability#can-of-pure-ability for details");return this.h?n.filter(function(o){return o.matchesField(i)}):n},t.on=function(a,s){var i=this,n=this.v.get(a)||null,o=Ea(s,n);return this.v.set(a,o),function(){var c=i.v.get(a);!o.next&&!o.prev&&c===o?i.v.delete(a):o===c&&i.v.set(a,o.prev),Ma(o)}},t.M=function(a,s){for(var i=this.v.get(a)||null;i!==null;){var n=i.prev?qa(i.prev):null;i.value(s),i=n}},pr(e,[{key:"rules",get:function(){return this.$}}]),e}(),ja=function(e){Ze(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.can=function(){var s=this.relevantRuleFor.apply(this,arguments);return!!s&&!s.inverted},r.relevantRuleFor=function(s,i,n){for(var o=this.detectSubjectType(i),c=this.rulesFor(s,o,n),d=0,m=c.length;d<m;d++)if(c[d].matchesConditions(i))return c[d];return null},r.cannot=function(){return!this.can.apply(this,arguments)},t}(La),Ua={$eq:Xe,$ne:Jt,$lt:Kt,$lte:zt,$gt:be,$gte:Be,$in:me,$nin:Bt,$all:Xt,$size:Qt,$regex:Vt,$options:Wt,$elemMatch:Yt,$exists:Ht},Pa={eq:Je,ne:ar,lt:ir,lte:sr,gt:nr,gte:or,in:he,nin:fr,all:dr,size:lr,regex:ur,elemMatch:hr,exists:cr,and:rr},_a=We(Ua,Pa),Ya=/[-/\\^$+?.()|[\]{}]/g,Qa=/\.?\*+\.?/g,Ba=/\*+/,Xa=/\./g;function Ha(e,t,r){var a=r[0]==="*"||e[0]==="."&&e[e.length-1]==="."?"+":"*",s=e.indexOf("**")===-1?"[^.]":".",i=e.replace(Xa,"\\$&").replace(Ba,s+a);return t+e.length===r.length?"(?:"+i+")?":i}function Ka(e,t,r){return e==="."&&(r[t-1]==="*"||r[t+1]==="*")?e:"\\"+e}function za(e){var t=e.map(function(a){return a.replace(Ya,Ka).replace(Qa,Ha)}),r=t.length>1?"(?:"+t.join("|")+")":t[0];return new RegExp("^"+r+"$")}var Ja=function(t){var r;return function(a){return typeof r=="undefined"&&(r=t.every(function(s){return s.indexOf("*")===-1})?null:za(t)),r===null?t.indexOf(a)!==-1:r.test(a)}},Va=function(e){Ze(t,e);function t(r,a){return r===void 0&&(r=[]),a===void 0&&(a={}),e.call(this,r,Ee({conditionsMatcher:_a,fieldMatcher:Ja},a))||this}return t}(ja),Wa=function(t){return'Cannot execute "'+t.action+'" on "'+t.subjectType+'"'},mr=function(t){this.message=t};mr.prototype=Object.create(Error.prototype);var Za=function(e){Ze(t,e),t.setDefaultMessage=function(s){this._=typeof s=="string"?function(){return s}:s},t.from=function(s){return new this(s)};function t(a){var s;return s=e.call(this,"")||this,s.ability=a,typeof Error.captureStackTrace=="function"&&(s.name="ForbiddenError",Error.captureStackTrace(Ca(s),s.constructor)),s}var r=t.prototype;return r.setMessage=function(s){return this.message=s,this},r.throwUnlessCan=function(){var s,i=(s=this.ability).relevantRuleFor.apply(s,arguments);if(!(i&&!i.inverted)){this.action=arguments.length<=0?void 0:arguments[0],this.subject=arguments.length<=1?void 0:arguments[1],this.subjectType=Sa(this.ability.detectSubjectType(arguments.length<=1?void 0:arguments[1])),this.field=arguments.length<=2?void 0:arguments[2];var n=i?i.reason:"";throw this.message=this.message||n||this.constructor._(this),this}},t}(mr);Za._=Wa;Object.freeze({__proto__:null});var Le=[{action:"read",subject:"auth"},{action:"read",subject:"open"}];const Ga=new Va(Le);var ke=Ga;const ie=te("user",{state:()=>({user:{},access:[],permissions:[]}),getters:{getUser:e=>e.user,userData:e=>e.user,fullName:e=>`${e.user[35]}${e.user[36]!==""?` ${e.user[36]} `:" "}${e.user[37]}`,userLoggedIn:e=>!!e.user[3],userAccess:e=>e.access,employeeLinkRequired:e=>e.user[84]===!0&&(e.user[85]===!0||e.user[82]===!1||e.user[82]===!0&&e.user[80]===""),verifyRequired:e=>(e.user[32]==="Candidate"||e.user[32]==="Employee"||e.user[32]==="Project User")&&!e.user.verified,passwordRequired:e=>e.user[17]||e.user[7]==="",employeeLinked:e=>e.user[82],employeeProfileRID:e=>e.user[80],createEmployeeProfile:e=>e.user[85],userPermissions:e=>e.permissions,primaryOffice:e=>e.access.find(t=>t[15]===!0&&t[7]==="Office")||null,userOffices:e=>e.access.filter(t=>t[7]==="Office"),userProjects:e=>e.access.filter(t=>t[7]==="Project")},actions:{async updateUserData({fields:e}){if(!e)throw"No Fields Provided";e[3]===void 0&&Object.assign(e,{3:{value:this.userData[3]}});const{data:t}=await w.upsertRecordsXML({to:"br4pxrbs6",fieldsToReturn:[76],data:[e],formatObject:76}),r=t[0][76],a=Object.assign({},r);return delete a.access,delete a.permissions,this.setPermissions(r.permissions,!0),this.setAccess(r.access,!0),this.setUser(a,!0),this.setUser(r,!0),r},setUser(e,t){this.user=e,t&&R.setItem(Q.storageUserKeyName,e)},setPhoneNumberVerified(e){this.user[50]=e},setVerified(e){this.user.verified=e},setIdentityVerified(e){typeof e=="number"?this.user[80]=e:this.user[85]=e},setAccess(e,t){this.access=e,t&&R.setItem(Q.storageAccessKeyName,e)},setPermissions(e,t){for(let a=0;a<e.length;a++)if(e[a].conditions){if(e[a].conditions.deny&&!Array.isArray(e[a].conditions.deny)){let s=e[a].conditions.deny.split(",");s.forEach(i=>{i=i.trim()}),e[a].conditions.deny=s;continue}if(e[a].conditions.accept&&!Array.isArray(e[a].conditions.accept)){let s=e[a].conditions.accept.split(",");s.forEach(i=>{i=i.trim()}),e[a].conditions.accept=s;continue}}const r=e.concat(Le);ke.update(r),this.permissions=r,t&&R.setItem(Q.storagePermissionsKeyName,e)},addPermissions(e){if(!this.permissions.find(r=>r.subject===e[0].subject&&r.action===e[0].action)){const r=e.concat(this.permissions);ke.update(r),this.permissions=r,R.setItem(Q.storagePermissionsKeyName,e)}},async logout(){return await w.logout(),ke.update(Le)}}}),es=25,ts=te("assessment",{state:()=>({step:0,loading:!0,tools:[],testData:{allQuestions:[],selectedQuestions:[],completedQuestions:[],nextQuestions:null,testStatus:"In Progress",currentScope:0,loadIteration:0,qb:{testRecord:{3:{field:"Record ID#",value:24712},6:{field:"Related Kiosk Profile"},13:{field:"Related Hiring Center"},15:{field:"Related Employee"},17:{field:"Related Craft"},23:{field:"Related Available Language"},34:{field:"Test Completion Timestamp"},37:{field:"Test Status"},testQuestions:[{6:{field:"Related Test"},7:{field:"Related All Test Question"},11:{field:"Status"},questionResponse:[{6:{field:"Related Test Question"},8:{field:"Related Question Alternative"}}]}]}}},testId:null,qb:null,questions:[],answers:[],toolListId:null}),getters:{questionsLoaded(){return this.testData.allQuestions.length>0},nextQuestions(){return this.testData.nextQuestions?this.testData.nextQuestions:null},completedOnIteration(){return this.testData.completedQuestions.filter(e=>e.iteration===this.testData.loadIteration)},algo(){const e=this.testData.completedQuestions.filter(t=>t.selection[14]===1&&t.iteration===this.testData.loadIteration);return e!==void 0?e:[]},ratio(){return isNaN(this.algo.length/this.completedOnIteration.length)?0:(this.algo.length/this.completedOnIteration.length).toFixed(2)},nextScope(){return this.completedOnIteration.length>0?this.ratio>.6?this.testData.currentScope<6?this.testData.currentScope+1:this.testData.currentScope:this.ratio===.6?this.testData.currentScope:this.testData.currentScope>2?this.testData.currentScope-1:this.testData.currentScope:this.testData.currentScope},nextIteration(){return this.testData.loadIteration+1},timeToStop(){const e=this.testData.completedQuestions.filter(r=>r[23]>this.testData.currentScope).length,t=this.testData.completedQuestions.filter(r=>r[23]<this.testData.currentScope).length;return e>0&&t>0&&this.testData.completedQuestions.length>=es},toolChecklistData(){const{hiringCenter:e,testForCraft:t}=M(),{employeeData:r}=$(),a={6:{value:this.testId?this.testId:0},11:{value:e[3]?e[3].value:0},15:{value:r[3]?r[3]:0},20:{value:t[15]?t[15]:0},22:{value:t[16]?t[16]:0}};return{to:"bp3gcpk2w",data:[a],fieldsToReturn:[3]}},toolsData(){const e=[];return this.tools.length>0&&this.tools.forEach(t=>{const r={6:{value:this.toolListId?this.toolListId:0},7:{value:t.value}};e.push(r)}),{to:"bp928wac2",data:e,fieldsToReturn:[3]}}},actions:{async startAssessment(){const{profile:e}=z(),{hiringCenter:t,testForCraft:r}=M(),{employeeData:a,updateEmployeeData:s}=$(),i={13:{value:t[3].value},15:{value:a[3]},17:{value:r[15]},23:{value:r[16]},51:{value:r[3]}};e[3]!==void 0&&Object.assign(i,{6:{value:e[3].value}});const{data:n}=await w.upsertRecordsXML({to:"bp3gckirf",data:[i],fieldsToReturn:[3]});if(n[0])return this.testId=n[0][3],s({fields:{122:{value:8}}}),n[0];throw"Something went wrong"},async finishAssessment(){const{metadata:e}=await w.upsertRecordsXML({to:"bp3gckirf",data:[{3:{value:this.testId},34:{value:new Date},37:{value:"Complete"}}],mergeFieldId:3,fieldsToReturn:[3]});if(e.updatedRecordIds[0]){const{data:t}=await w.upsertRecordsXML({to:"bp9np6ckn",data:this.questions,fieldsToReturn:[3,7]});if(!t.length>0)throw"Cannot save questions";{const r=[];t.forEach(s=>{const i=this.answers.findIndex(n=>n.link===s[7]);if(i>-1){const n={6:{value:s[3]},8:{value:this.answers[i][8]}};r.push(n)}});const{metadata:a}=await w.upsertRecordsXML({to:"bp9np9vk7",data:r,fieldsToReturn:[3]});if(!a.createdRecordIds.length===this.answers.length)throw"Something went wrong";return{success:!0}}}else throw"Cannot finish assessment"},async startToolChecklist(){const{data:e}=await w.upsertRecordsXML(this.toolChecklistData);if(e[0])return this.toolListId=e[0][3],e[0];throw"Cannot start checklist"},async finishToolChecklist(){const{metadata:e}=await w.upsertRecordsXML({to:"bp3gcpk2w",data:[{3:{value:this.toolListId},18:{value:new Date},17:{value:"Complete"}}],mergeFieldId:3,fieldsToReturn:[3]});if(e.updatedRecordIds[0]){const{data:t}=await w.upsertRecordsXML(this.toolsData);if(t.length>0)return!0;throw"Cannot save tools"}else throw"Cannot finish tool checklist"},async submitToQB(){const{profile:e}=z(),{hiringCenter:t,testForCraft:r}=M(),{devEmployee:a}=$();this.testData.qb.testRecord[6].value=e[3].value,this.testData.qb.testRecord[13].value=t[3].value,this.testData.qb.testRecord[15].value=a[3],this.testData.qb.testRecord[17].value=r[15],this.testData.qb.testRecord[23].value=r[16],this.testData.qb.testRecord[34].value=Date.now(),this.testData.qb.testRecord[37].value="Complete";const s=[];return this.testData.completedQuestions.forEach(i=>{const n={6:{value:this.testData.qb.testRecord[3].value},7:{value:i[8]},11:{value:"Complete"},questionResponse:[{6:{value:0},8:{value:i.selection[3]}}]};s.push(n)}),this.testData.qb.testRecord.testQuestions=s,this.testData.qb.testRecord},async updateAssessment(e){return this.step=e.next,e.type==="tools"&&(this.tools=e.values),!0},updateStep(e){this.step=e},dataLoaded(){this.loading=!1},async getAllQuestions(){const{testForCraft:e}=M();if(this.questionsLoaded)return!0;if(e)try{const{data:t}=await w.fetchFromStructureApp({fields:[{6:{value:"bqamed7sr"},7:{value:"Table Query"},8:{value:`{'6'.EX.'${e[9]}'}`},9:{value:1},14:{value:17}}]});if(t)return t.forEach(async r=>{r[20]&&(r.hasImage=!0,r.imageData={src:r[22],alt:r[21]}),r[19].forEach(a=>{a.value=a[3],a.label=a[6]})}),this.testData.allQuestions=t,!0;throw"Something went wrong"}catch(t){console.log(t);const{data:r}=await w.doQuery({from:"bqamed7sr",where:`{'6'.EX.'${e[9]}'}`,select:[3,6,8,9,10,11,12,13,14,18,19,20,21,22,23,24],sortBy:[{fieldId:11,order:"ASC"}]});if(r)return r.forEach(async a=>{a[20]==="Yes"&&(a.hasImage=!0,a.imageData={src:a[22],alt:a[21]}),a[19]=await X.converter(a[19]),a[24]=await X.converter(a[24]),a[19].forEach(s=>{s.value=s[3],s.label=s[6]})}),this.testData.allQuestions=r,!0;throw"Something went wrong"}else throw"No test for craft"},async loadQuestionGroup(e,t){if(e!==void 0){const r=this.testData.allQuestions.filter(a=>a[23]===e);if(r.length>0)return r.length>5&&(r.length=5),r.forEach(a=>{a.response=null;const s=this.testData.allQuestions.findIndex(i=>i[3]===a[3]);s>-1&&this.testData.allQuestions.splice(s,1)}),this.testData.nextQuestions=r,this.testData.currentScope=e,this.testData.loadIteration=t,r;throw"There are no questions"}},async completeQuestion(e){const t=e.response,r=e[19].find(i=>i.value===t);if(r!==void 0)e.selection=r;else throw"No selection";e.iteration=this.testData.loadIteration,e.storedData={};const a={6:{value:this.testId},7:{value:e[8]},11:{value:"Complete"}};this.questions.push(a);const s={6:null,8:e.selection[3],link:e[8]};return this.answers.push(s),this.testData.completedQuestions.push(e),this.testData.nextQuestions=this.testData.nextQuestions.filter(i=>i[3]!==e[3]),{data:{nextQuestions:this.timeToStop?[]:this.testData.nextQuestions,scope:this.nextScope,iteration:this.nextIteration}}}}});class rs{constructor(t,r){E(this,"axiosIns",null);E(this,"config",B({},$t));E(this,"appConfig",Q);E(this,"isAlreadyFetchingAccessToken",{});E(this,"subscribers",[]);E(this,"rateLimit",null);E(this,"rateLimitRemaining",null);E(this,"rateLimitReset",null);E(this,"router",null);E(this,"loginAttempts",{invalidLogins:0,login:null,exp:null,currentTime:null});E(this,"appStore",null);E(this,"userStore",null);E(this,"employeeStore",null);E(this,"jobBoardStore",null);E(this,"profileStore",null);E(this,"assessmentStore",null);this.axiosIns=t,this.config=B(B({},this.config),r),this.axiosIns.interceptors.request.use(async a=>new Promise(s=>{const{url:i,data:n}=a;let o=null;if(i.includes("act=API_Authenticate")||i.includes("a=API_GetUserInfo")||i.includes("a=API_DoQuery")||i.includes("a=API_AddRecord")||i.includes("?a=API_EditRecord"))s(a);else if(i.includes("auth/temporary"))this.config.realm&&(a.headers["QB-Realm-Hostname"]=`${this.config.realm}.quickbase.com`),this.config.appToken&&(a.headers["QB-App-Token"]=this.config.appToken),a.headers["Request-Count"]?a.headers["Request-Count"]+=1:a.headers["Request-Count"]=1,s(a);else{if(this.config.realm&&(a.headers["QB-Realm-Hostname"]=`${this.config.realm}.quickbase.com`),this.config.appToken&&(a.headers["QB-App-Token"]=this.config.appToken),a.headers["Request-Count"]?a.headers["Request-Count"]+=1:a.headers["Request-Count"]=1,i==="https://api.quickbase.com/v1/records/query")o=n.from;else if(i==="https://api.quickbase.com/v1/records")o=n.to;else if(i.startsWith("https://api.quickbase.com/v1/reports")){const d=new URL(i);o=new URLSearchParams(d.search).get("tableId")}const c=this;if(!o){const d=JSON.parse(n);o=d.from?d.from:d.to}this.getToken(o).then(d=>{const m=d;if(m)a.headers.Authorization=m,s(a);else if(!c.isAlreadyFetchingAccessToken[`${o}`])c.isAlreadyFetchingAccessToken[`${o}`]=!0,c.refreshToken(o).then(y=>{const{data:v}=y;c.isAlreadyFetchingAccessToken[`${o}`]=!1,c.setToken(v.temporaryAuthorization,o).then(()=>{c.onAccessTokenFetched(v.temporaryAuthorization),a.headers.Authorization=`QB-TEMP-TOKEN ${v.temporaryAuthorization}`,s(a)})});else{const y=m;async function v(){c.getToken(o).then(T=>{const k=T;if(k===y){setTimeout(v,50);return}a.headers.Authorization=k,s(a)})}v()}})}}),a=>Promise.reject(a)),this.axiosIns.interceptors.response.use(a=>{if(a&&a.headers){const{headers:s}=a;this.rateLimit=s["x-ratelimit-limit"],this.rateLimitRemaining=s["x-ratelimit-remaining"],this.rateLimitReset=s["x-ratelimit-reset"]}return a},a=>new Promise((s,i)=>{const{config:n,response:o}=a;console.log(a);const{headers:c}=o;this.rateLimit=c["x-ratelimit-limit"],this.rateLimitRemaining=c["x-ratelimit-remaining"],this.rateLimitReset=c["x-ratelimit-reset"];const d=n,{url:m,data:y}=d;let v=this.config.appDBID;const T=y?JSON.parse(y):null;if(m==="https://api.quickbase.com/v1/records/query"?v=T.from:m==="https://api.quickbase.com/v1/records"&&(v=T.to),o&&o.status===401){const k=new Promise(N=>{this.addSubscriber(q=>{d.headers.Authorization=q,N(this.axiosIns(d))})});this.isAlreadyFetchingAccessToken[`${v}`]||(this.isAlreadyFetchingAccessToken[`${v}`]=!0,this.refreshToken(v).then(N=>{this.isAlreadyFetchingAccessToken[`${v}`]=!1,this.setToken(N.data.temporaryAuthorization,v),this.onAccessTokenFetched(N.data.temporaryAuthorization)})),s(k)}else if(o&&o.status===429){const k=this,N=new Promise(q=>{setTimeout(()=>{q(this.axiosIns(d))},k.rateLimitReset)});d.headers["Request-Count"]&&d.headers["Request-Count"]>4?i(a):s(N)}else if(o&&o.status===400){const{data:k}=o;if(k.description==="You are not currently signed into the realm.")window.close(),i(a);else if(k.description==="Required header 'Authorization' not specified"){this.isAlreadyFetchingAccessToken[`${v}`]||(this.isAlreadyFetchingAccessToken[`${v}`]=!0,this.refreshToken(v).then(q=>{this.isAlreadyFetchingAccessToken[`${v}`]=!1,this.setToken(q.data.temporaryAuthorization,v),this.onAccessTokenFetched(q.data.temporaryAuthorization)}));const N=new Promise(q=>{this.addSubscriber(re=>{d.headers.Authorization=re,q(this.axiosIns(d))})});s(N)}else if(k.description==="Invalid Authorization"){this.isAlreadyFetchingAccessToken[`${v}`]||(this.isAlreadyFetchingAccessToken[`${v}`]=!0,this.refreshToken(v).then(q=>{this.isAlreadyFetchingAccessToken[`${v}`]=!1,this.setToken(q.data.temporaryAuthorization,v),this.onAccessTokenFetched(q.data.temporaryAuthorization)}));const N=new Promise(q=>{this.addSubscriber(re=>{d.headers.Authorization=re,q(this.axiosIns(d))})});s(N)}}i(a)}))}onAccessTokenFetched(t){this.subscribers=this.subscribers.filter(r=>r(t))}addSubscriber(t){this.subscribers.push(t)}async getToken(t){return this.config.dev&&this.config.userToken?`QB-USER-TOKEN ${this.config.userToken}`:_.has(`${t}`)?`QB-TEMP-TOKEN ${_.get(`${t}`)}`:null}refreshToken(t){return this.axiosIns.get(`${this.config.refreshEndpoint}/${t}`,{withCredentials:!0})}async setToken(t,r){const a=r||this.config.appDBID;_.set(`${a}`,t,{expires:this.config.tokenExpiration,secure:!0,sameSite:"Strict"})}async setIpInfo(t){R.setItem(this.appConfig.storageIPInfoKeyName,t)}async getIpInfo(){return await R.getItem(this.appConfig.storageIPInfoKeyName)}setUserTicket(t){_.set(this.appConfig.storageUserTicketKeyName,t,{expires:this.config.cookieExpiration,secure:!0,sameSite:"Strict"})}getUserTicket(){return _.get(this.appConfig.storageUserTicketKeyName)}setOfficeLocation(t){this.addPermissions([{action:"read",subject:"apply"}]),_.set(this.appConfig.storageOfficeLocationKeyName,t,{expires:this.config.officeExpiration,secure:!0,sameSite:"Strict"})}setCheckIn(t){_.set(this.appConfig.storageCheckInKeyName,t,{expires:this.config.checkInExpiration,secure:!0,sameSite:"Strict"})}removeCheckIn(){_.remove(this.appConfig.storageCheckInKeyName,{secure:!0,sameSite:"Strict"})}getCheckIn(){return _.get(this.appConfig.storageCheckInKeyName)}getOfficeLocation(){return _.get(this.appConfig.storageOfficeLocationKeyName)}async setUserInfo(t,r){this.userStore.setUser(t,r)}async setUserAccess(t,r){this.userStore.setAccess(t,r)}async setUserPermissions(t,r){this.userStore.setPermissions(t,r)}async addPermissions(t){this.userStore.userLoggedIn}async getUserInfo(){return await R.getItem(this.appConfig.storageUserKeyName)}async getUserAccess(){return await R.getItem(this.appConfig.storageAccessKeyName)}async getUserPermissions(){return await R.getItem(this.appConfig.storagePermissionsKeyName)}async setEmployee(t,r){this.employeeStore.setEmployee(t,r)}async setJobBoard(t,r){this.jobBoardStore.setRequestJobs(t,r)}async setCheckInData(t){this.appStore.setCheckInData(t)}async getEmployeeFromStore(){return this.employeeStore.getEmployee}async getSocialRequired(){return this.employeeStore.socialRequired}async getUserFromStore(){return this.userStore.getUser}async getLoggedInFromStore(){return this.userStore.isLoggedIn}async verifyRequired(){return this.userStore.verifyRequired}async setPhoneNumberVerified(t){this.userStore.setPhoneNumberVerified(t)}async setVerified(t){this.userStore.setVerified(t)}async employeeLinkRequired(){return this.userStore.employeeLinkRequired}async setIdentityVerified(t){this.userStore.setIdentityVerified(t)}async isUserLoggedIn(){const t=this.getUserInfo(),r=this.getUserAccess(),a=this.getUserPermissions(),s=await t,i=await r,n=await a;return!!(s&&i&&n&&this.getUserTicket())}async reloadUserInfo(t){const r=await this.getUserInfo();return this.userStore=this.userStore||ie(),this.employeeStore=this.employeeStore||$(),t.reAuthenticate&&r?(await this.fetchAndSetUserData({phoneNumber:r[8],userType:r[32],rid:r[3]}),this.updateStore()):this.updateStore()}async updateUserData(t){const r=await this.getUserInfo();if(this.appStore=this.appStore||M(),r)return this.userStore=this.userStore||ie(),await this.userStore.updateUserData(t)}async updateEmployeeData(t){const r=await this.getUserInfo();if(this.appStore=this.appStore||M(),(this.appStore.userType==="Candidate"||this.appStore.userType==="Candidate Kiosk")&&r)return this.employeeStore=this.employeeStore||$(),await this.employeeStore.updateEmployeeData(t)}async updateStore(t){const r=await R.keys();for(let a=0;a<r.length;a++){if(r[a]===this.appConfig.storageUserKeyName){const s=await R.getItem(r[a]);Object.keys(s).forEach(i=>{if(typeof s[i]=="object"&&s[i]!==null&&Object.prototype.hasOwnProperty.call(s[i],"$d")){s[i]=S(s[i].$d);return}try{s[i].endsWith(".000Z")&&(s[i]=S(s[i]))}catch{}}),await this.setUserInfo(s,!1)}if(r[a]===this.appConfig.storageAccessKeyName){const s=await R.getItem(r[a]);for(let i=0;i<s.length;i++){const n=Object.keys(s[i]);for(let o=0;o<n.length;o++){typeof s[i][n[o]]=="object"&&s[i][n[o]]!==null&&Object.prototype.hasOwnProperty.call(s[i][n[o]],"$d")&&(s[i][n[o]]=S(s[i][n[o]].$d));try{s[i][n[o]].endsWith(".000Z")&&(s[i][n[o]]=S(s[i][n[o]]))}catch{}}}await this.setUserAccess(s,!1)}if(r[a]===this.appConfig.storagePermissionsKeyName){const s=await R.getItem(r[a]);for(let i=0;i<s.length;i++){const n=Object.keys(s[i]);for(let o=0;o<n.length;o++){typeof s[i][n[o]]=="object"&&s[i][n[o]]!==null&&Object.prototype.hasOwnProperty.call(s[i][n[o]],"$d")&&(s[i][n[o]]=S(s[i][n[o]].$d));try{s[i][n[o]].endsWith(".000Z")&&(s[i][n[o]]=S(s[i][n[o]]))}catch{}}}await this.setUserPermissions(s,!1)}if(r[a]===this.appConfig.storageEmployeeKeyName){const s=await R.getItem(r[a]);for(let i=0;i<s.length;i++){const n=Object.keys(s[i]);for(let o=0;o<n.length;o++){typeof s[i][n[o]]=="object"&&s[i][n[o]]!==null&&Object.prototype.hasOwnProperty.call(s[i][n[o]],"$d")&&(s[i][n[o]]=S(s[i][n[o]].$d));try{s[i][n[o]].endsWith(".000Z")&&(s[i][n[o]]=S(s[i][n[o]]))}catch{}}}await this.setEmployee(s,!1)}if(r[a]===this.appConfig.storageJobBoardKeyName){const s=await R.getItem(r[a]);for(let i=0;i<s.length;i++){const n=Object.keys(s[i]);for(let o=0;o<n.length;o++){typeof s[i][n[o]]=="object"&&s[i][n[o]]!==null&&Object.prototype.hasOwnProperty.call(s[i][n[o]],"$d")&&(s[i][n[o]]=S(s[i][n[o]].$d));try{s[i][n[o]].endsWith(".000Z")&&(s[i][n[o]]=S(s[i][n[o]]))}catch{}}}this.jobBoardStore=this.jobBoardStore||$e(),await this.setJobBoard(s,!1)}}return!0}async login(t){let r=null;t.redirectPath&&(r=t.redirectPath,delete t.redirectPath);const a=`{'10'.EX.'Active'}${t.email?`AND{'6'.EX.'${t.email}'}`:""}${t.phoneNumber?`AND{'8'.EX.'${t.phoneNumber}'}`:""}${t.userType?`AND{'32'.EX.'${t.userType}'}`:""}`,s=[{7:{value:"User Request"},8:{value:a},9:{value:1},14:{value:77}}],i=t.email?t.email:t.phoneNumber,n=S();if(this.loginAttempts.invalidLogins>=this.config.maxLoginAttempts&&i===this.loginAttempts.login)if(n.isBefore(this.loginAttempts.exp)){const m=n.to(this.loginAttempts.exp,!0);throw{response:{data:{errtext:"Too many failed Login Attempts",errdetail:`Please wait ${m} before attempting to try again.`}}}}else this.loginAttempts={invalidLogins:0,login:null,exp:null,currentTime:null};else this.loginAttempts.exp&&n.isAfter(this.loginAttempts.exp)&&(this.loginAttempts={invalidLogins:0,login:null,exp:null,currentTime:null});const{data:o}=await this.fetchFromStructureApp({fields:s}),c=[{6:i}];let d=await this.getIpInfo();if(d)c.push({8:d.ip}),c.push({9:d.loc}),c.push({10:d.uag}),c.push({11:d.colo});else{try{d=await this.fetchIpInfo()}catch{d=null}d&&(c.push({8:d.ip}),c.push({9:d.loc}),c.push({10:d.uag}),c.push({11:d.colo}))}if(o.length===1){const m=o[0];if(c.push({12:m[3]}),m[63]===!0&&n.isBefore(m[60])){this.loginAttempts={invalidLogins:m[59],login:i,exp:m[60],currentTime:null};const y=n.to(this.loginAttempts.exp,!0);throw{response:{data:{errtext:"Too many failed Login Attempts",errdetail:`Please wait ${y} before attempting to try again.`}}}}if(m[32]==="QuickBase User"){const y={qdbapi:{username:t.email,password:t.password,hours:t.hours||72}};if(!t.email)throw c.push({7:"Invalid Login"}),this.addLoginAttempt(c),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}};return this.axiosIns({method:"post",url:this.config.loginEndpoint,headers:{"QUICKBASE-ACTION":"API_Authenticate","Content-Type":"application/xml"},data:H(y),withCredentials:!0}).then(v=>{const T=J(new window.DOMParser().parseFromString(v.data,"text/xml"));if(T.email=t.email,T.errcode!==0)throw v.data=T,c.push({7:"Invalid Login"}),this.addLoginAttempt(c),{response:v};if(T.userid==="1.ckbs"||T.userid.startsWith("1."))throw v.data=T,c.push({7:"Invalid Login"}),this.addLoginAttempt(c),{response:v};return delete T.action,delete T.errcode,delete T.errtext,v.data=T,c.push({7:"Successful"}),this.addLoginAttempt(c),this.setUserTicket(v.data.ticket),this.fetchAndSetUserData(ge(B({},v.data),{redirect:!0,redirectPath:r,rid:m[3]}))}).catch(v=>{throw c.push({7:"Invalid Password"}),this.addLoginAttempt(c),v})}else if(m[32]==="Candidate"){if(await lt.compare(t.password,m[7]))return c.push({7:"Successful"}),this.addLoginAttempt(c),U(m[53])&&this.setUserTicket(m[53]),this.fetchAndSetUserData({redirect:!0,redirectPath:r,rid:m[3]});throw c.push({7:"Invalid Password"}),this.addLoginAttempt(c),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}}else if(m[32]==="Project User"){if(await lt.compare(t.password,m[7]))return c.push({7:"Successful"}),this.addLoginAttempt(c),U(m[53])&&this.setUserTicket(m[53]),this.fetchAndSetUserData({redirect:!0,redirectPath:r,rid:m[3]});throw c.push({7:"Invalid Password"}),this.addLoginAttempt(c),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}}else throw c.push({7:"Invalid Login"}),this.addLoginAttempt(c),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}}else throw c.push({7:"Invalid Login"}),this.addLoginAttempt(c),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}}async checkIfUserExist(t){const r=`{'10'.EX.'Active'}${t.email?`AND{'6'.EX.'${t.email}'}`:""}${t.phoneNumber?`AND{'8'.EX.'${t.phoneNumber}'}`:""}${t.userType?`AND{'32'.EX.'${t.userType}'}`:""}`,a=[{7:{value:"User Request"},8:{value:r},9:{value:1},14:{value:77}}],{data:s}=await this.fetchFromStructureApp({fields:a});return s.length>0}async fetchAndSetUserData(t){const r=`{'10'.EX.'Active'}${t.email?`AND{'6'.EX.'${t.email}'}`:""}${t.phoneNumber?`AND{'8'.EX.'${t.phoneNumber}'}`:""}${t.userType?`AND{'32'.EX.'${t.userType}'}`:""}`,a=[{7:{value:"User"},8:{value:r},9:{value:t.rid?t.rid:1},14:{value:76}}],{data:s}=await this.fetchFromStructureApp({fields:a});if(!s.user)throw{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}};const i=s.user,n=i.permissions||[],o=i.access||[];this.userStore=this.userStore||ie(),this.appStore=this.appStore||M();const c=this.getOfficeLocation(),d=this.getCheckIn();if(i[32]==="QuickBase User"||i[32]==="Candidate"&&(this.employeeStore=this.employeeStore||$(),this.userType=i[32],U(i[53])&&await this.setUserTicket(i[53])),i[82]===!0&&i[80]){const y=[{9:{value:i[80]},7:{value:"Employee"}}],{data:v}=await this.fetchFromHiringApp({fields:y});this.setEmployee(v.employee,!0)}if(i[100]===""){i[100]=we.global.locale.value;const y=[{3:{value:i[3]},26:{value:"now"},100:{value:we.global.locale.value}}];this.upsertRecordsXML({to:"br4pxrbs6",fieldsToReturn:[76],data:y,formatObject:76})}else we.global.locale.value=i[100];await this.setUserPermissions(n,!0),await this.setUserAccess(o,!0);const m=Object.assign({},i);if(delete m.access,delete m.permissions,await this.setUserInfo(m,!0),U(i[86])){const y=[{9:{value:i[86]},7:{value:"Self Check-In"}}],{data:v}=await this.fetchFromRecruitingApp({fields:y});v&&(v[13].isToday()&&v[15]==="Called"&&c&&d?this.checkInUser():v[13].isToday()?this.setCheckInData(v):c&&d?this.checkInUser():this.setCheckInData({}))}else c&&d&&this.checkInUser();return i}async nativeQuickbaseLogin(t){const r={qdbapi:{username:t.email,password:t.password,hours:t.hours||336}};return this.axiosIns({method:"post",url:this.config.loginEndpoint,headers:{"QUICKBASE-ACTION":"API_Authenticate","Content-Type":"application/xml"},data:H(r),withCredentials:!0}).then(a=>{const s=J(new window.DOMParser().parseFromString(a.data,"text/xml"));if(s.email=t.email,s.errcode!==0)throw a.data=s,{response:a};if(s.userid==="1.ckbs"||s.userid.startsWith("1."))throw a.data=s,{response:a};return a.data=s,a.data}).catch(a=>{throw a})}async checkInUser(t){t=t||{};const r=await this.getUserInfo(),a=this.getOfficeLocation(),s=await this.getIpInfo();if(this.userStore=this.userStore||ie(),this.appStore=this.appStore||M(),this.employeeStore=this.employeeStore||$(),!r||!a)return;if(this.appStore.checkedIn){console.log("already checked in",this.appStore.checkedIn),this.removeCheckIn();return}const i=[{6:{value:r[9]?r[9].phoneNumber:r[8].replace(/[^0-9]/g,"")},7:{value:r[35]},8:{value:r[37]},9:{value:a.rid},10:{value:t.reason?t.reason:"Applying"},11:{value:t.position?t.position:""},13:{value:"now"},16:{value:r[80]},21:{value:!0},24:{value:s?JSON.stringify(s):""}}];try{const{data:n}=await this.upsertRecordsXML({to:"br26nivmr",fieldsToReturn:[3,31],data:i,formatObject:31});this.removeCheckIn(),this.setCheckInData(n[0][31]);const o=[{3:{value:r[3]},26:{value:"now"},86:{value:n[0][3]}}],{data:c}=await this.upsertRecordsXML({to:"br4pxrbs6",fieldsToReturn:[76],data:o,formatObject:76}),d=c[0][76];if(this.userStore.userLoggedIn){const m=Object.assign({},d);delete m.access,delete m.permissions,this.setUserPermissions(d.permissions,!0),this.setUserAccess(d.access,!0),await this.setUserInfo(m,!0)}return d}catch(n){console.log(n)}}async deActivateAccount(t){const r=`{'10'.EX.'Active'}${t.email?`AND{'6'.EX.'${t.email}'}`:""}${t.phoneNumber?`AND{'8'.EX.'${t.phoneNumber}'}`:""}${t.userType?`AND{'32'.EX.'${t.userType}'}`:""}`,a=[{7:{value:"User Request"},8:{value:r},9:{value:1},14:{value:77}}],{data:s}=await this.fetchFromStructureApp({fields:a});if(s.length>0){const n=[{3:{value:s[0][3]},10:{value:"Inactive"},50:{value:!1},17:{value:!1}}];return await this.upsertRecordsFormat({to:"br4pxrbs6",fieldsToReturn:[76],data:n}),!0}return s}async resetPassword(t){const r=`{'10'.EX.'Active'}${t.email?`AND{'6'.EX.'${t.email}'}`:""}${t.phoneNumber?`AND{'8'.EX.'${t.phoneNumber}'}`:""}${t.userType?`AND{'32'.EX.'${t.userType}'}`:""}${t.firstName?`AND{'35'.CT.'${t.firstName}'}`:""}${t.lastName?`AND{'37'.CT.'${t.lastName}'}`:""}`,a=[{7:{value:"User Request"},8:{value:r},9:{value:1},14:{value:77}}],s=await this.fetchFromStructureApp({fields:a}),i=s.data,n=new Date;if(i.length>0){const c=[{3:{value:i[0][3]},26:{value:n},17:{value:!0}}];return await this.upsertRecordsXML({to:"br4pxrbs6",fieldsToReturn:[76],formatObject:76,data:c})}return s}async logout(t){this.userStore=this.userStore||ie(),this.appStore=this.appStore||M(),(this.appStore.userType==="Candidate"||this.appStore.userType==="Candidate Kiosk")&&(this.employeeStore=this.employeeStore||$(),this.jobBoardStore=this.jobBoardStore||$e(),this.profileStore=this.profileStore||z(),this.assessmentStore=this.assessmentStore||ts()),_.remove(this.appConfig.storageUserTicketKeyName,{secure:!0,sameSite:"Strict"});const r=[R.clear(),this.userStore.$reset(),this.employeeStore.$reset(),this.jobBoardStore.$reset(),this.appStore.$reset(),this.profileStore.$reset(),this.assessmentStore.$reset()];return await Promise.allSettled(r),!0}async upsertRecordsFormat(...t){const r=t[0].formatObject||null;t[0].formatObject&&delete t[0].formatObject;const a=await this.axiosIns.post(this.config.insertRecords,...t).then(async s=>{let{data:i}=s.data;const n=i.map(async c=>{Object.keys(c).map(async m=>{c[m]=await c[m].value})});return i=await Promise.all(n),s.data});return r&&a.data.length>0&&a.data.forEach(s=>{Array.isArray(r)?r.forEach(i=>{j(i)&&s[i]&&(s[i]=de(s[i]))}):j(r)&&(s[r]=de(s[r])),s[1]&&(s[1]=S(s[1]).tz("America/Chicago")),s[2]&&(s[2]=S(s[2]).tz("America/Chicago"))}),a}async addRecordNoUser(t){const r={qdbapi:{msInUTC:1}};return this.config.appToken&&(r.qdbapi.apptoken=this.config.appToken),t.fields&&(r.qdbapi.fields=t.fields),r.qdbapi.usertoken=this.config.userToken,this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${t.to}?a=API_AddRecord`,headers:{"QUICKBASE-ACTION":"API_AddRecord","Content-Type":"application/xml"},data:H(r)}).then(s=>{const i=J(new window.DOMParser().parseFromString(s.data,"text/xml"));return s.data=i,s.data})}async upsertRecordsXML(t){if(t.data.length>1){const r=[];for(let i=0;i<t.data.length;i++){const n=Object.assign({},t);n.data=[t.data[i]],r.push(this.upsertRecordXML(n))}const a=await Promise.all(r),s={data:[],metadata:{createdRecordIds:[],totalNumberOfRecordsProcessed:0,unchangedRecordIds:[],updatedRecordIds:[]}};return a.forEach((i,n)=>{i.data[0]&&s.data.push(i.data[0]),s.metadata.createdRecordIds=s.metadata.createdRecordIds.concat(i.metadata.createdRecordIds),s.metadata.unchangedRecordIds=s.metadata.unchangedRecordIds.concat(i.metadata.unchangedRecordIds),s.metadata.updatedRecordIds=s.metadata.updatedRecordIds.concat(i.metadata.updatedRecordIds),s.metadata.totalNumberOfRecordsProcessed+=i.metadata.totalNumberOfRecordsProcessed,i.metadata.lineErrors&&(s.metadata.lineErrors||(s.metadata.lineErrors={}),s.metadata.lineErrors[n+1]=i.metadata.lineErrors[1])}),s}else return this.upsertRecordXML(t)}async upsertRecordXML(t){const r={qdbapi:{msInUTC:1}},a=t.formatObject||null,s=t.booleanFields?t.booleanFields.concat(this.config.booleanFields[`${t.to}`]||[]):this.config.booleanFields[`${t.to}`]||[];let i="";t.data[0][3]?(i="API_EditRecord",r.qdbapi.rid=t.data[0][3].value,delete t.data[0][3]):i="API_AddRecord",this.config.appToken&&(r.qdbapi.apptoken=this.config.appToken),t.data&&(r.qdbapi.fields=t.data),t.fieldsToReturn&&(r.qdbapi.clist=t.fieldsToReturn.join("."));const n=await this.getUserTicket();return n?r.qdbapi.ticket=n:this.config.userToken&&this.config.dev&&(r.qdbapi.usertoken=this.config.userToken),this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${t.to}?a=${i}`,headers:{"QUICKBASE-ACTION":`${i}`,"Content-Type":"application/xml"},data:je(r)}).then(c=>{let d=J(new window.DOMParser().parseFromString(c.data,"text/xml"));return d.metadata=ge(B({createdRecordIds:[]},d.errcode!==0&&{lineErrors:{}}),{totalNumberOfRecordsProcessed:0,unchangedRecordIds:[],updatedRecordIds:[]}),d.errcode!==0?(d.data=[],d.metadata.lineErrors[1]=[d.errdetail]):(d.data=[is(new window.DOMParser().parseFromString(c.data,"text/xml"))],a&&(Array.isArray(a)?a.forEach(m=>{j(m)&&d.data[0][m]&&(d.data[0][m]=de(d.data[0][m]))}):j(a)&&d.data[0][a]&&d.data[0][a]&&(d.data[0][a]=de(d.data[0][a]))),s.length>0&&s.forEach(m=>{d.data[0][m]&&(d.data[0][m]=d.data[0][m]===1)}),d.data[0][1]&&(d.data[0][1]=S(d.data[0][1]).tz("America/Chicago")),d.data[0][2]&&(d.data[0][2]=S(d.data[0][2]).tz("America/Chicago"))),d.data[0]&&d.rid&&(d.metadata.totalNumberOfRecordsProcessed=1,d.num_fields_changed===0&&(d.metadata.unchangedRecordIds=[d.rid]),i==="API_EditRecord"&&d.num_fields_changed>0?d.metadata.updatedRecordIds=[d.rid]:i==="API_AddRecord"&&(d.metadata.createdRecordIds=[d.rid])),delete d.action,delete d.errcode,delete d.errdetail,delete d.errtext,delete d.num_fields_changed,delete d.rid,delete d.update_id,delete d.record,c.data=d,c.data})}async addRecordXML(t){const r={qdbapi:{msInUTC:1}};this.config.appToken&&(r.qdbapi.apptoken=this.config.appToken),t.fields&&(r.qdbapi.fields=t.fields),t.list&&(r.qdbapi.clist=t.list.join("."));const a=await this.getUserTicket();return a?r.qdbapi.ticket=a:this.config.userToken&&this.config.dev&&(r.qdbapi.usertoken=this.config.userToken),this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${t.to}?a=API_AddRecord`,headers:{"QUICKBASE-ACTION":"API_AddRecord","Content-Type":"application/xml"},data:H(r)}).then(i=>{const n=J(new window.DOMParser().parseFromString(i.data,"text/xml"));return i.data=n,i.data})}async editRecordXML(t){const r={qdbapi:{msInUTC:1}};if(t.rid)r.qdbapi.rid=t.rid;else throw"You must supply rid!";this.config.appToken&&(r.qdbapi.apptoken=this.config.appToken),t.fields&&(r.qdbapi.fields=t.fields),t.list&&(r.qdbapi.clist=t.list.join("."));const a=await this.getUserTicket();return a?r.qdbapi.ticket=a:this.config.userToken&&this.config.dev&&(r.qdbapi.usertoken=this.config.userToken),this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${t.to}?a=API_EditRecord`,headers:{"QUICKBASE-ACTION":"API_EditRecord","Content-Type":"application/xml"},data:H(r)}).then(i=>{const n=J(new window.DOMParser().parseFromString(i.data,"text/xml"));return i.data=n,i.data})}async fetchFromProjectsApp(t){const r=await this.upsertRecordsXML({to:"bsazqhchc",fieldsToReturn:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],formatObject:12,data:t.fields});return r.data=r.data[0][12],r}async fetchFromStructureApp(t){const r=await this.upsertRecordsXML({to:"br9srnufv",fieldsToReturn:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],formatObject:12,data:t.fields});return r.data=r.data[0][12],r}async fetchFromHiringApp(t){const r=await this.upsertRecordsXML({to:"br9vuzuj7",fieldsToReturn:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],formatObject:12,data:t.fields});return r.data=r.data[0][12],r}async fetchFromRecruitingApp(t){const r=await this.upsertRecordsXML({to:"br9j45fg5",fieldsToReturn:[1,2,3,4,5,6,7,8,9,10,11,12,13,14],formatObject:12,data:t.fields});return r.data=r.data[0][12],r}async softDeleteEmployee(t){const r=new Date,a=[{3:{value:t},109:{value:""},25:{value:""},28:{value:""},16:{value:""},26:{value:""},34:{value:""},509:{value:!0},510:{value:r}}],{data:s}=await this.upsertRecordsFormat({to:"bp3gb7ng2",fieldsToReturn:[3,500],data:a,formatObject:500});return s[3]}fetchIpInfo(){return fetch("https://1.1.1.1/cdn-cgi/trace").then(async t=>{const a=(await t.text()).split(`
`),s={};return a.forEach(i=>{const n=i.split("=");U(n[0])&&U(n[1])&&(s[`${n[0]}`]=n[1])}),this.setIpInfo(s),s})}addLoginAttempt(t){const r=t.find(n=>U(n[6])),a=t.find(n=>U(n[7])),s=S(),i=s.add(this.config.lastAttemptExpMinutes,"minute");a[7]==="Invalid Login"||a[7]==="Invalid Password"?r[6]===this.loginAttempts.login?(this.loginAttempts.invalidLogins+=1,this.loginAttempts.exp=i,this.loginAttempts.currentTime=s,t.push({15:this.loginAttempts.invalidLogins}),t.push({16:i.valueOf()})):(this.loginAttempts.invalidLogins=1,this.loginAttempts.exp=i,this.loginAttempts.currentTime=s,this.loginAttempts.login=r[6],t.push({15:this.loginAttempts.invalidLogins}),t.push({16:i.valueOf()})):a[7]==="Successful"&&(this.loginAttempts={invalidLogins:0,login:null,exp:null,currentTime:null}),this.addRecordNoUser({to:"br54phpqz",fields:t})}async doQuery(t){const r={qdbapi:B({},this.config.commonParameters)};t.queryTotalRecords=U(t.queryTotalRecords)?t.queryTotalRecords:!1,t.select&&(r.qdbapi.clist=t.select.join(".")),t.where&&(r.qdbapi.query=t.where);let a=null;if(t.sortBy)for(let c=0;c<t.sortBy.length;c++)c===0?(r.qdbapi.slist=`${t.sortBy[c].fieldId?`${t.sortBy[c].fieldId}.`:""}`,a=`${t.sortBy[c].order==="ASC"?"sortorder-A.":"sortorder-D."}`):(r.qdbapi.slist+=`${t.sortBy[c].fieldId?`${t.sortBy[c].fieldId}.`:""}`,a+=`${t.sortBy[c].order==="ASC"?"sortorder-A.":"sortorder-D."}`);t.options&&(r.qdbapi.options=`${t.options.top?`num-${t.options.top}.`:""}${a||""}${t.options.skip&&t.options.skip>0?`skp-${t.options.skip}`:""}`),this.config.appToken&&(r.qdbapi.apptoken=this.config.appToken);const s=await this.getUserTicket();s&&!t.refresh?r.qdbapi.ticket=s:this.config.userToken&&this.config.dev&&(r.qdbapi.usertoken=this.config.userToken);const i=this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${t.from}?a=API_DoQuery`,headers:{"QUICKBASE-ACTION":"API_DoQuery","Content-Type":"application/xml"},data:H(r)}).then(c=>{const d={};d.data=ss(new window.DOMParser().parseFromString(c.data,"text/xml")),d.fields=ns(new window.DOMParser().parseFromString(c.data,"text/xml"));const m=[];return d.fields.forEach(y=>{y.type==="checkbox"&&m.push(y.id)}),d.data.forEach(y=>{for(const[v,T]of Object.entries(y))m.includes(v)&&(y[`${v}`]=T===1)}),d.metadata=B({totalRecords:d.data.length,numRecords:d.data.length,numFields:t.select?t.select.length:0,skip:t.options&&t.options.skip?t.options.skip:0},t.options&&t.options.top?{top:t.options.top}:{}),c.data=d,c.data});let n=null;t.queryTotalRecords&&(n=this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${t.from}?a=API_DoQueryCount`,headers:{"QUICKBASE-ACTION":"API_DoQueryCount","Content-Type":"application/xml"},data:H(r)}).then(c=>{const d=J(new window.DOMParser().parseFromString(c.data,"text/xml"));return c.data=d,c.data}));const o=await i;if(t.queryTotalRecords){const c=await n;o.metadata.totalRecords=c.numMatches}return o}async checkKioskStatus(){const t=await this.getNativeQuickbaseUser();if(t.data.login==="Anonymous")return!1;{const r=`{'11'.EX.'${t.data.email}'}AND{'6'.EX.'Active'}`,a=[{7:{value:"Kiosks"},8:{value:r},9:{value:1},14:{value:30}}],{data:s}=await this.fetchFromStructureApp({fields:a});return s.length===0?!1:(this.appStore.setKioskAccount(s[0]),!0)}}async getNativeQuickbaseUser(){return await this.axiosIns({method:"post",url:"https://elitehcms.quickbase.com/db/main?a=API_GetUserInfo",headers:{"QUICKBASE-ACTION":"API_GetUserInfo","Content-Type":"application/xml"}}).then(a=>{const s={};return s.data=as(new window.DOMParser().parseFromString(a.data,"text/xml")),a.data=s,a.data})}}const U=e=>!(typeof e=="undefined"||e===null||e===""),j=e=>!isNaN(parseFloat(e))&&isFinite(e),H=e=>{let t="";for(const r in e){if(t+=e[r]instanceof Array?"":`<${r}>`,e[r]instanceof Array)if(r==="fields")for(let a=0;a<e[r].length;a++)if(Object.keys(e[r][a]).length===2&&e[r][a].filename){let s=null;for(const i in e[r][a])j(i)&&(s=i);t+=`<field fid="${s}" filename="${e[r][a].filename}">${e[r][a][`${s}`]}</field>`}else for(const s in e[r][a])t+=`<field fid="${s}">${e[r][a][s]}</field>`;else for(const a in e[r])t+=`<${r}>`,t+=H(e[r][a]),t+=`</${r}>`;else typeof e[r]=="object"?t+=H(e[r]):t+=e[r];t+=e[r]instanceof Array?"":`</${r}>`}return t=t.replace(/<\/?[0-9]{1,}>/g,""),t},je=e=>{let t="";for(const r in e){if(t+=e[r]instanceof Array?"":`<${r}>`,e[r]instanceof Array)if(r==="fields")for(let a=0;a<e[r].length;a++)if(Object.keys(e[r][a]).length===2&&e[r][a].filename){let s=null;for(const i in e[r][a])j(i)&&(s=i);t+=`<field fid="${s}" filename="${e[r][a].filename}">${e[r][a][`${s}`].value}</field>`}else for(const s in e[r][a])t+=`<field fid="${s}">${e[r][a][s].value}</field>`;else for(const a in e[r])t+=`<${r}>`,t+=je(e[r][a]),t+=`</${r}>`;else typeof e[r]=="object"?t+=je(e[r]):t+=e[r];t+=e[r]instanceof Array?"":`</${r}>`}return t=t.replace(/<\/?[0-9]{1,}>/g,""),t},J=e=>{const t=e.querySelector("qdbapi").children,r={};for(let a=0;a<t.length;a++)t[a].tagName!=="table"&&(r[`${t[a].tagName}`]=j(t[a].innerHTML)?parseInt(t[a].innerHTML):t[a].innerHTML);return r},as=e=>{const t=e.querySelector("qdbapi user"),r={id:j(t.id)?parseInt(t.id):t.id};for(let a=0;a<t.children.length;a++)r[`${t.children[a].tagName}`]=j(t.children[a].innerHTML)?parseInt(t.children[a].innerHTML):t.children[a].innerHTML;return r},ss=e=>{const t=e.querySelector("qdbapi table records"),r=[];for(let a=0;a<t.children.length;a++){const s={};for(let i=0;i<t.children[a].children.length;i++)t.children[a].children[i].id&&(s[`${t.children[a].children[i].id}`]=j(t.children[a].children[i].innerHTML)?parseInt(t.children[a].children[i].innerHTML):t.children[a].children[i].innerHTML);r.push(s)}return r},is=e=>{const t=e.querySelector("qdbapi record"),r={};for(let a=0;a<t.children.length;a++)t.children[a].id&&(r[`${t.children[a].id}`]=j(t.children[a].innerHTML)?parseInt(t.children[a].innerHTML):t.children[a].innerHTML);return r},ns=e=>{const t=e.querySelector("qdbapi table fields"),r=[];for(let a=0;a<t.children.length;a++){let s=t.children[a].attributes.field_type.value,i=t.children[a].firstElementChild.nodeName==="label"?t.children[a].firstElementChild.innerHTML:null;if(!i){for(let o=0;o<t.children[a].children.length;o++)if(t.children[a].children[o].nodeName==="label"){i=t.children[a].children[o].innerHTML;break}}s==="float"&&(s="numeric");const n={id:t.children[a].id,label:i,type:s};r.push(n)}return r},V=(e,t)=>(Array.isArray(e)?e.forEach(r=>{Object.keys(r).forEach(a=>{r[a]&&(r[a]=V(r[a],a))})}):!j(t)&&typeof e=="object"&&!Array.isArray(e)&&e!==null?Object.keys(e).forEach(r=>{e[r]&&(e[r]=V(e[r],r))}):U(e.date)&&U(e.time)&&e.time!=="::"?(e=`${e.date} ${e.time}`,e=S(e,"MM-DD-YYYY H:m:s").tz("America/Chicago")):U(e.date)?(e=`${e.date}`,e=S(e,"MM-DD-YYYY").tz("America/Chicago")):U(e.time)&&e.time!=="::"&&(e=`${e.time}`,e=S(e,"H:m:s").tz("America/Chicago")),e),de=e=>{try{let t=JSON.parse(e);return Array.isArray(t)?t.forEach(r=>{Object.keys(r).forEach(a=>{r[a]&&(r[a]=V(r[a],a))})}):typeof t=="object"&&!Array.isArray(t)&&t!==null&&Object.keys(t).forEach(r=>{Array.isArray(t[r])?t[r].forEach(a=>{Object.keys(a).forEach(s=>{j(s)&&a[s]?a[s]=V(a[s],s):a[s]&&typeof a[s]=="object"&&!Array.isArray(a[s])&&a[s]!==null&&Object.keys(a[s]).forEach(i=>{a[s][i]&&(a[s][i]=V(a[s][i],i))})})}):typeof t[r]=="object"&&!Array.isArray(t[r])&&t[r]!==null&&(j(r)?t[r]=V(t[r],r):Object.keys(t[r]).forEach(a=>{t[r][a]&&(t[r][a]=V(t[r][a],a))}))}),t}catch(t){return console.log(t),console.log("error parsing:",e),[]}};function os(e,t){return{quickbase:new rs(e,t)}}const cs=Sr(Or.create({baseURL:$t.baseURL,timeout:25e3,headers:{"Content-Type":"application/json"}}),{maxRequests:6,perMilliseconds:1e3}),{quickbase:w}=os(cs,{});var ls=Ir(({app:e})=>{e.config.globalProperties.$quickbase=w}),vs=Object.freeze(Object.defineProperty({__proto__:null,default:ls,quickbase:w},Symbol.toStringTag,{value:"Module"}));export{ke as a,M as b,$ as c,L as d,z as e,$e as f,lt as g,X as h,ts as i,vs as j,ja as o,w as q,ie as u,bs as z};
