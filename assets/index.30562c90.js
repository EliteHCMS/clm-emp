import{l as le,I as ie,av as ne,a5 as Q,c as j,aw as O,ax as ye,ay as v,_ as se,p as a,P as k,M as n,t as w,v as o,d as l,L as p,x as Se,az as K,X as E,aA as fe,N as m,J as de,r as N,aB as q,K as he,o as qe,aC as P,O as oe,a2 as ae,Q as X,S as te,y as S,R as ue,W as ke,a3 as Ce,F as Ve,aD as we,w as _e,a4 as Ue,aE as Pe,a6 as Ne}from"./index.ab5d937d.js";import{Q as be,a as $e,b as Ae}from"./QStep.e4d01610.js";import{Q as ge}from"./QTooltip.b9ac4947.js";const Ie=le({props:{title:String,step:Number,name:Number},setup(){const{formOptionsLoaded:e,getEvergreenJobs:s,checkedIn:y,getFormOptions:C}=ie(),{profile:f,updateProfile:_}=ne(),{evergreenJobOptions:t}=Q(ie()),b=j(()=>y?O({selection:O().required("Please select a job!").nullable()}):!1),{meta:i,errors:z,handleSubmit:R,isSubmitting:F}=ye({validationSchema:b,initialValues:{selection:f[19].value?{value:f[19].value,label:f[19].label}:null}}),{value:L}=v("selection"),A=R(U=>{const T={19:{value:U.selection.value,label:U.selection.label},40:{value:U.selection[13],label:U.selection[12]}};_({next:1,values:T})});async function V(){await s(),e||C()}return V(),{checkedIn:y,selection:L,formMeta:i,formErrors:z,isSubmitting:F,submitUpdate:A,evergreenJobOptions:t}}}),Oe={key:0},ze={class:"text-caption"};function Re(e,s,y,C,f,_){return a(),k($e,{name:e.name,title:e.title,done:e.step>0},{default:n(()=>[e.checkedIn?(a(),w("div",Oe,[o("form",{onSubmit:s[1]||(s[1]=fe((...t)=>e.submitUpdate&&e.submitUpdate(...t),["prevent"]))},[l(K,{autofocus:"",label:"Select a Job",modelValue:e.selection,"onUpdate:modelValue":s[0]||(s[0]=t=>e.selection=t),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:e.evergreenJobOptions,style:Se(e.$q.screen.gt.md?"width: 50%":"width: 100%"),error:!!e.formErrors.selection,"bottom-slots":"",dense:""},{error:n(()=>[o("div",ze,p(e.formErrors.selection),1)]),_:1},8,["modelValue","options","style","error"]),l(be,{class:"text-right"},{default:n(()=>[l(E,{type:"submit",color:"info",label:"Continue"})]),_:1})],32)])):m("",!0)]),_:1},8,["name","title","done"])}var Me=se(Ie,[["render",Re]]);const De=le({props:{title:String,step:Number,name:Number},components:{},setup(){const{employee:e}=Q(de()),s=[{label:"Call",value:1},{label:"Text",value:2},{label:"Email",value:3},{label:"Call, Text, or Email",value:4},{label:"Do Not Contact Me",value:5}],y=[{label:"United States",value:"United States"},{label:"Canada",value:"Canada"}],C=N(!1),f=N(!1),_=N(null),t=ne(),{onJobBoard:b}=Q(t),i=O({first:q().required("First name is required!").matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}),middle:q().matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}).nullable().notRequired(),last:q().required("Last name is required!").matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}),suffix:q().nullable().notRequired(),street1:q().required(),street2:q().nullable().notRequired(),city:q().required(),state:q().required(),postal:q().required(),addressCountry:O().required(),contact:O().nullable().notRequired()}),{meta:z,errors:R,handleSubmit:F,isSubmitting:L}=ye({validationSchema:i,initialValues:{first:e.value[20]?e.value[20]:"",middle:e.value[21]?e.value[21]:"",last:e.value[22]?e.value[22]:"",suffix:e.value[23]?e.value[23]:"",contact:e.value[57]?{value:e.value[57],label:e.value[58]}:null,street1:e.value[41]?e.value[41]:"",street2:e.value[42]?e.value[42]:"",city:e.value[43]?e.value[43]:"",state:e.value[44]?e.value[44]:"",postal:e.value[45]?e.value[45]:"",addressCountry:e.value[46]?{value:e.value[46],label:e.value[46]}:null}}),{value:A,meta:V}=v("first"),{value:U,meta:T}=v("middle"),{value:D,meta:I}=v("last"),{value:G}=v("suffix"),{value:x}=v("contact"),{value:ee}=v("street1"),{value:M}=v("street2"),{value:H}=v("city"),{value:Y}=v("state"),{value:d}=v("postal"),{value:h}=v("addressCountry"),u=j(()=>{const $=`${A.value} ${D.value} ${G.value}`;return he.formatName($)}),B=j(()=>`${ee.value}${M.value===""?"":` ${M.value}`}, ${H.value}, ${Y.value}, ${d.value}, ${h.value.value}`);function J(){const $={next:2};t.updateProfile($)}function Z(){C.value=!0}const re=F(async $=>{const me={23:$.first,24:$.middle,25:$.last,26:$.suffix,46:$.contact,32:$.street1,33:$.street2,34:$.city,35:$.state,36:$.postal,37:$.addressCountry.value},pe={next:2,values:me};C.value=!1;const c=await t.updateProfile(pe);console.log(c)});function W(){const $={next:0};t.updateProfile($)}const ce=$=>{_.value=$};return qe(()=>{console.log(e.value)}),{submitUpdate:re,isSubmitting:L,save:J,back:W,updateCountry:ce,first:A,middle:U,last:D,suffix:G,contact:x,street1:ee,street2:M,city:H,state:Y,postal:d,addressCountry:h,hasPersonalInfo:f,showEdit:C,firstMeta:V,middleMeta:T,lastMeta:I,formMeta:z,formErrors:R,options:s,countries:y,fullName:u,fullAddress:B,employee:e,showEditFunction:Z,onJobBoard:b}}}),Be={class:"row justify-between"},Qe={class:"col-12 col-md-5"},Fe={class:"text-caption"},Le={class:"text-caption"},He={class:"text-caption"},Je={class:"text-caption"},je={class:"text-caption"},Te={class:"col-12 col-md-6"},Ye={class:"text-caption"};function Ze(e,s,y,C,f,_){return a(),w("form",{onSubmit:s[12]||(s[12]=fe((...t)=>e.submitUpdate&&e.submitUpdate(...t),["prevent"]))},[o("div",Be,[o("div",Qe,[l(P,{dense:"",modelValue:e.first,"onUpdate:modelValue":s[0]||(s[0]=t=>e.first=t),label:"First Name *",error:!!e.formErrors.first,"bottom-slots":""},{error:n(()=>[o("div",Fe,p(e.formErrors.first),1)]),_:1},8,["modelValue","error"]),l(P,{dense:"",modelValue:e.middle,"onUpdate:modelValue":s[1]||(s[1]=t=>e.middle=t),label:"Middle Name",error:!!e.formErrors.middle,"bottom-slots":""},{error:n(()=>[o("div",Le,p(e.formErrors.middle),1)]),_:1},8,["modelValue","error"]),l(P,{dense:"",modelValue:e.last,"onUpdate:modelValue":s[2]||(s[2]=t=>e.last=t),label:"Last Name *",error:!!e.formErrors.last,"bottom-slots":""},{error:n(()=>[o("div",He,p(e.formErrors.last),1)]),_:1},8,["modelValue","error"]),l(P,{dense:"",modelValue:e.suffix,"onUpdate:modelValue":s[3]||(s[3]=t=>e.suffix=t),label:"Suffix",error:!!e.formErrors.suffix,"bottom-slots":""},{error:n(()=>[o("div",Je,p(e.formErrors.suffix),1)]),_:1},8,["modelValue","error"]),l(K,{dense:"",modelValue:e.contact,"onUpdate:modelValue":s[4]||(s[4]=t=>e.contact=t),label:"Preferred Contact Method",options:e.options,error:!!e.formErrors.contact,"bottom-slots":""},{error:n(()=>[o("div",je,p(e.formErrors.contact),1)]),_:1},8,["modelValue","options","error"])]),e.$q.screen.gt.sm?(a(),k(oe,{key:0,vertical:""})):m("",!0),o("div",Te,[l(P,{dense:"",modelValue:e.street1,"onUpdate:modelValue":s[5]||(s[5]=t=>e.street1=t),label:"Street Address 1 *",error:!!e.formErrors.street1,"bottom-slots":""},null,8,["modelValue","error"]),l(P,{dense:"",modelValue:e.street2,"onUpdate:modelValue":s[6]||(s[6]=t=>e.street2=t),label:"Street Address 2",error:!!e.formErrors.street2,"bottom-slots":""},null,8,["modelValue","error"]),l(P,{dense:"",modelValue:e.city,"onUpdate:modelValue":s[7]||(s[7]=t=>e.city=t),label:"City *",error:!!e.formErrors.city,"bottom-slots":""},null,8,["modelValue","error"]),l(P,{dense:"",modelValue:e.state,"onUpdate:modelValue":s[8]||(s[8]=t=>e.state=t),label:"State/Region *",error:!!e.formErrors.state,"bottom-slots":""},null,8,["modelValue","error"]),l(P,{dense:"",modelValue:e.postal,"onUpdate:modelValue":s[9]||(s[9]=t=>e.postal=t),label:"Postal Code *",error:!!e.formErrors.postal,"bottom-slots":""},null,8,["modelValue","error"]),l(K,{dense:"",modelValue:e.addressCountry,"onUpdate:modelValue":s[10]||(s[10]=t=>e.addressCountry=t),label:"Country *",options:e.countries,error:!!e.formErrors.addressCountry,"bottom-slots":""},{error:n(()=>[o("div",Ye,p(e.formErrors.addressCountry),1)]),_:1},8,["modelValue","options","error"])])]),l(be,{class:"text-right"},{default:n(()=>[e.onJobBoard?m("",!0):(a(),k(E,{key:0,onClick:s[11]||(s[11]=t=>e.$emit("back")),color:"secondary",label:"Back",class:"q-mr-sm"})),l(E,{type:"submit",color:"info",label:"Continue"})]),_:1})],32)}var We=se(De,[["render",Ze]]);const Ke=/^[0-9]{10}/g,Xe=le({props:{title:String,step:Number,name:Number},components:{editPersonalInfo:We},setup(){const{employee:e}=Q(de()),s=[{label:"Call",value:0},{label:"Text",value:1},{label:"Email",value:2}],y=[{label:"United States",value:"United States"},{label:"Canada",value:"Canada"}],C=N(!1),f=N(!1),_=N(null),t=ne(),{onJobBoard:b,personalInfoNeeded:i}=Q(t),z=O({first:q().required("First name is required!").matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}),middle:q().matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}).nullable().notRequired(),last:q().required("Last name is required!").matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}),suffix:q().nullable().notRequired(),email:q().required("Email is required!").email("You must provide a valid email!"),phone:q().matches(Ke,{message:"Valid Phone Number Required!"}).required("Phone number is required!"),street1:q().required(),street2:q().nullable().notRequired(),city:q().required(),state:q().required(),postal:q().required(),addressCountry:O().required(),contact:O().nullable().notRequired()}),{meta:R,errors:F,handleSubmit:L,isSubmitting:A}=ye({validationSchema:z,initialValues:{first:e.value[20]?e.value[20]:"",middle:e.value[21]?e.value[21]:"",last:e.value[22]?e.value[22]:"",suffix:e.value[23]?e.value[23]:"",phone:e.value[27]?e.value[27]:"",email:e.value[26]?e.value[26]:"",contact:e.value[57]?{value:e.value[57],label:e.value[58]}:null,street1:e.value[41]?e.value[41]:"",street2:e.value[42]?e.value[42]:"",city:e.value[43]?e.value[43]:"",state:e.value[44]?e.value[44]:"",postal:e.value[45]?e.value[45]:"",addressCountry:e.value[46]?{value:e.value[46],label:e.value[46]}:null}}),{value:V,meta:U}=v("first"),{value:T,meta:D}=v("middle"),{value:I,meta:G}=v("last"),{value:x}=v("suffix"),{value:ee}=v("email"),{value:M}=v("phone"),{value:H}=v("contact"),{value:Y}=v("street1"),{value:d}=v("street2"),{value:h}=v("city"),{value:u}=v("state"),{value:B}=v("postal"),{value:J}=v("addressCountry"),Z=j(()=>{const r=`${V.value} ${I.value} ${x.value}`;return he.formatName(r)}),re=j(()=>`${Y.value}${d.value===""?"":` ${d.value}`}, ${h.value}, ${u.value}, ${B.value}, ${J.value.value}`),W=j(()=>{let r="";return M.value.length===11?r=M.value.substring(1):r=M.value,he.formatPhone(r)});async function ce(){const r={23:e.value[20],24:e.value[21],25:e.value[22],26:e.value[23],27:e.value[27],28:e.value[26],46:e.value[57],32:e.value[41],33:e.value[42],34:e.value[43],35:e.value[44],36:e.value[45],37:e.value[46]},g={next:2,values:r};t.updateProfile(g)}function $(){C.value=!0}const me=L(r=>{const g={23:r.first,24:r.middle,25:r.last,26:r.suffix,27:r.phone,28:r.email,46:r.contact,32:r.street1,33:r.street2,34:r.city,35:r.state,36:r.postal,37:r.addressCountry.name},ve={next:2,values:g};C.value=!1,t.updateProfile(ve)});function pe(){C.value=!1;const r={next:0};t.updateProfile(r)}const c=r=>{_.value=r};return qe(()=>{console.log(e.value)}),{submitUpdate:me,isSubmitting:A,save:ce,back:pe,updateCountry:c,first:V,middle:T,last:I,suffix:x,email:ee,phone:M,contact:H,street1:Y,street2:d,city:h,state:u,postal:B,addressCountry:J,hasPersonalInfo:f,showEdit:C,firstMeta:U,middleMeta:D,lastMeta:G,formMeta:R,formErrors:F,options:s,countries:y,fullName:Z,fullAddress:re,formatPhone:W,employee:e,showEditFunction:$,onJobBoard:b,personalInfoNeeded:i}}}),Ge={key:1},xe={class:"col-12 col-md-3 q-py-sm"},et=o("div",{class:"text-primary"},"Name",-1),tt={class:"text-dark q-pl-sm"},ot={class:"col-12 col-md-6 q-py-sm"},lt=o("div",{class:"text-primary"},"Address",-1),st={class:"text-dark q-pl-sm"},at={class:"col-12 col-md-3 q-py-sm"},nt=o("div",{class:"text-primary"},"Preferred Contact Method",-1),rt={class:"text-dark q-pl-sm"};function it(e,s,y,C,f,_){const t=ae("edit-personal-info");return a(),k($e,{name:e.name,title:e.title,done:e.step>1},{default:n(()=>[e.showEdit||e.personalInfoNeeded?(a(),k(t,{key:0,onBack:e.back},null,8,["onBack"])):m("",!0),!e.showEdit&&!e.personalInfoNeeded?(a(),w("div",Ge,[l(ue,null,{default:n(()=>[l(X,null,{default:n(()=>[o("div",{class:S(["text-dark",e.$q.screen.gt.sm?"text-h6":"text-body2"])},[te(p(e.$q.screen.gt.sm?"Personal Info":"Personal")+" ",1),l(E,{class:"q-ml-sm",round:"",size:e.$q.screen.gt.sm?"sm":"xs",color:"accent",icon:"edit",onClick:e.showEditFunction},null,8,["size","onClick"])],2),o("div",{class:S(["row q-mt-sm",e.$q.screen.gt.sm?"text-body1":"text-caption"])},[o("div",xe,[et,o("div",tt,p(e.employee[24]),1)]),o("div",ot,[lt,o("div",st,p(e.employee[40]),1)]),o("div",at,[nt,o("div",rt,p(e.employee[58]),1)])],2)]),_:1})]),_:1}),l(be,{class:"text-right"},{default:n(()=>[e.onJobBoard?m("",!0):(a(),k(E,{key:0,onClick:e.back,color:"secondary",label:"Back",class:"q-mr-sm"},null,8,["onClick"])),l(E,{onClick:e.save,color:"info",label:"Continue"},null,8,["onClick"])]),_:1})])):m("",!0)]),_:1},8,["name","title","done"])}var dt=se(Xe,[["render",it]]);const ut=/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,ct=le({props:{title:String,step:Number,name:Number},setup(){const e=ke(),s=ne(),y=ie(),{formOptions:C}=Q(y),{savedEmergencyContacts:f}=Q(de()),{removeContact:_,addContact:t,updateContact:b,employeeData:i}=de(),z=N({name:"first",value:null}),R=N({name:"last",value:null}),F=N({name:"phone",value:null}),L=N({name:"relationship",value:null}),A=N([]),V=j(()=>{const d=f.value.concat(A.value);return d.sort(function(h,u){return h.editing&&!u.editing?-1:!h.editing&&u.editing?1:0}),d}),U=j(()=>V.value.filter(h=>h.editing).length>0);function T(){const d={next:3};s.updateProfile(d)}function D(){const d={next:1};s.updateProfile(d)}function I(){const d={3:V.value.length+1,6:"",7:"",8:"",11:"",12:"",16:"",editing:!0,new:!0,contact:null};A.value.push(d),console.log(V.value)}function G(d){f.value[d].editing=!0}function x(d){const h=V.value[d];console.log(h),e.dialog({title:"Alert",message:`Are you sure you want to remove ${h[6]} ${h[7]}?`,cancel:!0,persistent:!0}).onOk(()=>{_(h[3])})}const ee=O({relationship:O().required("Relationship is required.").nullable(),phone:q().matches(ut,{message:"A valid phone number is required."}).length(10,{message:"Phone number must be 10 digits."}).required("Phone is required."),last:q().required("Last name is required.").matches(/^[a-zA-Z]+$/g,{excludeEmptyString:!0,message:"Cannot contain numbers or special characters."}),first:q().required("First name is required.").matches(/^[a-zA-Z]+$/g,{excludeEmptyString:!0,message:"Cannot contain numbers or special characters."})}).required();function M(d){const h=[z.value,R.value,F.value,L.value];d?h.forEach(u=>{u.name===d.name?u.value=d.message:u.value=null}):h.forEach(u=>{u.value=null})}async function H(d,h){console.log(d);const u=V.value[h];try{await ee.validate({relationship:d.contact,phone:d[16],last:d[7],first:d[6]}),u[11]=d.contact.value,u[12]=d.contact.label,u.editing=!1,M(),u.new?(u.new=!1,t(u),A.value.forEach((B,J)=>{B[3]===u[3]&&A.value.splice(J,1)})):b(u)}catch({name:B,path:J,errors:Z,inner:re}){let W="";Z[0]instanceof Object?W=Z[0].message:W=Z[0],M({name:J,message:W})}}function Y(d){const h=V.value[d];console.log(h),h.new?A.value.forEach((u,B)=>{u[3]===h[3]&&A.value.splice(B,1)}):V.value[d].editing=!1}return{save:T,back:D,savedEmergencyContacts:f,allContacts:V,editing:U,formOptions:C,editItem:G,removeItem:x,saveItem:H,cancelEdit:Y,addNewContactRow:I,addContact:t,updateContact:b,firstError:z,lastError:R,phoneError:F,relationshipError:L,helpers:he,employeeData:i}}}),mt={class:"col-12 col-md-4"},pt=o("div",{class:"text-primary"},"Phone",-1),vt={class:"text-dark q-pl-sm"},ft={class:"col-12 col-md-4"},bt=o("div",{class:"text-primary"},"Email",-1),ht={class:"text-dark q-pl-sm"},yt={key:0,class:"text-body2 text-dark"},$t={class:"row q-py-sm"},gt={class:"col-12 col-md-6 text-left"},qt={key:0,class:"text-body2 text-primary text-italic q-pb-sm q-pl-md"},kt=["id"],Ct={class:"col-12 col-md-4"},Vt=o("div",{class:"text-primary"},"Name",-1),Et={class:"text-dark q-pl-sm"},St=o("div",{class:"text-primary"},"Phone",-1),wt={class:"text-dark q-pl-sm"},_t=o("div",{class:"text-primary"},"Relationship",-1),Ut={class:"text-dark q-pl-sm"},Pt={key:1,class:"items-center"},Nt=["onSubmit"],At={class:"row"},It={class:"col-12 col-md-3 q-pr-md"},Ot={class:"col-12 col-md-3 q-pr-md"},zt={class:"col-12 col-md-3 q-pr-md"},Rt={class:"col-12 col-md-3"},Mt={class:"row q-mt-md"},Dt={class:"col text-right"};function Bt(e,s,y,C,f,_){return a(),k($e,{name:e.name,title:e.title},{default:n(()=>[o("div",null,[l(ue,{class:"q-px-xs"},{default:n(()=>[l(X,null,{default:n(()=>[o("div",{class:S(["text-dark",e.$q.screen.gt.sm?"text-h6":"text-body2"])},[te(p(e.$q.screen.gt.sm?"Personal Contact Info":"Personal")+" ",1),l(E,{class:"q-ml-sm",round:"",size:e.$q.screen.gt.sm?"sm":"xs",color:"accent",icon:"edit"},null,8,["size"])],2),o("div",{class:S(["row q-mt-sm",e.$q.screen.gt.sm?"text-body1":"text-caption"])},[o("div",mt,[pt,o("div",vt,p(e.employeeData[25]),1)]),o("div",ft,[bt,o("div",ht,p(e.employeeData[26]),1)])],2)]),_:1}),e.$q.screen.gt.sm?m("",!0):(a(),k(oe,{key:0})),e.editing?m("",!0):(a(),k(X,{key:1,class:S(e.$q.screen.lt.md?"q-px-xs":"")},{default:n(()=>[e.$q.screen.gt.sm?m("",!0):(a(),w("div",yt,"Emergency Contacts")),o("div",$t,[o("div",gt,[l(E,{size:e.$q.screen.gt.sm?"md":"sm",color:"accent",label:(e.allContacts.length>0,"Add Emergency Contact"),onClick:e.addNewContactRow,icon:"add"},null,8,["size","label","onClick"])])])]),_:1},8,["class"])),e.editing?(a(),k(oe,{key:2})):m("",!0),l(X,{class:S([e.editing?"q-pt-sm":"q-pt-none",e.$q.screen.gt.sm?"":"q-px-xs"])},{default:n(()=>[e.allContacts.length===0?(a(),w("div",qt,"Add your Emergency Contact(s). This is required to continue.")):m("",!0),(a(!0),w(Ve,null,Ce(e.allContacts,(t,b)=>(a(),w("div",{id:t[3],key:t[3]},[l(ue,{class:"q-pa-sm",flat:""},{default:n(()=>[t.editing?m("",!0):(a(),w("div",{key:0,class:S(["row items-center",e.$q.screen.gt.sm?"text-body2":"text-caption"])},[o("div",Ct,[o("div",null,[Vt,o("div",Et,p(e.helpers.formatName(t[6]))+" "+p(e.helpers.formatName(t[7])),1)])]),o("div",{class:S(e.$q.screen.gt.sm?"col-3":"col-12 q-pt-sm")},[o("div",null,[St,o("div",wt,p(e.helpers.formatPhone(t[8])),1)])],2),o("div",{class:S(e.$q.screen.gt.sm?"col-3":"col-12 q-pt-sm")},[o("div",null,[_t,o("div",Ut,p(t[12]),1)])],2),o("div",{class:S(e.$q.screen.gt.sm?"col-2 text-right":"col-12 q-pt-md text-right")},[o("div",null,[l(E,{size:"sm",round:"",onClick:i=>e.editItem(b),color:"secondary",icon:"edit",class:"q-mr-sm"},null,8,["onClick"]),l(E,{size:"sm",round:"",onClick:i=>e.removeItem(b),color:"primary",icon:"delete"},null,8,["onClick"])])],2)],2)),t.editing?(a(),w("div",Pt,[o("form",{onSubmit:fe(i=>e.saveItem(t,b),["prevent"])},[o("div",At,[o("div",It,[l(P,{modelValue:t[6],"onUpdate:modelValue":i=>t[6]=i,dense:"",label:"First Name",error:!!e.firstError.value,"bottom-slots":""},{error:n(()=>[te(p(e.firstError.value),1)]),_:2},1032,["modelValue","onUpdate:modelValue","error"])]),o("div",Ot,[l(P,{modelValue:t[7],"onUpdate:modelValue":i=>t[7]=i,dense:"",label:"Last Name",error:!!e.lastError.value,"bottom-slots":""},{error:n(()=>[te(p(e.lastError.value),1)]),_:2},1032,["modelValue","onUpdate:modelValue","error"])]),o("div",zt,[l(P,{modelValue:t[16],"onUpdate:modelValue":i=>t[16]=i,dense:"",label:"Phone",error:!!e.phoneError.value,"bottom-slots":""},{error:n(()=>[te(p(e.phoneError.value),1)]),_:2},1032,["modelValue","onUpdate:modelValue","error"])]),o("div",Rt,[l(K,{behavior:"menu",position:"top middle",modelValue:t.contact,"onUpdate:modelValue":i=>t.contact=i,dense:"",label:"Relationship",options:e.formOptions.relationships,error:!!e.relationshipError.value,"bottom-slots":""},{error:n(()=>[te(p(e.relationshipError.value),1)]),_:2},1032,["modelValue","onUpdate:modelValue","options","error"])])]),o("div",Mt,[o("div",Dt,[l(E,{onClick:i=>e.cancelEdit(b),color:"secondary",label:"Cancel",class:"q-mr-sm"},null,8,["onClick"]),l(E,{type:"submit",color:"info",label:"Save"})])])],40,Nt)])):m("",!0)]),_:2},1024),b<e.allContacts.length-1?(a(),k(oe,{key:0})):m("",!0)],8,kt))),128))]),_:1},8,["class"])]),_:1}),e.editing?m("",!0):(a(),k(be,{key:0,class:"text-right"},{default:n(()=>[l(E,{onClick:e.back,color:"secondary",label:"Back",class:"q-mr-sm"},null,8,["onClick"]),l(E,{onClick:e.save,color:"info",label:"Continue",disabled:e.savedEmergencyContacts.length===0},null,8,["onClick","disabled"])]),_:1}))])]),_:1},8,["name","title"])}var Qt=se(ct,[["render",Bt]]);const Ft=le({props:{title:String,step:Number,name:Number},setup(){const e=we(),s=N(3),y=N(!1),C=ke(),f=ne(),{formOptions:_,disabilityForm:t,hasAffirmative:b,hasVets:i,goToVoluntary:z}=Q(ie()),{savedHistory:R}=Q(de()),{addHistory:F,updateHistory:L,removeHistory:A,employeeData:V}=de(),U=N([]),{getVoluntaryFormOptions:T}=ie(),{toggleLoader:D,profile:I}=f,G=O({craft:O().required("Select a Craft!").nullable(),experience:O().required("Select Experience").nullable(),employment:O().required("Select Employment Status").nullable()}),{meta:x,errors:ee,handleSubmit:M}=ye({validationSchema:G,initialValues:{craft:I[40]?{value:I[40].value,label:I[40].label}:null,experience:V[53]?{value:V[53],label:V[54]}:null,employment:V[55]?{value:V[55],label:V[56]}:null}}),{value:H}=v("craft"),{value:Y}=v("experience"),{value:d}=v("employment");_e(I,()=>{I[40].value!==H.value.value&&(H.value={value:I[40].value,label:I[40].label})});const h=M(async c=>{console.log(z.value);const r={40:{value:c.craft.value,label:c.craft.label},42:{value:c.experience.value,label:c.experience.label},44:{value:c.employment.value,label:c.employment.label},39:{value:new Date}};if(z.value){const g={next:t.value?6:b.value?7:i.value?8:0,values:r,completed:!0};D(!0),await T(),e.push({name:"voluntary"}),D(!1),await f.updateProfile(g),f.submitProfileToQB()}else{const g={next:0,values:r,completed:!0};D(!0),await f.updateProfile(g),f.submitProfileToQB(),e.replace({path:"/"}),D(!1)}}),u=j(()=>{const c=R.value.concat(U.value);return c.sort(function(r,g){return r.editing&&!g.editing?-1:!r.editing&&g.editing?1:0}),c}),B=j(()=>u.value.filter(r=>r.editing).length>0);function J(){const c={3:u.value.length+1,6:"",7:"",10:"",11:"",12:"",13:"",15:"",16:"",editing:!0,new:!0,company:null,craft:null};U.value.push(c)}function Z(){const c={next:4};f.updateProfile(c)}function re(){const c={next:2};f.updateProfile(c)}function W(c){R.value[c].editing=!0}function ce(c){const r=u.value[c];console.log(r),C.dialog({title:"Alert",message:"Are you sure you want to remove?",cancel:!0,persistent:!0}).onOk(()=>{A(r[3])})}function $(c,r){const g=u.value[r];g[6]=c.company.value,g[7]=c.company.label,g[15]=c.craft.value,g[16]=c.craft.label,g.editing=!1,g.new?(g.new=!1,U.value.forEach((ve,Ee)=>{ve[3]===g[3]&&U.value.splice(Ee,1)}),F(g)):L(g)}function me(c){const r=u.value[c];console.log(r),r.new?U.value.forEach((g,ve)=>{g[3]===r[3]&&U.value.splice(ve,1)}):u.value[c].editing=!1}function pe(){y.value?(s.value=3,y.value=!1):(y.value=!0,s.value=u.value.length)}return{save:Z,back:re,allHistory:u,addNewRow:J,editItem:W,removeItem:ce,saveItem:$,cancelEdit:me,formOptions:_,editing:B,date:Ue,show:s,expanded:y,adjustRows:pe,formMeta:x,formErrors:ee,submitUpdate:h,craft:H,experience:Y,employment:d}}}),Lt={class:"row"},Ht={class:"col-12 col-md-4 q-px-xs"},Jt={class:"text-caption"},jt={class:"col-12 col-md-4 q-px-xs"},Tt={class:"text-caption"},Yt={class:"col-12 col-md-4 q-px-xs"},Zt={class:"text-caption"},Wt={key:0,class:"text-body2 text-dark"},Kt={class:"row q-py-sm"},Xt={class:"col-12 col-md-6"},Gt={key:0,class:"text-body2 text-primary text-italic q-pb-sm q-pl-md"},xt=["id"],eo={class:"col-12 col-md-3"},to=o("div",{class:"text-primary"},"Company",-1),oo={class:"text-dark q-pl-sm"},lo=o("div",{class:"text-primary"},"Location",-1),so={class:"text-dark q-pl-sm"},ao=o("div",{class:"text-primary"},"Job Title",-1),no={class:"text-dark q-pl-sm"},ro=o("div",{class:"text-primary"},"Start Date",-1),io={class:"text-dark q-pl-sm"},uo=o("div",{class:"text-primary"},"End Date",-1),co={class:"text-dark q-pl-sm"},mo={key:1,class:"items-center"},po=["onSubmit"],vo={class:"row"},fo={class:"col-12 col-md-2 q-pr-md"},bo={class:"col-12 col-md-2 q-pr-md"},ho={class:"col-12 col-md-2 q-pr-md"},yo={class:"col-12 col-md-2 q-pr-md"},$o={class:"col-12 col-md-2 q-pr-md"},go={class:"col-12 col-md-2 q-pr-md"},qo={class:"row q-mt-md"},ko={class:"col text-right"},Co={class:"row q-pt-md"},Vo={key:0,class:"col-12 text-right"},Eo=te("Show Less"),So=te("Show More");function wo(e,s,y,C,f,_){return a(),k($e,{name:e.name,title:e.title,done:e.step>3},{default:n(()=>[o("div",null,[o("form",{onSubmit:s[3]||(s[3]=fe((...t)=>e.submitUpdate&&e.submitUpdate(...t),["prevent"]))},[l(ue,{class:"q-px-xs"},{default:n(()=>[l(X,{class:"q-pb-none"},{default:n(()=>[o("div",Lt,[o("div",Ht,[l(K,{behavior:"menu",position:"top middle",dense:"",modelValue:e.craft,"onUpdate:modelValue":s[0]||(s[0]=t=>e.craft=t),label:"Primary Craft",options:e.formOptions.crafts,error:!!e.formErrors.craft,"bottom-slots":""},{error:n(()=>[o("div",Jt,p(e.formErrors.craft),1)]),_:1},8,["modelValue","options","error"])]),o("div",jt,[l(K,{behavior:"menu",position:"top middle",dense:"",modelValue:e.experience,"onUpdate:modelValue":s[1]||(s[1]=t=>e.experience=t),label:"Years of Experience",options:e.formOptions.experience,error:!!e.formErrors.experience,"bottom-slots":""},{error:n(()=>[o("div",Tt,p(e.formErrors.experience),1)]),_:1},8,["modelValue","options","error"])]),o("div",Yt,[l(K,{behavior:"menu",position:"top middle",dense:"",modelValue:e.employment,"onUpdate:modelValue":s[2]||(s[2]=t=>e.employment=t),label:"Current Employment Status",options:e.formOptions.employment,error:!!e.formErrors.employment,"bottom-slots":""},{error:n(()=>[o("div",Zt,p(e.formErrors.employment),1)]),_:1},8,["modelValue","options","error"])])])]),_:1}),e.$q.screen.gt.sm?m("",!0):(a(),k(oe,{key:0})),e.editing?m("",!0):(a(),k(X,{key:1,class:S(e.$q.screen.lt.md?"q-px-xs":"")},{default:n(()=>[e.$q.screen.gt.sm?m("",!0):(a(),w("div",Wt,"Work History")),o("div",Kt,[o("div",Xt,[l(E,{size:e.$q.screen.gt.sm?"md":"sm",color:"accent",label:e.allHistory.length>0?"Add More History":"Add Employment History",onClick:e.addNewRow,icon:"add"},null,8,["size","label","onClick"])])])]),_:1},8,["class"])),e.editing?(a(),k(oe,{key:2})):m("",!0),l(X,{class:S([e.editing?"q-pt-sm":"q-pt-none",e.$q.screen.gt.sm?"":"q-px-xs"])},{default:n(()=>[e.allHistory.length===0?(a(),w("div",Gt,"Add your employment history. You may enter this information later.")):m("",!0),(a(!0),w(Ve,null,Ce(e.allHistory,(t,b)=>(a(),w("div",{id:t[3],key:b},[e.expanded||b+1<=e.show?(a(),k(ue,{key:0,class:"q-px-sm q-pt-xs q-pb-sm",flat:""},{default:n(()=>[t.editing?m("",!0):(a(),w("div",{key:0,class:S(["row items-center",e.$q.screen.gt.sm?"text-body2":"text-caption"])},[o("div",eo,[o("div",null,[to,o("div",oo,p(t[7]),1)])]),o("div",{class:S(e.$q.screen.gt.sm?"col-2":"hidden")},[o("div",null,[lo,o("div",so,p(t[10]!==""?t[10]:"N/A"),1)])],2),o("div",{class:S(e.$q.screen.gt.sm?"col-2":"col-12 q-pt-md")},[o("div",null,[ao,o("div",no,p(t[16])+" "+p(t[11]),1)])],2),o("div",{class:S(e.$q.screen.gt.sm?"col-2":"col-6 q-pt-md")},[o("div",null,[ro,o("div",io,p(e.date.formatDate(t[12],"MM-DD-YYYY")),1)])],2),o("div",{class:S(e.$q.screen.gt.sm?"col-2":"col-6 q-pt-md")},[o("div",null,[uo,o("div",co,p(e.date.formatDate(t[13],"MM-DD-YYYY")),1)])],2),o("div",{class:S(e.$q.screen.gt.sm?"col-1 text-right":"col-12 q-pt-md text-right")},[o("div",null,[l(E,{size:"sm",round:"",onClick:i=>e.editItem(b),color:"secondary",icon:"edit",class:"q-mr-sm"},null,8,["onClick"]),l(E,{size:"sm",round:"",onClick:i=>e.removeItem(b),color:"primary",icon:"delete"},null,8,["onClick"])])],2)],2)),t.editing?(a(),w("div",mo,[o("form",{onSubmit:fe(i=>e.saveItem(t,b),["prevent"])},[o("div",vo,[o("div",fo,[l(K,{modelValue:t.company,"onUpdate:modelValue":i=>t.company=i,dense:"",label:"Company",options:e.formOptions.companies},null,8,["modelValue","onUpdate:modelValue","options"])]),o("div",bo,[l(K,{modelValue:t.craft,"onUpdate:modelValue":i=>t.craft=i,dense:"",label:"Craft",options:e.formOptions.crafts},null,8,["modelValue","onUpdate:modelValue","options"])]),o("div",ho,[l(P,{modelValue:t[11],"onUpdate:modelValue":i=>t[11]=i,dense:"",label:"Job Title"},null,8,["modelValue","onUpdate:modelValue"])]),o("div",yo,[l(P,{modelValue:t[10],"onUpdate:modelValue":i=>t[10]=i,dense:"",label:"Location"},null,8,["modelValue","onUpdate:modelValue"])]),o("div",$o,[l(P,{type:"date",modelValue:t[12],"onUpdate:modelValue":i=>t[12]=i,dense:"",filled:"",hint:"Start Date"},null,8,["modelValue","onUpdate:modelValue"])]),o("div",go,[l(P,{type:"date",modelValue:t[13],"onUpdate:modelValue":i=>t[13]=i,dense:"",filled:"",hint:"End Date"},null,8,["modelValue","onUpdate:modelValue"])])]),o("div",qo,[o("div",ko,[l(E,{onClick:i=>e.cancelEdit(b),color:"secondary",label:"Cancel",class:"q-mr-sm"},null,8,["onClick"]),l(E,{type:"submit",color:"info",label:"Save"})])])],40,po)])):m("",!0)]),_:2},1024)):m("",!0),b<e.allHistory.length-1?(a(),k(oe,{key:1})):m("",!0)],8,xt))),128)),e.allHistory.length>e.show||e.expanded?(a(),k(oe,{key:1})):m("",!0),o("div",Co,[e.allHistory.length>e.show||e.expanded?(a(),w("div",Vo,[l(E,{round:"",color:"secondary",onClick:e.adjustRows,icon:e.expanded?"expand_less":"expand_more"},{default:n(()=>[e.expanded?(a(),k(ge,{key:0,anchor:"top middle"},{default:n(()=>[Eo]),_:1})):m("",!0),e.expanded?m("",!0):(a(),k(ge,{key:1,anchor:"top middle"},{default:n(()=>[So]),_:1}))]),_:1},8,["onClick","icon"])])):m("",!0)])]),_:1},8,["class"])]),_:1}),e.editing?m("",!0):(a(),k(be,{key:0,class:"text-right"},{default:n(()=>[l(E,{onClick:e.back,color:"secondary",label:"Back",class:"q-mr-sm"},null,8,["onClick"]),l(E,{type:"submit",color:"info",label:"Continue"})]),_:1}))],32)])]),_:1},8,["name","title","done"])}var _o=se(Ft,[["render",wo]]);const Uo=le({components:{selectJob:Me,personalInfo:dt,emergencyContact:Qt,workHistory:_o},setup(){const{step:e}=Q(ne()),s=N(null);return{step:e,jobSelection:s,jobOptions:[{label:"Default Job",value:0}]}}});function Po(e,s,y,C,f,_){const t=ae("select-job"),b=ae("personal-info"),i=ae("emergency-contact"),z=ae("work-history");return a(),w("div",null,[l(Ae,{modelValue:e.step,"onUpdate:modelValue":s[0]||(s[0]=R=>e.step=R),vertical:"",animated:"","done-color":"info","active-color":"dark","inactive-color":"secondary",class:S(e.$q.screen.lt.md?"q-px-none q-mx-none":"")},{default:n(()=>[l(t,{title:"Select a Job",step:e.step,name:0,done:e.step>0},null,8,["step","done"]),l(b,{title:"Personal Information",step:e.step,name:1,done:e.step>1},null,8,["step","done"]),l(i,{title:"Contact Information",step:e.step,name:2,done:e.step>2},null,8,["step","done"]),l(z,{title:"Employment Information",step:e.step,name:3,done:e.step>3},null,8,["step","done"])]),_:1},8,["modelValue","class"])])}var No=se(Uo,[["render",Po]]);const Ao=le({components:{profileStepper:No},setup(){}});function Io(e,s,y,C,f,_){const t=ae("profile-stepper");return a(),w("div",null,[l(t)])}var Oo=se(Ao,[["render",Io]]);const zo=le({components:{Profile:Oo},setup(){const e=N(0),{getFormOptions:s}=ie(),{loadingState:y}=Q(ne());return s(),{step:e,loadingState:y}}}),Ro={key:0,class:"absolute-center"},Mo={key:1,class:"row"},Do={class:"col-12 q-pt-sm"},Bo=o("div",{class:"q-pl-sm"},[o("div",{class:"text-h6 text-dark"}," Complete Application "),o("div",{class:"text-body1 text-secondary text-italic"}," Please complete the application. ")],-1);function Qo(e,s,y,C,f,_){const t=ae("profile");return a(),k(Ne,{style:{"max-width":"100vw"}},{default:n(()=>[e.loadingState?(a(),w("div",Ro,[l(Pe,{color:"primary",size:"5em"})])):m("",!0),e.loadingState?m("",!0):(a(),w("div",Mo,[o("div",Do,[l(ue,{flat:""},{default:n(()=>[l(X,{class:S(e.$q.screen.lt.md?"q-px-xs":"")},{default:n(()=>[Bo]),_:1},8,["class"]),l(X,null,{default:n(()=>[l(t)]),_:1})]),_:1})])]))]),_:1})}var Jo=se(zo,[["render",Qo]]);export{Jo as default};
