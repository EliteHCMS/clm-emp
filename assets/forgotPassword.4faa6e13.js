import{Q as O}from"./QImg.44b38e61.js";import{_ as X,as as Y,r as f,c as P,w as $,aq as Z,u,ad as k,ae as l,b0 as s,v as g,d as a,ah as i,y as q,a_ as b,aj as d,b3 as ee,b4 as ae,a$ as I,b as C,ag as S,bz as te,au as T,z as se,b1 as le,ai as E,b2 as re}from"./index.feb3e774.js";import{Q as oe}from"./QForm.09f2d8df.js";import{Q as ne}from"./QPage.2eb04e11.js";import{u as ue}from"./use-quasar.73149cc2.js";import{c as V,u as M}from"./array.f9e54c1b.js";import{u as ie}from"./i18n.d78fdd43.js";import{p as me}from"./VueTelInput.8f2695f2.js";import{_ as de}from"./languageSelector.efd50ab0.js";import{c as pe}from"./carousel.959320a7.js";import{q as ce}from"./quickbase.cad46913.js";import"./_commonjsHelpers.d497b07e.js";import"./QSelect.a4945520.js";import"./QMenu.4f6ff5df.js";import"./position-engine.a7b2f1f2.js";import"./selection.b9a27918.js";import"./use-panel.ae37fef4.js";import"./touch.6a3c5155.js";import"./dayjs.53592b88.js";import"./localForage.7c0fa0a6.js";import"./index.7dbe61ef.js";const ve={key:0,class:"col-md-7 col-lg-8 col-lx-8"},fe={class:"col-xs-12 col-sm-12 col-md-5 col-lg-4 col-lx-4 row justify-center items-center"},ge={key:0,class:"text-dark"},be={key:1,class:"text-dark"},ye={key:0,class:"row q-col-gutter-xs"},he={class:"text-grey-6",tabindex:"4"},xe={class:"text-grey-6",tabindex:"5"},_e={class:"row justify-center"},Ne={__name:"forgotPassword",setup(we){const R=ue(),A=Y(),{t:h}=ie(),p=f(!1),c=f(!1),j=f(10),r=f("username"),o=f("phoneNumber"),y=f(null),D=P(()=>p.value||o.value==="phoneNumber"?V().email(`${h("validEmailIsRequired")}`).nullable():V().email(`${h("validEmailIsRequired")}`).required()),F=P(()=>{if(c.value||o.value==="email")return V().nullable();{const e=new RegExp("^[0-9]{"+j.value+"}","g");return V().matches(e,{excludeEmptyString:!0,message:`${h("validPhoneIsRequired")}`}).required()}}),{value:x,errorMessage:B,meta:K}=M("firstName"),{value:_,errorMessage:U,meta:H}=M("lastName"),{errorMessage:Q,value:v}=M("email",D),{errorMessage:N,value:m}=M("phone",F);$(Q,e=>{e||v.value===""?c.value=!1:c.value=!0}),$(v,e=>{(!e||e==="")&&(c.value=!1)}),$(N,e=>{e||m.value===""?p.value=!1:p.value=!0}),$(m,e=>{(!e||e==="")&&(p.value=!1)});const W=e=>{y.value=e},G=e=>{j.value=e},z=P(()=>!(p.value||c.value)),L=async()=>{const e={userType:"Candidate",firstName:x.value,lastName:_.value,email:c.value?v.value:null,phoneNumber:p.value?`+${y.value?y.value.dialCode:"1"}${m.value}`:null},{data:t}=await ce.resetPassword(e);if(t.length===0)R.notify({position:"top-right",type:"negative",message:`${h("noUserFoundWithInformation")}`});else{const w=t[0][76];A.push({name:"code-confirmation",query:{p:`${y.value?y.value.dialCode:"1"}${m.value}`,rid:w[3],ac:!0,send:!0}})}},J=e=>{r.value==="username"&&!z.value?L():e.preventDefault()};return(e,t)=>{const w=Z("router-link");return u(),k(ne,{class:"window-height window-width row"},{default:l(()=>[s(R).screen.lt.md?i("",!0):(u(),g("div",ve,[a(pe)])),q("div",fe,[a(re,{class:"auth-card",flat:""},{default:l(()=>[a(b,{style:{"padding-left":"30px","padding-right":"30px"}},{default:l(()=>[a(O,{src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo.svg",fit:"scale-down",class:"auth-logo full-width"})]),_:1}),a(b,{class:"text-center auth-description"},{default:l(()=>[o.value==="email"&&r.value==="username"?(u(),g("p",ge,d(e.$t("enterEmailSendCode")),1)):i("",!0),o.value==="phoneNumber"&&r.value==="username"?(u(),g("p",be,d(e.$t("enterPhoneSendCode")),1)):i("",!0)]),_:1}),a(b,null,{default:l(()=>[a(oe,{class:"q-px-sm q-pt-sm",onSubmit:t[7]||(t[7]=ee(()=>{},["prevent"])),onKeyup:ae(J,["enter"])},{default:l(()=>[r.value==="username"?(u(),g("div",ye,[a(I,{class:"col-xs-12 col-sm-6 q-pb-lg",clearable:"",outlined:"",modelValue:s(x),"onUpdate:modelValue":t[0]||(t[0]=n=>C(x)?x.value=n:null),type:"text",autocomplete:"given-name",label:e.$t("firstName"),tabindex:"1",name:"firstName",error:!!(s(B)&&s(K).validated),"error-message":s(B)},{prepend:l(()=>[a(S,{name:"person"})]),_:1},8,["modelValue","label","error","error-message"]),a(I,{class:"col-xs-12 col-sm-6",clearable:"",outlined:"",modelValue:s(_),"onUpdate:modelValue":t[1]||(t[1]=n=>C(_)?_.value=n:null),type:"text",autocomplete:"family-name",label:e.$t("lastName"),tabindex:"2",name:"lastName",error:!!(s(U)&&s(H).validated),"error-message":s(U)},{prepend:l(()=>[a(S,{name:"person_outline"})]),_:1},8,["modelValue","label","error","error-message"])])):i("",!0),o.value==="email"&&r.value==="username"?(u(),k(I,{key:1,style:{"padding-bottom":"0px"},clearable:"",outlined:"",modelValue:s(v),"onUpdate:modelValue":t[3]||(t[3]=n=>C(v)?v.value=n:null),type:"email",label:e.$t("email"),tabindex:"3",error:!!s(Q),"error-message":s(Q),readonly:r.value!=="username"},te({prepend:l(()=>[a(S,{name:"email"})]),_:2},[r.value!=="username"?{name:"append",fn:l(()=>[a(T,{round:"",dense:"",flat:"",icon:"edit",onClick:t[2]||(t[2]=n=>{r.value="username"})})])}:void 0]),1032,["modelValue","label","error","error-message","readonly"])):i("",!0),o.value==="phoneNumber"&&r.value==="username"?(u(),k(me,{key:2,outlined:"",modelValue:s(m),"onUpdate:modelValue":t[4]||(t[4]=n=>C(m)?m.value=n:null),label:e.$t("phoneNumber"),tabindex:"3",onMaxLengthChanged:G,style:se(s(N)?"padding-bottom: 20px;":"padding-bottom: 0px;"),error:!!s(N),"error-message":s(N),onCountryChanged:W},null,8,["modelValue","label","style","error","error-message"])):i("",!0),a(b,{class:"text-right q-pa-none"},{default:l(()=>[o.value==="email"?(u(),g("a",{key:0,onClick:t[5]||(t[5]=n=>o.value="phoneNumber"),class:"text-grey-6",href:"javascript:void(0);",tabindex:"4"},d(e.$t("usePhoneNumber")),1)):i("",!0),o.value==="phoneNumber"?(u(),g("a",{key:1,onClick:t[6]||(t[6]=n=>o.value="email"),class:"text-grey-6",href:"javascript:void(0);",tabindex:"4"},d(e.$t("useEmail")),1)):i("",!0)]),_:1})]),_:1},8,["onKeyup"])]),_:1}),a(le,{class:"q-px-lg"},{default:l(()=>[r.value==="username"?(u(),k(T,{key:0,unelevated:"",size:"lg",color:"primary",class:"full-width text-white",label:e.$t("resetPassword"),tabindex:"3",disabled:s(z),onClick:L},null,8,["label","disabled"])):i("",!0)]),_:1}),a(b,{class:"text-center q-pa-sm"},{default:l(()=>[q("p",he,[a(w,{to:"/login",class:"text-grey-6"},{default:l(()=>[E(d(e.$t("returnToLogin")),1)]),_:1})]),q("p",xe,[E(d(e.$t("needAnAccountQuestion"))+" ",1),a(w,{to:"/register",class:"text-grey-6"},{default:l(()=>[E(d(e.$t("register")),1)]),_:1})])]),_:1}),a(b,{class:"q-pl-lg q-pa-sm"},{default:l(()=>[q("div",_e,[a(de,{dense:"",borderless:""})])]),_:1})]),_:1})])]),_:1})}}};var Ke=X(Ne,[["__scopeId","data-v-f757dbb4"]]);export{Ke as default};
