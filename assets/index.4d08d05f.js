import{k as L,as as z,r as v,w as D,_ as T,u as a,v as _,y as s,ad as h,ae as o,d as t,aj as g,a$ as l,av as q,b3 as k,ah as i,F as P,ar as R,ao as U,bI as H,o as Y,c as J,A as N,ai as K,ag as W,bH as X,aO as E,au as Z,aq as B}from"./index.7b71c5b1.js";import{Q as ee}from"./QPage.347d3b59.js";import{b as j,i as A}from"./quickbase.b30588dc.js";import{Q as te}from"./QImg.2864d6cf.js";import"./_commonjsHelpers.d497b07e.js";import"./dayjs.08f05e93.js";import"./localForage.ce4a5f27.js";import"./index.7dbe61ef.js";import"./i18n.b11063b9.js";const se=L({components:{},setup(){const e=z(),{toolsForCraft:n,toolListInstructions:d,toolListName:y}=j(),{updateAssessment:m,startToolChecklist:$,finishToolChecklist:r}=A(),p=v([]),C=v(0);async function V(){await $(),C.value=1}async function F(){await m({next:1,type:"tools",values:p.value}),await r()&&e.replace({path:"/thanks"})}function b(u,w){console.log(u)}return D(p,(u,w)=>{console.log(u)}),{toolsForCraft:n,save:F,pushItem:b,selected:p,step:C,updateAssessment:m,toolListInstructions:d,start:V,toolListName:y}}}),oe={class:"row justify-center"},ae={class:"col-12 col-md-10 q-pt-sm"},le={class:"text-h6 text-primary"},ne={class:"text-body1 text-dark"},re=s("div",{class:"text-h6 text-dark"}," Tool Assessment ",-1),ie=s("div",{class:"text-body1 text-secondary text-italic"}," Please select the tools you own from the following list. ",-1),ue={class:"row justify-center"},ce={class:"row items-center"},de={class:"col-11"},me={class:"text-body1 text-primary"},pe={class:"col-1"},fe={class:"row q-pt-md"},ve={class:"col-12 text-right"};function _e(e,n,d,y,m,$){return a(),_("div",null,[s("div",oe,[s("div",ae,[e.step===0?(a(),h(k,{key:0,class:"q-mt-xl"},{default:o(()=>[t(l,null,{default:o(()=>[s("div",le,g(e.toolListName),1)]),_:1}),t(l,null,{default:o(()=>[s("div",ne,g(e.toolListInstructions),1)]),_:1}),t(l,{class:"text-right"},{default:o(()=>[t(q,{color:"primary",label:"Continue",onClick:e.start},null,8,["onClick"])]),_:1})]),_:1})):i("",!0),e.step===1?(a(),h(k,{key:1,flat:""},{default:o(()=>[t(l,null,{default:o(()=>[re,ie]),_:1}),t(l,null,{default:o(()=>[s("div",ue,[(a(!0),_(P,null,R(e.toolsForCraft,r=>(a(),_("div",{class:"col-12 col-md-6",key:r[3]},[t(k,{class:"tool-card q-ma-sm"},{default:o(()=>[t(l,null,{default:o(()=>[t(te,{style:{"max-height":"150px"},fit:"scale-down",src:r[11]},null,8,["src"])]),_:2},1024),t(U),t(l,null,{default:o(()=>[s("div",ce,[s("div",de,[s("div",me,g(r[8]),1)]),s("div",pe,[t(H,{modelValue:e.selected,"onUpdate:modelValue":n[0]||(n[0]=p=>e.selected=p),color:"primary",val:r.value},null,8,["modelValue","val"])])])]),_:2},1024)]),_:2},1024)]))),128))]),s("div",fe,[s("div",ve,[t(q,{color:"primary",onClick:e.save,label:"Continue"},null,8,["onClick"])])])]),_:1})]),_:1})):i("",!0)])])])}var he=T(se,[["render",_e]]);const ye=L({components:{},setup(){const e=z(),n=v(0),{testForCraft:d,startLevelForTest:y}=j(),{getAllQuestions:m,questionsLoaded:$,loadQuestionGroup:r,completeQuestion:p,startAssessment:C,finishAssessment:V,updateAssessment:F}=A(),b=v(!0),u=v(null),w=v(null),f=v([]),x=v(!1),Q=v(!1);Y(async()=>{$||await m(),b.value=!1,f.value=await r(y,1)});const I=J(()=>{const c=f.value?f.value.length:0,S=Math.floor(Math.random()*(c-0));return f.value&&f.value.length>0?f.value[S]:null});D(u,(c,S)=>{c&&(w.value=null)});async function M(){if(!u.value)w.value="Select an answer";else{Q.value=!0,w.value=null,I.value.response=u.value;const{data:c}=await p(I.value);if(u.value=null,c.nextQuestions.length>0)f.value=c.nextQuestions,Q.value=!1;else try{f.value=await r(c.scope,c.iteration),Q.value=!1}catch{f.value=[];const{success:O}=await V();O&&d[18]==="Yes"?F({next:1}):e.replace({path:"/thanks"})}}}async function G(){x.value=!0;try{await C(),n.value=1}catch(c){console.log(c)}}return{step:n,testForCraft:d,loading:b,currentQuestion:I,response:u,responseError:w,submit:M,launchAssessment:G,starting:x,submitting:Q}}}),ge={key:0,class:"row justify-center"},ke={class:"col-12 col-md-10 q-pt-sm"},$e={class:"text-h6 text-primary"},we={class:"text-body1 text-dark"},be={class:"text-h5 text-primary"},Ce={class:"q-pa-sm"},Qe={class:"text-body1 q-pb-md"},qe=s("hr",null,null,-1),Ae={key:0,class:"col-5 text-center"},Ve=["src","alt"],Fe={key:1,class:"absolute-center"};function Ie(e,n,d,y,m,$){return a(),_("div",null,[e.loading?i("",!0):(a(),_("div",ge,[s("div",ke,[e.step===0?(a(),h(k,{key:0,class:"q-mt-xl"},{default:o(()=>[t(l,null,{default:o(()=>[s("div",$e,g(e.testForCraft[29]),1)]),_:1}),t(l,null,{default:o(()=>[s("div",we,g(e.testForCraft[28]),1)]),_:1}),t(l,{class:"text-right"},{default:o(()=>[t(q,{color:"primary",label:"Continue",onClick:e.launchAssessment,loading:e.starting,disabled:e.starting},null,8,["onClick","loading","disabled"])]),_:1})]),_:1})):i("",!0),e.step===1?(a(),h(k,{key:1,flat:""},{default:o(()=>[t(l,null,{default:o(()=>[s("div",be,g(e.testForCraft[29]),1)]),_:1}),e.currentQuestion?(a(),h(l,{key:0},{default:o(()=>[t(k,{flat:""},{default:o(()=>[t(l,null,{default:o(()=>[s("div",{class:N(e.currentQuestion.hasImage?"row justify-between items-start":"row justify-center items-start")},[s("div",{class:N(e.currentQuestion.hasImage?"col-6":"col-10")},[t(k,null,{default:o(()=>[t(l,null,{default:o(()=>[s("div",Ce,[s("div",Qe,[K(g(e.currentQuestion[9])+" ",1),e.responseError?(a(),h(W,{key:0,size:"md",class:"q-ml-sm",name:"error",color:"red"})):i("",!0)]),t(X,{options:e.currentQuestion[19],type:"radio",modelValue:e.response,"onUpdate:modelValue":n[0]||(n[0]=r=>e.response=r)},null,8,["options","modelValue"])])]),_:1}),qe,t(l,{class:"text-right"},{default:o(()=>[t(q,{color:"primary",label:"Submit",onClick:e.submit,loading:e.submitting,disabled:e.submitting},null,8,["onClick","loading","disabled"])]),_:1})]),_:1})],2),e.currentQuestion.hasImage?(a(),_("div",Ae,[s("img",{class:"question-img",src:e.currentQuestion.imageData.src,alt:e.currentQuestion.imageData.alt},null,8,Ve)])):i("",!0)],2)]),_:1})]),_:1})]),_:1})):i("",!0)]),_:1})):i("",!0)])])),e.loading?(a(),_("div",Fe,[t(E,{color:"primary",size:"5em"})])):i("",!0)])}var Se=T(ye,[["render",Ie]]);const Le=L({components:{tools:he,test:Se},setup(){const e=A(),{dataLoaded:n}=A(),{step:d,loading:y}=Z(e),{getCraftTools:m}=j();return m(),n(),{step:d,loading:y}}}),Te={key:0,class:"row"},je={class:"col"},xe={key:1,class:"absolute-center"};function Ne(e,n,d,y,m,$){const r=B("tools"),p=B("test");return a(),h(ee,{class:"window-height window-width"},{default:o(()=>[e.loading?i("",!0):(a(),_("div",Te,[s("div",je,[e.step===1?(a(),h(r,{key:0})):i("",!0),e.step===0?(a(),h(p,{key:1})):i("",!0)])])),e.loading?(a(),_("div",xe,[t(E,{color:"primary",size:"5em"})])):i("",!0)]),_:1})}var Ue=T(Le,[["render",Ne]]);export{Ue as default};
