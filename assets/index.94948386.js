import{aG as j,aa as O,ab as b,ap as P,q as z,ak as R,l as q,r as Q,w as F,_ as I,p as r,t as _,v as l,a5 as y,a0 as n,d as o,a1 as c,af as w,a6 as $,a3 as D,a2 as p,F as G,a9 as M,aH as E,am as H,aI as K,o as L,c as U,y as T,a8 as Y,Q as J,aE as X,aJ as V,ao as W,a4 as A,a7 as Z}from"./index.45189184.js";const tt=25,x=j("assessment",{state:()=>({step:1,loading:!0,tools:[],testData:{allQuestions:[],selectedQuestions:[],completedQuestions:[],nextQuestions:null,testStatus:"In Progress",currentScope:0,loadIteration:0,qb:{testRecord:{3:{field:"Record ID#",value:24712},6:{field:"Related Kiosk Profile"},13:{field:"Related Hiring Center"},15:{field:"Related Employee"},17:{field:"Related Craft"},23:{field:"Related Available Language"},34:{field:"Test Completion Timestamp"},37:{field:"Test Status"},testQuestions:[{6:{field:"Related Test"},7:{field:"Related All Test Question"},11:{field:"Status"},questionResponse:[{6:{field:"Related Test Question"},8:{field:"Related Question Alternative"}}]}]}}},qb:null}),getters:{questionsLoaded(){return this.testData.allQuestions.length>0},nextQuestions(){return this.testData.nextQuestions?this.testData.nextQuestions:null},completedOnIteration(){return this.testData.completedQuestions.filter(t=>t.iteration===this.testData.loadIteration)},algo(){const t=this.testData.completedQuestions.filter(s=>s.selection[14]===1&&s.iteration===this.testData.loadIteration);return t!==void 0?t:[]},ratio(){return isNaN(this.algo.length/this.completedOnIteration.length)?0:(this.algo.length/this.completedOnIteration.length).toFixed(2)},nextScope(){return this.completedOnIteration.length>0?this.ratio>.6?this.testData.currentScope<6?this.testData.currentScope+1:this.testData.currentScope:this.ratio===.6?this.testData.currentScope:this.testData.currentScope>2?this.testData.currentScope-1:this.testData.currentScope:this.testData.currentScope},nextIteration(){return this.testData.loadIteration+1},timeToStop(){const t=this.testData.completedQuestions.filter(e=>e[23]>this.testData.currentScope).length,s=this.testData.completedQuestions.filter(e=>e[23]<this.testData.currentScope).length;return t>0&&s>0&&this.testData.completedQuestions.length>=tt}},actions:{async submitToQB(){const{profile:t}=O(),{hiringCenter:s,testForCraft:e}=b(),{devEmployee:a}=P();this.testData.qb.testRecord[6].value=t[3].value,this.testData.qb.testRecord[13].value=s[3].value,this.testData.qb.testRecord[15].value=a[3],this.testData.qb.testRecord[17].value=e[15],this.testData.qb.testRecord[23].value=e[16],this.testData.qb.testRecord[34].value=Date.now(),this.testData.qb.testRecord[37].value="Complete";const u=[];return this.testData.completedQuestions.forEach(d=>{const i={6:{value:this.testData.qb.testRecord[3].value},7:{value:d[8]},11:{value:"Complete"},questionResponse:[{6:{value:0},8:{value:d.selection[3]}}]};u.push(i)}),this.testData.qb.testRecord.testQuestions=u,this.testData.qb.testRecord},updateAssessment(t){this.step=t.next,t.type==="tools"&&(this.tools=t.values)},updateStep(t){this.step=t},dataLoaded(){this.loading=!1},async getAllQuestions(){const{testForCraft:t}=b();if(this.questionsLoaded)return!0;if(t){const{data:s}=await z.doQuery({from:"bqamed7sr",where:`{'6'.EX.'${t[9]}'}`,select:[3,6,8,9,10,11,12,13,14,18,19,20,21,22,23,24],sortBy:[{fieldId:11,order:"ASC"}]});if(s)return s.forEach(async e=>{e[20]==="Yes"&&(e.hasImage=!0,e.imageData={src:e[22],alt:e[21]}),e[19]=await R.converter(e[19]),e[24]=await R.converter(e[24]),e[19].forEach(a=>{a.value=a[3],a.label=a[6]})}),this.testData.allQuestions=s,!0;throw"Something went wrong"}else throw"No test for craft"},async loadQuestionGroup(t,s){if(t!==void 0){const e=this.testData.allQuestions.filter(a=>a[23]===t);if(e.length>0)return e.length>5&&(e.length=5),e.forEach(a=>{a.response=null;const u=this.testData.allQuestions.findIndex(d=>d[3]===a[3]);u>-1&&this.testData.allQuestions.splice(u,1)}),this.testData.nextQuestions=e,this.testData.currentScope=t,this.testData.loadIteration=s,e;throw"There are no questions"}},async completeQuestion(t){const s=t.response,e=t[19].find(a=>a.value===s);return e!==void 0&&(t.selection=e),t.iteration=this.testData.loadIteration,this.testData.completedQuestions.push(t),this.testData.nextQuestions=this.testData.nextQuestions.filter(a=>a[3]!==t[3]),{data:{nextQuestions:this.timeToStop?[]:this.testData.nextQuestions,scope:this.nextScope,iteration:this.nextIteration}}}}}),et=q({components:{},setup(){const{toolsForCraft:t,toolListInstructions:s}=b(),{updateAssessment:e,getAllQuestions:a}=x(),u=Q([]),d=Q(0);async function i(){try{await a(),e({next:1,type:"tools",values:u.value})}catch(h){console.log(h)}}function m(h,v){console.log(h)}return F(u,(h,v)=>{console.log(h)}),{toolsForCraft:t,save:i,pushItem:m,selected:u,step:d,updateAssessment:e,toolListInstructions:s}}}),st={class:"row justify-center"},ot={class:"col-12 col-md-10 q-pt-sm"},at=l("div",{class:"text-h6 text-primary"},"Scaffold Tool Assessment",-1),nt={class:"text-body1 text-dark"},lt=l("div",{class:"text-h6 text-dark"}," Tool Assessment ",-1),it=l("div",{class:"text-body1 text-secondary text-italic"}," Please select the tools you own from the following list. ",-1),rt={class:"row justify-center"},ut={class:"row items-center"},ct={class:"col-11"},dt={class:"text-body1 text-primary"},pt={class:"col-1"},ht={class:"row q-pt-md"},ft={class:"col-12 text-right"};function mt(t,s,e,a,u,d){return r(),_("div",null,[l("div",st,[l("div",ot,[t.step===0?(r(),y(D,{key:0,class:"q-mt-xl"},{default:n(()=>[o(c,null,{default:n(()=>[at]),_:1}),o(c,null,{default:n(()=>[l("div",nt,w(t.toolListInstructions),1)]),_:1}),o(c,{class:"text-right"},{default:n(()=>[o($,{color:"primary",label:"Continue",onClick:s[0]||(s[0]=i=>t.step=1)})]),_:1})]),_:1})):p("",!0),t.step===1?(r(),y(D,{key:1,flat:""},{default:n(()=>[o(c,null,{default:n(()=>[lt,it]),_:1}),o(c,null,{default:n(()=>[l("div",rt,[(r(!0),_(G,null,M(t.toolsForCraft,i=>(r(),_("div",{class:"col-12 col-md-6",key:i[3]},[o(D,{class:"tool-card q-ma-sm"},{default:n(()=>[o(c,null,{default:n(()=>[o(E,{style:{"max-height":"150px"},fit:"scale-down",src:i[11]},null,8,["src"])]),_:2},1024),o(H),o(c,null,{default:n(()=>[l("div",ut,[l("div",ct,[l("div",dt,w(i[8]),1)]),l("div",pt,[o(K,{modelValue:t.selected,"onUpdate:modelValue":s[1]||(s[1]=m=>t.selected=m),color:"primary",val:i.value},null,8,["modelValue","val"])])])]),_:2},1024)]),_:2},1024)]))),128))]),l("div",ht,[l("div",ft,[o($,{color:"primary",onClick:t.save,label:"Continue"},null,8,["onClick"])])])]),_:1})]),_:1})):p("",!0)])])])}var vt=I(et,[["render",mt]]);const gt=q({components:{},setup(){const t=Q(0),{testForCraft:s,startLevelForTest:e}=b(),{getAllQuestions:a,questionsLoaded:u,loadQuestionGroup:d,completeQuestion:i,submitToQB:m}=x(),h=Q(!0),v=Q(null),S=Q(null),g=Q([]);L(async()=>{u||await a(),h.value=!1,g.value=await d(e[14],1)});const k=U(()=>{const f=g.value?g.value.length:0,C=Math.floor(Math.random()*(f-0));return g.value&&g.value.length>0?g.value[C]:null});F(v,(f,C)=>{console.log(f),f&&(S.value=null)});async function B(){if(!v.value)S.value="Select an answer";else{S.value=null,k.value.response=v.value;const{data:f}=await i(k.value);if(console.log(f),v.value=null,f.nextQuestions.length>0)g.value=f.nextQuestions;else try{g.value=await d(f.scope,f.iteration)}catch(C){console.log(C),g.value=[];const N=await m();console.log(N)}}}return{step:t,testForCraft:s,loading:h,currentQuestion:k,response:v,responseError:S,submit:B}}}),_t={key:0,class:"row justify-center"},yt={class:"col-12 col-md-10 q-pt-sm"},Qt={class:"text-h6 text-primary"},Dt={class:"text-body1 text-dark"},wt={class:"text-h5 text-primary"},bt={class:"q-pa-sm"},St={class:"text-body1"},Ct=l("hr",null,null,-1),$t={key:0,class:"col-5"},kt={key:1,class:"absolute-center"};function qt(t,s,e,a,u,d){return r(),_("div",null,[t.loading?p("",!0):(r(),_("div",_t,[l("div",yt,[t.step===0?(r(),y(D,{key:0,class:"q-mt-xl"},{default:n(()=>[o(c,null,{default:n(()=>[l("div",Qt,w(t.testForCraft[29]),1)]),_:1}),o(c,null,{default:n(()=>[l("div",Dt,w(t.testForCraft[28]),1)]),_:1}),o(c,{class:"text-right"},{default:n(()=>[o($,{color:"primary",label:"Continue",onClick:s[0]||(s[0]=i=>t.step=1)})]),_:1})]),_:1})):p("",!0),t.step===1?(r(),y(D,{key:1,flat:""},{default:n(()=>[o(c,null,{default:n(()=>[l("div",wt,w(t.testForCraft[29]),1)]),_:1}),t.currentQuestion?(r(),y(c,{key:0},{default:n(()=>[o(D,{flat:""},{default:n(()=>[o(c,null,{default:n(()=>[l("div",{class:T(t.currentQuestion.hasImage?"row justify-between items-start":"row justify-center items-start")},[l("div",{class:T(t.currentQuestion.hasImage?"col-6":"col-10")},[o(D,null,{default:n(()=>[o(c,null,{default:n(()=>[l("div",bt,[l("div",St,[Y(w(t.currentQuestion[9])+" ",1),t.responseError?(r(),y(J,{key:0,size:"md",class:"q-ml-sm",name:"error",color:"red"})):p("",!0)]),o(X,{options:t.currentQuestion[19],type:"radio",modelValue:t.response,"onUpdate:modelValue":s[1]||(s[1]=i=>t.response=i)},null,8,["options","modelValue"])])]),_:1}),Ct,o(c,{class:"text-right"},{default:n(()=>[o($,{color:"primary",label:"Submit",onClick:t.submit},null,8,["onClick"])]),_:1})]),_:1})],2),t.currentQuestion.hasImage?(r(),_("div",$t,[o(E,{class:"question-img",fit:"scale-down",src:t.currentQuestion.imageData.src,alt:t.currentQuestion.imageData.alt},null,8,["src","alt"])])):p("",!0)],2)]),_:1})]),_:1})]),_:1})):p("",!0)]),_:1})):p("",!0)])])),t.loading?(r(),_("div",kt,[o(V,{color:"primary",size:"5em"})])):p("",!0)])}var It=I(gt,[["render",qt]]);const xt=q({components:{tools:vt,test:It},setup(){const t=x(),{step:s,loading:e}=W(t),{dataLoaded:a,updateStep:u}=t,{getCraftTools:d,getKioskSetup:i,getFormOptions:m}=b();return L(async()=>{m();const{data:h,loaded:v}=await i();v?a():h!==null?h[18]==="Yes"?(await d(),a()):u(1):console.log("Something went wrong.")}),{step:s,loading:e}}}),Rt={key:0,class:"row"},Tt={class:"col"},At={key:1,class:"absolute-center"};function Ft(t,s,e,a,u,d){const i=A("tools"),m=A("test");return r(),y(Z,{class:"window-height window-width"},{default:n(()=>[t.loading?p("",!0):(r(),_("div",Rt,[l("div",Tt,[t.step===0?(r(),y(i,{key:0})):p("",!0),t.step===1?(r(),y(m,{key:1})):p("",!0)])])),t.loading?(r(),_("div",At,[o(V,{color:"primary",size:"5em"})])):p("",!0)]),_:1})}var Lt=I(xt,[["render",Ft]]);export{Lt as default};
