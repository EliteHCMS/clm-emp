import{l as ne,I as X,aE as ae,K as J,c as j,a7 as O,a9 as ge,aa as f,_ as re,p as r,R as q,N as a,t as L,v as t,d as s,M as n,x as Ue,ad as Y,Z as k,ac as he,O as p,J as ue,r as I,a8 as g,L as $e,o as Ce,aF as M,P as se,a4 as de,Q as G,U as oe,y as w,S as me,X as Ee,a5 as we,F as Se,Y as Ne,w as Pe,a6 as Ie,aG as Me,af as Ae}from"./index.1e885c3e.js";import{Q as ye,a as qe,b as Oe}from"./QStep.3530b677.js";import{Q as Ve}from"./QTooltip.925624f7.js";const ze=ne({props:{title:String,step:Number,name:Number},setup(){const{checkedIn:e,onKiosk:l,fieldLabels:y}=X(),{profile:V,updateProfile:m}=ae(),{evergreenJobOptions:C}=J(X()),o=j(()=>e?O({selection:O().required("Please select a job!").nullable()}):!1),{meta:u,errors:i,handleSubmit:Q,isSubmitting:z}=ge({validationSchema:o,initialValues:{selection:V[19].value?{value:V[19].value,label:V[19].label}:null}}),{value:T}=f("selection"),_=Q(D=>{const E={19:{value:D.selection.value,label:D.selection.label},40:{value:D.selection[13],label:D.selection[12]}};m({next:1,values:E})});return{checkedIn:e,onKiosk:l,selection:T,formMeta:u,formErrors:i,isSubmitting:z,submitUpdate:_,evergreenJobOptions:C,fieldLabels:y}}}),De={key:0},Re={class:"text-caption"};function Qe(e,l,y,V,m,C){return r(),q(qe,{name:e.name,title:e.title,done:e.step>0},{default:a(()=>[e.checkedIn||e.onKiosk?(r(),L("div",De,[t("form",{onSubmit:l[1]||(l[1]=he((...o)=>e.submitUpdate&&e.submitUpdate(...o),["prevent"]))},[s(Y,{autofocus:"",label:e.fieldLabels.selectJob===""?"Select a Job":e.fieldLabels.selectJob,modelValue:e.selection,"onUpdate:modelValue":l[0]||(l[0]=o=>e.selection=o),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:e.evergreenJobOptions,style:Ue(e.$q.screen.gt.md?"width: 50%":"width: 100%"),error:!!e.formErrors.selection,"bottom-slots":"",dense:""},{error:a(()=>[t("div",Re,n(e.formErrors.selection),1)]),_:1},8,["label","modelValue","options","style","error"]),s(ye,{class:"text-right"},{default:a(()=>[s(k,{type:"submit",color:"info",label:"Continue"})]),_:1})],32)])):p("",!0)]),_:1},8,["name","title","done"])}var Fe=re(ze,[["render",Qe]]);const Be=["Alabama","Alaska","American Samoa","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","District of Columbia","Federated States of Micronesia","Florida","Georgia","Guam","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Marshall Islands","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Northern Mariana Islands","Ohio","Oklahoma","Oregon","Palau","Pennsylvania","Puerto Rico","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virgin Island","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],He=["Alberta","British Columbia","Manitoba","New Brunswick","Newfoundland and Labrador","Northwest Territories","Nova Scotia","Nunavut","Ontario","Prince Edward Island","Quebec","Saskatchewan","Yukon Territory"],Je=ne({props:{title:String,step:Number,name:Number},components:{},setup(){const{fieldLabels:e}=X(),{employee:l}=J(ue()),y=[{label:"Call",value:1},{label:"Text",value:2},{label:"Email",value:3},{label:"Call, Text, or Email",value:4},{label:"Do Not Contact Me",value:5}],V=[{label:"United States",value:"United States"},{label:"Canada",value:"Canada"}],m=I(!1),C=I(!1),o=I(null),u=ae(),{onJobBoard:i}=J(u),Q=O({first:g().required("First name is required!").matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}),middle:g().matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}).nullable().notRequired(),last:g().required("Last name is required!").matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}),suffix:g().nullable().notRequired(),street1:g().required(),street2:g().nullable().notRequired(),city:g().required(),state:g().required(),postal:g().required(),addressCountry:O().required(),contact:O().nullable().notRequired()}),{meta:z,errors:T,handleSubmit:_,isSubmitting:D}=ge({validationSchema:Q,initialValues:{first:l.value[20]?l.value[20]:"",middle:l.value[21]?l.value[21]:"",last:l.value[22]?l.value[22]:"",suffix:l.value[23]?l.value[23]:"",contact:l.value[57]?{value:l.value[57],label:l.value[58]}:null,street1:l.value[41]?l.value[41]:"",street2:l.value[42]?l.value[42]:"",city:l.value[43]?l.value[43]:"",state:l.value[44]?l.value[44]:"",postal:l.value[45]?l.value[45]:"",addressCountry:l.value[46]?{value:l.value[46],label:l.value[46]}:null}}),{value:E,meta:P}=f("first"),{value:F,meta:ie}=f("middle"),{value:x,meta:B}=f("last"),{value:A}=f("suffix"),{value:ee}=f("contact"),{value:le}=f("street1"),{value:R}=f("street2"),{value:te}=f("city"),{value:Z}=f("state"),{value:d}=f("postal"),{value:b}=f("addressCountry"),h=j(()=>{const $=`${E.value} ${x.value} ${A.value}`;return $e.formatName($)}),H=j(()=>`${le.value}${R.value===""?"":` ${R.value}`}, ${te.value}, ${Z.value}, ${d.value}, ${b.value.value}`);function U(){const $={next:2};u.updateProfile($)}function K(){m.value=!0}const ce=_(async $=>{const fe={23:$.first,24:$.middle,25:$.last,26:$.suffix,27:l.value[27],28:l.value[26],46:$.contact,32:$.street1,33:$.street2,34:$.city,35:$.state,36:$.postal,37:$.addressCountry.value},ve={next:2,values:fe};m.value=!1;const be=await u.updateProfile(ve);console.log(be)});function W(){const $={next:0};u.updateProfile($)}const pe=$=>{o.value=$};return Ce(()=>{console.log(l.value)}),{submitUpdate:ce,isSubmitting:D,save:U,back:W,updateCountry:pe,first:E,middle:F,last:x,suffix:A,contact:ee,street1:le,street2:R,city:te,state:Z,postal:d,addressCountry:b,hasPersonalInfo:C,showEdit:m,firstMeta:P,middleMeta:ie,lastMeta:B,formMeta:z,formErrors:T,options:y,countries:V,fullName:h,fullAddress:H,employee:l,showEditFunction:K,onJobBoard:i,fieldLabels:e,states:Be,provinces:He}}}),Te={class:"row justify-between"},_e={class:"col-12 col-md-5"},Ye={class:"text-caption"},je={class:"text-caption"},Ze={class:"text-caption"},Ke={class:"text-caption"},We={class:"text-caption"},Ge={class:"col-12 col-md-6"},Xe={class:"text-caption"},xe={class:"text-caption"};function el(e,l,y,V,m,C){return r(),L("form",{onSubmit:l[12]||(l[12]=he((...o)=>e.submitUpdate&&e.submitUpdate(...o),["prevent"]))},[t("div",Te,[t("div",_e,[s(M,{dense:"",modelValue:e.first,"onUpdate:modelValue":l[0]||(l[0]=o=>e.first=o),label:`${e.fieldLabels.first} *`,error:!!e.formErrors.first,"bottom-slots":""},{error:a(()=>[t("div",Ye,n(e.formErrors.first),1)]),_:1},8,["modelValue","label","error"]),s(M,{dense:"",modelValue:e.middle,"onUpdate:modelValue":l[1]||(l[1]=o=>e.middle=o),label:e.fieldLabels.middle,error:!!e.formErrors.middle,"bottom-slots":""},{error:a(()=>[t("div",je,n(e.formErrors.middle),1)]),_:1},8,["modelValue","label","error"]),s(M,{dense:"",modelValue:e.last,"onUpdate:modelValue":l[2]||(l[2]=o=>e.last=o),label:`${e.fieldLabels.last} *`,error:!!e.formErrors.last,"bottom-slots":""},{error:a(()=>[t("div",Ze,n(e.formErrors.last),1)]),_:1},8,["modelValue","label","error"]),s(M,{dense:"",modelValue:e.suffix,"onUpdate:modelValue":l[3]||(l[3]=o=>e.suffix=o),label:e.fieldLabels.suffix,error:!!e.formErrors.suffix,"bottom-slots":""},{error:a(()=>[t("div",Ke,n(e.formErrors.suffix),1)]),_:1},8,["modelValue","label","error"]),s(Y,{dense:"",modelValue:e.contact,"onUpdate:modelValue":l[4]||(l[4]=o=>e.contact=o),label:e.fieldLabels.preferredContact,options:e.options,error:!!e.formErrors.contact,"bottom-slots":""},{error:a(()=>[t("div",We,n(e.formErrors.contact),1)]),_:1},8,["modelValue","label","options","error"])]),e.$q.screen.gt.sm?(r(),q(se,{key:0,vertical:""})):p("",!0),t("div",Ge,[s(Y,{dense:"",modelValue:e.addressCountry,"onUpdate:modelValue":l[5]||(l[5]=o=>e.addressCountry=o),label:`${e.fieldLabels.country} *`,options:e.countries,error:!!e.formErrors.addressCountry,"bottom-slots":""},{error:a(()=>[t("div",Xe,n(e.formErrors.addressCountry),1)]),_:1},8,["modelValue","label","options","error"]),s(M,{dense:"",modelValue:e.street1,"onUpdate:modelValue":l[6]||(l[6]=o=>e.street1=o),label:`${e.fieldLabels.street1} *`,error:!!e.formErrors.street1,"bottom-slots":""},null,8,["modelValue","label","error"]),s(M,{dense:"",modelValue:e.street2,"onUpdate:modelValue":l[7]||(l[7]=o=>e.street2=o),label:e.fieldLabels.street2,error:!!e.formErrors.street2,"bottom-slots":""},null,8,["modelValue","label","error"]),s(M,{dense:"",modelValue:e.city,"onUpdate:modelValue":l[8]||(l[8]=o=>e.city=o),label:`${e.fieldLabels.city} *`,error:!!e.formErrors.city,"bottom-slots":""},null,8,["modelValue","label","error"]),s(Y,{dense:"",modelValue:e.state,"onUpdate:modelValue":l[9]||(l[9]=o=>e.state=o),label:`${e.fieldLabels.state} *`,options:e.addressCountry?e.addressCountry.value==="United States"?e.states:e.provinces:e.states,error:!!e.formErrors.state,"bottom-slots":""},{error:a(()=>[t("div",xe,n(e.formErrors.state),1)]),_:1},8,["modelValue","label","options","error"]),s(M,{dense:"",modelValue:e.postal,"onUpdate:modelValue":l[10]||(l[10]=o=>e.postal=o),label:`${e.fieldLabels.postal} *`,error:!!e.formErrors.postal,"bottom-slots":""},null,8,["modelValue","label","error"])])]),s(ye,{class:"text-right"},{default:a(()=>[e.onJobBoard?p("",!0):(r(),q(k,{key:0,onClick:l[11]||(l[11]=o=>e.$emit("back")),color:"secondary",label:e.fieldLabels.back,class:"q-mr-sm"},null,8,["label"])),s(k,{type:"submit",color:"info",label:e.fieldLabels.continue},null,8,["label"])]),_:1})],32)}var ll=re(Je,[["render",el]]);const tl=/^[0-9]{10}/g,ol=ne({props:{title:String,step:Number,name:Number},components:{editPersonalInfo:ll},setup(){const{fieldLabels:e}=X(),{employee:l}=J(ue()),y=[{label:"Call",value:0},{label:"Text",value:1},{label:"Email",value:2}],V=[{label:"United States",value:"United States"},{label:"Canada",value:"Canada"}],m=I(!1),C=I(!1),o=I(null),u=ae(),{onJobBoard:i,personalInfoNeeded:Q}=J(u),z=O({first:g().required("First name is required!").matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}),middle:g().matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}).nullable().notRequired(),last:g().required("Last name is required!").matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}),suffix:g().nullable().notRequired(),email:g().required("Email is required!").email("You must provide a valid email!"),phone:g().matches(tl,{message:"Valid Phone Number Required!"}).required("Phone number is required!"),street1:g().required(),street2:g().nullable().notRequired(),city:g().required(),state:g().required(),postal:g().required(),addressCountry:O().required(),contact:O().nullable().notRequired()}),{meta:T,errors:_,handleSubmit:D,isSubmitting:E}=ge({validationSchema:z,initialValues:{first:l.value[20]?l.value[20]:"",middle:l.value[21]?l.value[21]:"",last:l.value[22]?l.value[22]:"",suffix:l.value[23]?l.value[23]:"",phone:l.value[27]?l.value[27]:"",email:l.value[26]?l.value[26]:"",contact:l.value[57]?{value:l.value[57],label:l.value[58]}:null,street1:l.value[41]?l.value[41]:"",street2:l.value[42]?l.value[42]:"",city:l.value[43]?l.value[43]:"",state:l.value[44]?l.value[44]:"",postal:l.value[45]?l.value[45]:"",addressCountry:l.value[46]?{value:l.value[46],label:l.value[46]}:null}}),{value:P,meta:F}=f("first"),{value:ie,meta:x}=f("middle"),{value:B,meta:A}=f("last"),{value:ee}=f("suffix"),{value:le}=f("email"),{value:R}=f("phone"),{value:te}=f("contact"),{value:Z}=f("street1"),{value:d}=f("street2"),{value:b}=f("city"),{value:h}=f("state"),{value:H}=f("postal"),{value:U}=f("addressCountry"),K=j(()=>{const v=`${P.value} ${B.value} ${ee.value}`;return $e.formatName(v)}),ce=j(()=>`${Z.value}${d.value===""?"":` ${d.value}`}, ${b.value}, ${h.value}, ${H.value}, ${U.value.value}`),W=j(()=>{let v="";return R.value.length===11?v=R.value.substring(1):v=R.value,$e.formatPhone(v)});async function pe(){const v={23:l.value[20],24:l.value[21],25:l.value[22],26:l.value[23],27:l.value[27],28:l.value[26],46:l.value[57],32:l.value[41],33:l.value[42],34:l.value[43],35:l.value[44],36:l.value[45],37:l.value[46]},c={next:2,values:v};u.updateProfile(c)}function $(){m.value=!0}const fe=D(v=>{const c={23:v.first,24:v.middle,25:v.last,26:v.suffix,27:v.phone,28:v.email,46:v.contact,32:v.street1,33:v.street2,34:v.city,35:v.state,36:v.postal,37:v.addressCountry.name},N={next:2,values:c};m.value=!1,u.updateProfile(N)});function ve(){m.value=!1;const v={next:0};u.updateProfile(v)}const be=v=>{o.value=v};return Ce(()=>{console.log(l.value)}),{submitUpdate:fe,isSubmitting:E,save:pe,back:ve,updateCountry:be,first:P,middle:ie,last:B,suffix:ee,email:le,phone:R,contact:te,street1:Z,street2:d,city:b,state:h,postal:H,addressCountry:U,hasPersonalInfo:C,showEdit:m,firstMeta:F,middleMeta:x,lastMeta:A,formMeta:T,formErrors:_,options:y,countries:V,fullName:K,fullAddress:ce,formatPhone:W,employee:l,showEditFunction:$,onJobBoard:i,personalInfoNeeded:Q,fieldLabels:e}}}),sl={key:1},al={class:"col-12 col-md-3 q-py-sm"},nl={class:"text-primary"},rl={class:"text-dark q-pl-sm"},il={class:"col-12 col-md-6 q-py-sm"},dl={class:"text-primary"},ul={class:"text-dark q-pl-sm"},cl={class:"col-12 col-md-3 q-py-sm"},ml={class:"text-primary"},pl={class:"text-dark q-pl-sm"};function fl(e,l,y,V,m,C){const o=de("edit-personal-info");return r(),q(qe,{name:e.name,title:e.title,done:e.step>1},{default:a(()=>[e.showEdit||e.personalInfoNeeded?(r(),q(o,{key:0,onBack:e.back},null,8,["onBack"])):p("",!0),!e.showEdit&&!e.personalInfoNeeded?(r(),L("div",sl,[s(me,null,{default:a(()=>[s(G,null,{default:a(()=>[t("div",{class:w(["text-dark",e.$q.screen.gt.sm?"text-h6":"text-body2"])},[oe(n(e.$q.screen.gt.sm?"Personal Info":"Personal")+" ",1),s(k,{class:"q-ml-sm",round:"",size:e.$q.screen.gt.sm?"sm":"xs",color:"accent",icon:"edit",onClick:e.showEditFunction},null,8,["size","onClick"])],2),t("div",{class:w(["row q-mt-sm",e.$q.screen.gt.sm?"text-body1":"text-caption"])},[t("div",al,[t("div",nl,n(e.fieldLabels.name),1),t("div",rl,n(e.employee[24]),1)]),t("div",il,[t("div",dl,n(e.fieldLabels.address),1),t("div",ul,n(e.employee[40]),1)]),t("div",cl,[t("div",ml,n(e.fieldLabels.preferredContact),1),t("div",pl,n(e.employee[58]),1)])],2)]),_:1})]),_:1}),s(ye,{class:"text-right"},{default:a(()=>[e.onJobBoard?p("",!0):(r(),q(k,{key:0,onClick:e.back,color:"secondary",label:e.fieldLabels.back,class:"q-mr-sm"},null,8,["onClick","label"])),s(k,{onClick:e.save,color:"info",label:e.fieldLabels.continue},null,8,["onClick","label"])]),_:1})])):p("",!0)]),_:1},8,["name","title","done"])}var vl=re(ol,[["render",fl]]);const bl=/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,hl=ne({props:{title:String,step:Number,name:Number},setup(){const e=Ee(),l=ae(),y=X(),{fieldLabels:V}=X(),{formOptions:m}=J(y),{savedEmergencyContacts:C}=J(ue()),{removeContact:o,addContact:u,updateContact:i,employeeData:Q}=ue(),z=I({name:"first",value:null}),T=I({name:"last",value:null}),_=I({name:"phone",value:null}),D=I({name:"relationship",value:null}),E=I([]),P=j(()=>{const d=C.value.concat(E.value);return d.sort(function(b,h){return b.editing&&!h.editing?-1:!b.editing&&h.editing?1:0}),d}),F=j(()=>P.value.filter(b=>b.editing).length>0);function ie(){const d={next:3};l.updateProfile(d)}function x(){const d={next:1};l.updateProfile(d)}function B(){const d={3:P.value.length+1,6:"",7:"",8:"",11:"",12:"",16:"",editing:!0,new:!0,contact:null};E.value.push(d),console.log(P.value)}function A(d){C.value[d].editing=!0}function ee(d){const b=P.value[d];console.log(b),e.dialog({title:"Alert",message:`Are you sure you want to remove ${b[6]} ${b[7]}?`,cancel:!0,persistent:!0}).onOk(()=>{o(b[3])})}const le=O({relationship:O().required("Relationship is required.").nullable(),phone:g().matches(bl,{message:"A valid phone number is required."}).length(10,{message:"Phone number must be 10 digits."}).required("Phone is required."),last:g().required("Last name is required.").matches(/^[a-zA-Z]+$/g,{excludeEmptyString:!0,message:"Cannot contain numbers or special characters."}),first:g().required("First name is required.").matches(/^[a-zA-Z]+$/g,{excludeEmptyString:!0,message:"Cannot contain numbers or special characters."})}).required();function R(d){const b=[z.value,T.value,_.value,D.value];d?b.forEach(h=>{h.name===d.name?h.value=d.message:h.value=null}):b.forEach(h=>{h.value=null})}async function te(d,b){console.log(d);const h=P.value[b];try{await le.validate({relationship:d.contact,phone:d[16],last:d[7],first:d[6]}),h[11]=d.contact.value,h[12]=d.contact.label,h.editing=!1,R(),h.new?(h.new=!1,u(h),E.value.forEach((H,U)=>{H[3]===h[3]&&E.value.splice(U,1)})):i(h)}catch({name:H,path:U,errors:K,inner:ce}){let W="";K[0]instanceof Object?W=K[0].message:W=K[0],R({name:U,message:W})}}function Z(d){const b=P.value[d];console.log(b),b.new?E.value.forEach((h,H)=>{h[3]===b[3]&&E.value.splice(H,1)}):P.value[d].editing=!1}return{save:ie,back:x,savedEmergencyContacts:C,allContacts:P,editing:F,formOptions:m,editItem:A,removeItem:ee,saveItem:te,cancelEdit:Z,addNewContactRow:B,addContact:u,updateContact:i,firstError:z,lastError:T,phoneError:_,relationshipError:D,helpers:$e,employeeData:Q,fieldLabels:V}}}),yl={class:"col-12 col-md-4"},$l={class:"text-primary"},gl={class:"text-dark q-pl-sm"},ql={class:"col-12 col-md-4"},kl={class:"text-primary"},Vl={class:"text-dark q-pl-sm"},Cl={key:0,class:"text-body2 text-dark"},El={class:"row q-py-sm"},wl={class:"col-12 col-md-6 text-left"},Sl={key:0,class:"text-body2 text-primary text-italic q-pb-sm q-pl-md"},Ll=["id"],Ul={class:"col-12 col-md-4"},Nl={class:"text-primary"},Pl={class:"text-dark q-pl-sm"},Il={class:"text-primary"},Ml={class:"text-dark q-pl-sm"},Al={class:"text-primary"},Ol={class:"text-dark q-pl-sm"},zl={key:1,class:"items-center"},Dl=["onSubmit"],Rl={class:"row"},Ql={class:"col-12 col-md-3 q-pr-md"},Fl={class:"col-12 col-md-3 q-pr-md"},Bl={class:"col-12 col-md-3 q-pr-md"},Hl={class:"col-12 col-md-3"},Jl={class:"row q-mt-md"},Tl={class:"col text-right"};function _l(e,l,y,V,m,C){return r(),q(qe,{name:e.name,title:e.title},{default:a(()=>[t("div",null,[s(me,{class:"q-px-xs"},{default:a(()=>[s(G,null,{default:a(()=>[t("div",{class:w(["text-dark",e.$q.screen.gt.sm?"text-h6":"text-body2"])},[oe(n(e.$q.screen.gt.sm?"Personal Contact Info":"Personal")+" ",1),s(k,{class:"q-ml-sm",round:"",size:e.$q.screen.gt.sm?"sm":"xs",color:"accent",icon:"edit"},null,8,["size"])],2),t("div",{class:w(["row q-mt-sm",e.$q.screen.gt.sm?"text-body1":"text-caption"])},[t("div",yl,[t("div",$l,n(e.fieldLabels.phone),1),t("div",gl,n(e.employeeData[25]),1)]),t("div",ql,[t("div",kl,n(e.fieldLabels.email),1),t("div",Vl,n(e.employeeData[26]),1)])],2)]),_:1}),e.$q.screen.gt.sm?p("",!0):(r(),q(se,{key:0})),e.editing?p("",!0):(r(),q(G,{key:1,class:w(e.$q.screen.lt.md?"q-px-xs":"")},{default:a(()=>[e.$q.screen.gt.sm?p("",!0):(r(),L("div",Cl,n(e.fieldLabels.emergencyContact),1)),t("div",El,[t("div",wl,[s(k,{size:e.$q.screen.gt.sm?"md":"sm",color:"accent",label:(e.allContacts.length>0,e.fieldLabels.addContactButton),onClick:e.addNewContactRow,icon:"add"},null,8,["size","label","onClick"])])])]),_:1},8,["class"])),e.editing?(r(),q(se,{key:2})):p("",!0),s(G,{class:w([e.editing?"q-pt-sm":"q-pt-none",e.$q.screen.gt.sm?"":"q-px-xs"])},{default:a(()=>[e.allContacts.length===0?(r(),L("div",Sl,n(e.fieldLabels.addEmergencyContact),1)):p("",!0),(r(!0),L(Se,null,we(e.allContacts,(o,u)=>(r(),L("div",{id:o[3],key:o[3]},[s(me,{class:"q-pa-sm",flat:""},{default:a(()=>[o.editing?p("",!0):(r(),L("div",{key:0,class:w(["row items-center",e.$q.screen.gt.sm?"text-body2":"text-caption"])},[t("div",Ul,[t("div",null,[t("div",Nl,n(e.fieldLabels.name),1),t("div",Pl,n(e.helpers.formatName(o[6]))+" "+n(e.helpers.formatName(o[7])),1)])]),t("div",{class:w(e.$q.screen.gt.sm?"col-3":"col-12 q-pt-sm")},[t("div",null,[t("div",Il,n(e.fieldLabels.phone),1),t("div",Ml,n(e.helpers.formatPhone(o[8])),1)])],2),t("div",{class:w(e.$q.screen.gt.sm?"col-3":"col-12 q-pt-sm")},[t("div",null,[t("div",Al,n(e.fieldLabels.relationship),1),t("div",Ol,n(o[12]),1)])],2),t("div",{class:w(e.$q.screen.gt.sm?"col-2 text-right":"col-12 q-pt-md text-right")},[t("div",null,[s(k,{size:"sm",round:"",onClick:i=>e.editItem(u),color:"secondary",icon:"edit",class:"q-mr-sm"},null,8,["onClick"]),s(k,{size:"sm",round:"",onClick:i=>e.removeItem(u),color:"primary",icon:"delete"},null,8,["onClick"])])],2)],2)),o.editing?(r(),L("div",zl,[t("form",{onSubmit:he(i=>e.saveItem(o,u),["prevent"])},[t("div",Rl,[t("div",Ql,[s(M,{modelValue:o[6],"onUpdate:modelValue":i=>o[6]=i,dense:"",label:e.fieldLabels.first,error:!!e.firstError.value,"bottom-slots":""},{error:a(()=>[oe(n(e.firstError.value),1)]),_:2},1032,["modelValue","onUpdate:modelValue","label","error"])]),t("div",Fl,[s(M,{modelValue:o[7],"onUpdate:modelValue":i=>o[7]=i,dense:"",label:e.fieldLabels.last,error:!!e.lastError.value,"bottom-slots":""},{error:a(()=>[oe(n(e.lastError.value),1)]),_:2},1032,["modelValue","onUpdate:modelValue","label","error"])]),t("div",Bl,[s(M,{modelValue:o[16],"onUpdate:modelValue":i=>o[16]=i,dense:"",label:e.fieldLabels.phone,error:!!e.phoneError.value,"bottom-slots":""},{error:a(()=>[oe(n(e.phoneError.value),1)]),_:2},1032,["modelValue","onUpdate:modelValue","label","error"])]),t("div",Hl,[s(Y,{behavior:"menu",position:"top middle",modelValue:o.contact,"onUpdate:modelValue":i=>o.contact=i,dense:"",label:e.fieldLabels.relationship,options:e.formOptions.relationships,error:!!e.relationshipError.value,"bottom-slots":""},{error:a(()=>[oe(n(e.relationshipError.value),1)]),_:2},1032,["modelValue","onUpdate:modelValue","label","options","error"])])]),t("div",Jl,[t("div",Tl,[s(k,{onClick:i=>e.cancelEdit(u),color:"secondary",label:e.fieldLabels.cancel,class:"q-mr-sm"},null,8,["onClick","label"]),s(k,{type:"submit",color:"info",label:e.fieldLabels.save},null,8,["label"])])])],40,Dl)])):p("",!0)]),_:2},1024),u<e.allContacts.length-1?(r(),q(se,{key:0})):p("",!0)],8,Ll))),128))]),_:1},8,["class"])]),_:1}),e.editing?p("",!0):(r(),q(ye,{key:0,class:"text-right"},{default:a(()=>[s(k,{onClick:e.back,color:"secondary",label:e.fieldLabels.back,class:"q-mr-sm"},null,8,["onClick","label"]),s(k,{onClick:e.save,color:"info",label:e.fieldLabels.continue,disabled:e.savedEmergencyContacts.length===0},null,8,["onClick","label","disabled"])]),_:1}))])]),_:1},8,["name","title"])}var Yl=re(hl,[["render",_l]]);const jl=ne({props:{title:String,step:Number,name:Number},setup(){const e=Ne(),l=I(3),y=I(!1),V=Ee(),m=ae(),{formOptions:C,disabilityForm:o,hasAffirmative:u,hasVets:i,goToVoluntary:Q}=J(X()),{savedHistory:z}=J(ue()),{addHistory:T,updateHistory:_,removeHistory:D,employeeData:E,updateEmployeeData:P}=ue(),F=I([]),{getVoluntaryFormOptions:ie,fieldLabels:x}=X(),{toggleLoader:B,profile:A,proceedToTest:ee}=m,le=O({craft:O().required("Select a Craft!").nullable(),experience:O().required("Select Experience").nullable(),employment:O().required("Select Employment Status").nullable()}),{meta:R,errors:te,handleSubmit:Z}=ge({validationSchema:le,initialValues:{craft:A[40]?{value:A[40].value,label:A[40].label}:null,experience:E[53]?{value:E[53],label:E[54]}:null,employment:E[55]?{value:E[55],label:E[56]}:null}}),{value:d}=f("craft"),{value:b}=f("experience"),{value:h}=f("employment");Pe(A,()=>{A[40].value!==d.value.value&&(d.value={value:A[40].value,label:A[40].label})});const H=Z(async c=>{console.log(Q.value);const N={40:{value:c.craft.value,label:c.craft.label},42:{value:c.experience.value,label:c.experience.label},44:{value:c.employment.value,label:c.employment.label},39:{value:new Date}};if(Q.value){const S={next:o.value?6:u.value?7:i.value?8:0,values:N,completed:!0};B(!0),await ie(),e.push({name:"voluntary"}),B(!1),await m.updateProfile(S),m.submitProfileToQB()}else{const S={next:0,values:N,completed:!0};B(!0),await m.updateProfile(S),m.submitProfileToQB(),ee?(P({fields:{122:{value:8}}}),e.replace({name:"assessment"})):(e.replace({name:"thanks"}),B(!1))}}),U=j(()=>{const c=z.value.concat(F.value);return c.sort(function(N,S){return N.editing&&!S.editing?-1:!N.editing&&S.editing?1:0}),c}),K=j(()=>U.value.filter(N=>N.editing).length>0);function ce(){const c={3:U.value.length+1,6:"",7:"",10:"",11:"",12:"",13:"",15:"",16:"",editing:!0,new:!0,company:null,craft:null};F.value.push(c)}function W(){const c={next:4};m.updateProfile(c)}function pe(){const c={next:2};m.updateProfile(c)}function $(c){z.value[c].editing=!0}function fe(c){const N=U.value[c];console.log(N),V.dialog({title:"Alert",message:"Are you sure you want to remove?",cancel:!0,persistent:!0}).onOk(()=>{D(N[3])})}function ve(c,N){const S=U.value[N];S[6]=c.company.value,S[7]=c.company.label,S[15]=c.craft.value,S[16]=c.craft.label,S.editing=!1,S.new?(S.new=!1,F.value.forEach((ke,Le)=>{ke[3]===S[3]&&F.value.splice(Le,1)}),T(S)):_(S)}function be(c){const N=U.value[c];N.new?F.value.forEach((S,ke)=>{S[3]===N[3]&&F.value.splice(ke,1)}):U.value[c].editing=!1}function v(){y.value?(l.value=3,y.value=!1):(y.value=!0,l.value=U.value.length)}return{save:W,back:pe,allHistory:U,addNewRow:ce,editItem:$,removeItem:fe,saveItem:ve,cancelEdit:be,formOptions:C,editing:K,date:Ie,show:l,expanded:y,adjustRows:v,formMeta:R,formErrors:te,submitUpdate:H,craft:d,experience:b,employment:h,fieldLabels:x}}}),Zl=t("div",{class:"text-body2 text-dark"},"Applying for:",-1),Kl={class:"row"},Wl={class:"col-12 col-md-4 q-px-xs"},Gl={class:"text-caption"},Xl={class:"col-12 col-md-4 q-px-xs"},xl={class:"text-caption"},et={class:"col-12 col-md-4 q-px-xs"},lt={class:"text-caption"},tt=t("div",{class:"text-body2 text-dark"},"Work History:",-1),ot={class:"row q-py-sm"},st={class:"col-12 col-md-6"},at={key:0,class:"text-body2 text-primary text-italic q-pb-sm q-pl-md"},nt=["id"],rt={class:"col-12 col-md-3"},it=t("div",{class:"text-primary"},"Company",-1),dt={class:"text-dark q-pl-sm"},ut=t("div",{class:"text-primary"},"Location",-1),ct={class:"text-dark q-pl-sm"},mt=t("div",{class:"text-primary"},"Job Title",-1),pt={class:"text-dark q-pl-sm"},ft=t("div",{class:"text-primary"},"Start Date",-1),vt={class:"text-dark q-pl-sm"},bt=t("div",{class:"text-primary"},"End Date",-1),ht={class:"text-dark q-pl-sm"},yt={key:1,class:"items-center"},$t=["onSubmit"],gt={class:"row"},qt={class:"col-12 col-md-2 q-pr-md"},kt={class:"col-12 col-md-2 q-pr-md"},Vt={class:"col-12 col-md-2 q-pr-md"},Ct={class:"col-12 col-md-2 q-pr-md"},Et={class:"col-12 col-md-2 q-pr-md"},wt={class:"col-12 col-md-2 q-pr-md"},St={class:"row q-mt-md"},Lt={class:"col text-right"},Ut={class:"row q-pt-md"},Nt={key:0,class:"col-12 text-right"},Pt=oe("Show Less"),It=oe("Show More");function Mt(e,l,y,V,m,C){return r(),q(qe,{name:e.name,title:e.title,done:e.step>3},{default:a(()=>[t("div",null,[t("form",{onSubmit:l[3]||(l[3]=he((...o)=>e.submitUpdate&&e.submitUpdate(...o),["prevent"]))},[s(me,{class:"q-px-xs"},{default:a(()=>[s(G,{class:"q-pb-none q-mb-sm"},{default:a(()=>[Zl,t("div",Kl,[t("div",Wl,[s(Y,{behavior:"menu",position:"top middle",disable:!0,dense:"",modelValue:e.craft,"onUpdate:modelValue":l[0]||(l[0]=o=>e.craft=o),label:e.fieldLabels.craft,options:e.formOptions.crafts,error:!!e.formErrors.craft,"bottom-slots":""},{error:a(()=>[t("div",Gl,n(e.formErrors.craft),1)]),_:1},8,["modelValue","label","options","error"])]),t("div",Xl,[s(Y,{behavior:"menu",position:"top middle",dense:"",modelValue:e.experience,"onUpdate:modelValue":l[1]||(l[1]=o=>e.experience=o),label:e.fieldLabels.exp,options:e.formOptions.experience,error:!!e.formErrors.experience,"bottom-slots":""},{error:a(()=>[t("div",xl,n(e.formErrors.experience),1)]),_:1},8,["modelValue","label","options","error"])]),t("div",et,[s(Y,{behavior:"menu",position:"top middle",dense:"",modelValue:e.employment,"onUpdate:modelValue":l[2]||(l[2]=o=>e.employment=o),label:e.fieldLabels.status,options:e.formOptions.employment,error:!!e.formErrors.employment,"bottom-slots":""},{error:a(()=>[t("div",lt,n(e.formErrors.employment),1)]),_:1},8,["modelValue","label","options","error"])])])]),_:1}),s(se),e.editing?p("",!0):(r(),q(G,{key:0,class:w(e.$q.screen.lt.md?"q-px-xs":"")},{default:a(()=>[tt,t("div",ot,[t("div",st,[s(k,{size:e.$q.screen.gt.sm?"md":"sm",color:"accent",label:e.allHistory.length>0?"Add More History":"Add Employment History",onClick:e.addNewRow,icon:"add"},null,8,["size","label","onClick"])])])]),_:1},8,["class"])),e.editing?(r(),q(se,{key:1})):p("",!0),s(G,{class:w([e.editing?"q-pt-sm":"q-pt-none",e.$q.screen.gt.sm?"":"q-px-xs"])},{default:a(()=>[e.allHistory.length===0?(r(),L("div",at,"Add your employment history. You may enter this information later.")):p("",!0),(r(!0),L(Se,null,we(e.allHistory,(o,u)=>(r(),L("div",{id:o[3],key:u},[e.expanded||u+1<=e.show?(r(),q(me,{key:0,class:"q-px-sm q-pt-xs q-pb-sm",flat:""},{default:a(()=>[o.editing?p("",!0):(r(),L("div",{key:0,class:w(["row items-center",e.$q.screen.gt.sm?"text-body2":"text-caption"])},[t("div",rt,[t("div",null,[it,t("div",dt,n(o[7]),1)])]),t("div",{class:w(e.$q.screen.gt.sm?"col-2":"hidden")},[t("div",null,[ut,t("div",ct,n(o[10]!==""?o[10]:"N/A"),1)])],2),t("div",{class:w(e.$q.screen.gt.sm?"col-2":"col-12 q-pt-md")},[t("div",null,[mt,t("div",pt,n(o[16])+" "+n(o[11]),1)])],2),t("div",{class:w(e.$q.screen.gt.sm?"col-2":"col-6 q-pt-md")},[t("div",null,[ft,t("div",vt,n(e.date.formatDate(o[12],"MM-DD-YYYY")),1)])],2),t("div",{class:w(e.$q.screen.gt.sm?"col-2":"col-6 q-pt-md")},[t("div",null,[bt,t("div",ht,n(e.date.formatDate(o[13],"MM-DD-YYYY")),1)])],2),t("div",{class:w(e.$q.screen.gt.sm?"col-1 text-right":"col-12 q-pt-md text-right")},[t("div",null,[s(k,{size:"sm",round:"",onClick:i=>e.editItem(u),color:"secondary",icon:"edit",class:"q-mr-sm"},null,8,["onClick"]),s(k,{size:"sm",round:"",onClick:i=>e.removeItem(u),color:"primary",icon:"delete"},null,8,["onClick"])])],2)],2)),o.editing?(r(),L("div",yt,[t("form",{onSubmit:he(i=>e.saveItem(o,u),["prevent"])},[t("div",gt,[t("div",qt,[s(Y,{modelValue:o.company,"onUpdate:modelValue":i=>o.company=i,dense:"",label:"Company",options:e.formOptions.companies},null,8,["modelValue","onUpdate:modelValue","options"])]),t("div",kt,[s(Y,{modelValue:o.craft,"onUpdate:modelValue":i=>o.craft=i,dense:"",label:"Craft",options:e.formOptions.crafts},null,8,["modelValue","onUpdate:modelValue","options"])]),t("div",Vt,[s(M,{modelValue:o[11],"onUpdate:modelValue":i=>o[11]=i,dense:"",label:"Job Title"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",Ct,[s(M,{modelValue:o[10],"onUpdate:modelValue":i=>o[10]=i,dense:"",label:"Location"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",Et,[s(M,{type:"date",modelValue:o[12],"onUpdate:modelValue":i=>o[12]=i,dense:"",filled:"",hint:"Start Date"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",wt,[s(M,{type:"date",modelValue:o[13],"onUpdate:modelValue":i=>o[13]=i,dense:"",filled:"",hint:"End Date"},null,8,["modelValue","onUpdate:modelValue"])])]),t("div",St,[t("div",Lt,[s(k,{onClick:i=>e.cancelEdit(u),color:"secondary",label:e.fieldLabels.cancel,class:"q-mr-sm"},null,8,["onClick","label"]),s(k,{type:"submit",color:"info",label:e.fieldLabels.save},null,8,["label"])])])],40,$t)])):p("",!0)]),_:2},1024)):p("",!0),u<e.allHistory.length-1?(r(),q(se,{key:1})):p("",!0)],8,nt))),128)),e.allHistory.length>e.show||e.expanded?(r(),q(se,{key:1})):p("",!0),t("div",Ut,[e.allHistory.length>e.show||e.expanded?(r(),L("div",Nt,[s(k,{round:"",color:"secondary",onClick:e.adjustRows,icon:e.expanded?"expand_less":"expand_more"},{default:a(()=>[e.expanded?(r(),q(Ve,{key:0,anchor:"top middle"},{default:a(()=>[Pt]),_:1})):p("",!0),e.expanded?p("",!0):(r(),q(Ve,{key:1,anchor:"top middle"},{default:a(()=>[It]),_:1}))]),_:1},8,["onClick","icon"])])):p("",!0)])]),_:1},8,["class"])]),_:1}),e.editing?p("",!0):(r(),q(ye,{key:0,class:"text-right"},{default:a(()=>[s(k,{onClick:e.back,color:"secondary",label:e.fieldLabels.back,class:"q-mr-sm"},null,8,["onClick","label"]),s(k,{type:"submit",color:"info",label:e.fieldLabels.continue},null,8,["label"])]),_:1}))],32)])]),_:1},8,["name","title","done"])}var At=re(jl,[["render",Mt]]);const Ot=ne({components:{selectJob:Fe,personalInfo:vl,emergencyContact:Yl,workHistory:At},setup(){const{step:e}=J(ae()),l=I(null);return{step:e,jobSelection:l,jobOptions:[{label:"Default Job",value:0}]}}});function zt(e,l,y,V,m,C){const o=de("select-job"),u=de("personal-info"),i=de("emergency-contact"),Q=de("work-history");return r(),L("div",null,[s(Oe,{modelValue:e.step,"onUpdate:modelValue":l[0]||(l[0]=z=>e.step=z),vertical:"",animated:"","done-color":"info","active-color":"dark","inactive-color":"secondary",class:w(e.$q.screen.lt.md?"q-px-none q-mx-none":"")},{default:a(()=>[s(o,{title:"Select a Job",step:e.step,name:0,done:e.step>0},null,8,["step","done"]),s(u,{title:"Personal Information",step:e.step,name:1,done:e.step>1},null,8,["step","done"]),s(i,{title:"Contact Information",step:e.step,name:2,done:e.step>2},null,8,["step","done"]),s(Q,{title:"Employment Information",step:e.step,name:3,done:e.step>3},null,8,["step","done"])]),_:1},8,["modelValue","class"])])}var Dt=re(Ot,[["render",zt]]);const Rt=ne({components:{profileStepper:Dt},setup(){}});function Qt(e,l,y,V,m,C){const o=de("profile-stepper");return r(),L("div",null,[s(o)])}var Ft=re(Rt,[["render",Qt]]);const Bt=ne({components:{Profile:Ft},setup(){const e=I(0),{updateEmployeeData:l}=ue(),{getFormOptions:y,getEvergreenJobs:V,fieldLabels:m}=X(),{loadingState:C}=J(ae()),{dataLoaded:o}=ae();y(),V();async function u(){o(!0),await l({fields:{339:{value:1}}}),o()}return m||u(),{step:e,loadingState:C}}}),Ht={key:0,class:"absolute-center"},Jt={key:1,class:"row"},Tt={class:"col-12 q-pt-sm"},_t=t("div",{class:"q-pl-sm"},[t("div",{class:"text-h6 text-dark"}," Complete Application "),t("div",{class:"text-body1 text-secondary text-italic"}," Please complete the application. ")],-1);function Yt(e,l,y,V,m,C){const o=de("profile");return r(),q(Ae,{style:{"max-width":"100vw"}},{default:a(()=>[e.loadingState?(r(),L("div",Ht,[s(Me,{color:"primary",size:"5em"})])):p("",!0),e.loadingState?p("",!0):(r(),L("div",Jt,[t("div",Tt,[s(me,{flat:""},{default:a(()=>[s(G,{class:w(e.$q.screen.lt.md?"q-px-xs":"")},{default:a(()=>[_t]),_:1},8,["class"]),s(G,null,{default:a(()=>[s(o)]),_:1})]),_:1})])]))]),_:1})}var Wt=re(Bt,[["render",Yt]]);export{Wt as default};
