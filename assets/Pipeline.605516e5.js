import{Q as j}from"./QPage.b5804b9e.js";import{d as C,bT as M,dh as P,dg as $,bK as y,ac as b,bE as N,_ as w,b_ as g,g as q,h as Q,k as t,al as l,bd as i,Z as n,bV as T,bW as k,l as A,bO as D,bP as B,bQ as I,aP as O,aN as F,aT as J,ad as V}from"./index.a71f5d5e.js";import{Q as E}from"./QTable.f033ed05.js";import{e as z}from"./export-file.deb9806e.js";import"./QMarkupTable.903d2021.js";import"./use-fullscreen.f03c57f7.js";const _=[{name:1,label:"Name",align:"left",field:e=>e.map.name,format:e=>`${e}`,sortable:!0},{name:7,label:"Status",align:"left",field:e=>e.map.status,format:e=>`${e}`,sortable:!0,sortOrder:"ad"},{name:2,label:"Offer Date",align:"left",field:e=>e.map.offerDate,format:e=>`${g.formatDate(e,"MM/DD/YYYY")}`,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>e.map.fullJob,format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!0},{name:5,label:"Job #",align:"left",field:e=>e.map.jobNumber,format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0},{name:6,label:"Arrival Date",align:"left",field:e=>e.map.start,format:e=>`${e?g.formatDate(e,"MM/DD/YYYY"):"TBD"}`,sortable:!0}],R=[{name:1,label:"Name",align:"left",field:e=>e.map.name,format:e=>`${e}`,sortable:!0},{name:7,label:"Status",align:"left",field:e=>e.map.status,format:e=>`${e}`,sortable:!0,sortOrder:"ad"},{name:2,label:"Offer Date",align:"left",field:e=>e.map.offerDate,format:e=>`${g.formatDate(e,"MM/DD/YYYY")}`,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>e.map.fullJob,format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!0},{name:5,label:"Job #",align:"left",field:e=>e.map.jobNumber,format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0},{name:6,label:"Arrival Date",align:"left",field:e=>e.map.start,format:e=>`${e?g.formatDate(e,"MM/DD/YYYY"):"TBD"}`,sortable:!0}],H=C({name:"Pipeline Table",components:{},setup(){const e=M(),d=P(),m=$(),{pipelineForProject:f}=y(d),o=f,{active:u}=y($()),p=b(()=>o.value.filter(s=>s.map.status==="In Process")),x=b(()=>o.value.filter(s=>s.map.status==="Deployed")),Y=b(()=>o.value.filter(s=>s.status==="Arrived")),S=b(()=>e.screen.lt.md?100:o.value.length>=25?Math.round(o.value.length/5):10);function v(s,h,r){let a=h!==void 0?h(s,r):s;return a=a==null?"":String(a),a=a.split('"').join('""'),`"${a}"`}return{columns:_,mobileColumns:R,rows:o,initialPagination:{rowsPerPage:S},separator:"vertical",projectStore:m,pipelineForProject:f,inProcess:p,deployed:x,arrived:Y,active:u,exportPipeline(){const s=[_.map(r=>v(r.label))].concat(o.value.map(r=>_.map(a=>v(typeof a.field=="function"?a.field(r):r[a.field===void 0?a.name:a.field],a.format,r)).join(","))).join(`\r
`);z(`${N().format("MM.DD.YYYY")} ${u.value[20]} Project-Pipeline-Export.csv`,s,"text/csv")!==!0&&e.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}}}}),c=e=>(O("data-v-6cffc5e6"),e=e(),F(),e),K={class:"q-px-sm"},L={class:"row"},W={class:"col-12 col-md-10 q-px-xs"},Z={class:"text-dark text-caption text-italic"},G={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"},U=c(()=>t("div",{class:"text-body1 text-primary"},"Summary",-1)),X={class:"text-body2"},ee=c(()=>t("span",{class:"q-mr-md"},"In Process:",-1)),te={class:"text-body2"},ae=c(()=>t("span",{class:"q-mr-md"},"Deployed:",-1)),se={class:"text-body2"},oe=c(()=>t("span",{class:"q-mr-md"},"Arrived:",-1)),le={class:"text-body2"},re=c(()=>t("span",{class:"q-mr-md"},"Total:",-1));function ne(e,d,m,f,o,u){return q(),Q("div",K,[t("div",L,[t("div",W,[l(E,{"title-class":e.$q.screen.gt.sm?"text-primary text-h6":"text-primary text-body1",title:e.$q.screen.lt.sm?"Pipeline":`Staffing Pipeline for ${e.active[20]}`,columns:e.$q.screen.lt.md?e.mobileColumns:e.columns,rows:e.rows,"row-key":"3",class:"q-pa-sm",pagination:e.initialPagination,separator:"vertical","table-header-class":"bg-dark text-white","no-data-label":`There is no one in the pipeline for ${e.active[20]}`,grid:e.$q.screen.lt.sm},{"top-right":i(()=>[t("div",Z,"(Total: "+n(e.pipelineForProject.length)+" in pipeline)",1),l(T,{dense:e.$q.screen.lt.md,class:"q-ml-sm",color:"primary",label:"Download",onClick:e.exportPipeline,disable:e.pipelineForProject.length<1},null,8,["dense","onClick","disable"])]),"no-data":i(({message:p})=>[t("div",G,[l(k,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),t("span",null,n(p),1)])]),_:1},8,["title-class","title","columns","rows","pagination","no-data-label","grid"])]),t("div",{class:A(e.$q.screen.lt.md?"col-12 q-px-xs q-mt-sm order-first":"col-2 q-px-xs")},[l(I,null,{default:i(()=>[l(D,{class:"q-pb-xs"},{default:i(()=>[U]),_:1}),l(D,{class:"text-right q-pt-xs"},{default:i(()=>[t("div",X,[ee,t("span",null,n(e.inProcess.length),1)]),t("div",te,[ae,t("span",null,n(e.deployed.length),1)]),t("div",se,[oe,t("span",null,n(e.arrived.length),1)]),l(B,{color:"primary",class:"q-my-sm"}),t("div",le,[re,t("span",null,n(e.pipelineForProject.length),1)])]),_:1})]),_:1})],2)])])}var ie=w(H,[["render",ne],["__scopeId","data-v-6cffc5e6"]]);const de={name:"Pipeline",components:{pipelineTable:ie},setup(){const{getInProcesses:e,getDispatches:d,getDeployments:m}=P();return e(),d(),m(),{}}};function me(e,d,m,f,o,u){const p=J("pipeline-table");return q(),V(j,{style:{"max-width":"100vw"}},{default:i(()=>[l(p)]),_:1})}var he=w(de,[["render",me]]);export{he as default};
