var u=Object.defineProperty;var n=Object.getOwnPropertySymbols;var f=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;var o=(t,e,s)=>e in t?u(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,r=(t,e)=>{for(var s in e||(e={}))f.call(e,s)&&o(t,s,e[s]);if(n)for(var s of n(e))p.call(e,s)&&o(t,s,e[s]);return t};var i=(t,e,s)=>(o(t,typeof e!="symbol"?e+"":e,s),s);import{t as c,f as g}from"./index.cb92c794.js";import{r as l,a as m}from"./index.7dbe61ef.js";var h={get dev(){return!1},baseURL:"https://api.elitehcms.com",apiDevURL:"https://api.elitehcms.com",socketDevURL:"wss://api.elitehcms.com",storageTokenKeyName:"feathers-jwt",tokenType:"Bearer",tokenExpiration:"12h",apiToken:"dafcbf3f-35d1-44ea-b9e6-732ef3812777"};class b{constructor(e,s){i(this,"axiosIns",null);i(this,"feathersIns",null);i(this,"feathersConfig",r({},h));i(this,"isAlreadyFetchingAccessToken",!1);i(this,"subscribers",[]);this.axiosIns=e,this.feathersConfig=r(r({},this.feathersConfig),s),this.axiosIns.interceptors.request.use(a=>(a.headers["x-access-token"]=this.feathersConfig.apiToken,a),a=>Promise.reject(a))}createMessageQueue(e){return this.axiosIns.post("messages/queue",e).then(s=>s.data).catch(s=>{throw s})}createNotification(e){return this.axiosIns.post("notifications",e).then(s=>s.data).catch(s=>{throw s})}onAccessTokenFetched(e){this.subscribers=this.subscribers.filter(s=>s(e))}addSubscriber(e){this.subscribers.push(e)}getToken(){return c.get(this.feathersConfig.storageTokenKeyName)}setToken(e){c.set(this.feathersConfig.storageTokenKeyName,e,{expires:this.config.tokenExpiration,secure:!0,sameSite:"Strict"})}}function k(t,e){return{api:new b(t,e)}}const d=l(m.create({baseURL:h.baseURL,timeout:25e3,headers:{"Content-Type":"application/json"}}),{maxRequests:6,perMilliseconds:1e3}),{api:x}=k(d,{});var y=g(({app:t})=>{t.config.globalProperties.$api=x});export{x as api,y as default};
