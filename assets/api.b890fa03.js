var n=Object.defineProperty;var c=(t,e,s)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var i=(t,e,s)=>(c(t,typeof e!="symbol"?e+"":e,s),s);import{t as r,f as h}from"./index.19d57585.js";import{r as u,a as f}from"./index.7dbe61ef.js";var o={get dev(){return!1},baseURL:"https://api.elitehcms.com",apiDevURL:"https://api.elitehcms.com",socketDevURL:"wss://api.elitehcms.com",storageTokenKeyName:"feathers-jwt",tokenType:"Bearer",tokenExpiration:"12h",apiToken:"dafcbf3f-35d1-44ea-b9e6-732ef3812777"};class p{constructor(e,s){i(this,"axiosIns",null);i(this,"feathersIns",null);i(this,"feathersConfig",{...o});i(this,"isAlreadyFetchingAccessToken",!1);i(this,"subscribers",[]);this.axiosIns=e,this.feathersConfig={...this.feathersConfig,...s},this.axiosIns.interceptors.request.use(a=>(a.headers["x-access-token"]=this.feathersConfig.apiToken,a),a=>Promise.reject(a))}createMessageQueue(e){return this.axiosIns.post("messages/queue",e).then(s=>s.data).catch(s=>{throw s})}createNotification(e){return this.axiosIns.post("notifications",e).then(s=>s.data).catch(s=>{throw s})}onAccessTokenFetched(e){this.subscribers=this.subscribers.filter(s=>s(e))}addSubscriber(e){this.subscribers.push(e)}getToken(){return r.get(this.feathersConfig.storageTokenKeyName)}setToken(e){r.set(this.feathersConfig.storageTokenKeyName,e,{expires:this.config.tokenExpiration,secure:!0,sameSite:"Strict"})}}function g(t,e){return{api:new p(t,e)}}const l=u(f.create({baseURL:o.baseURL,timeout:25e3,headers:{"Content-Type":"application/json"}}),{maxRequests:6,perMilliseconds:1e3}),{api:m}=g(l,{});var x=h(({app:t})=>{t.config.globalProperties.$api=m});export{m as api,x as default};
